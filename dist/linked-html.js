!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.LinkedHtml=t():e.LinkedHtml=t()}(this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return e[r].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1);Object.defineProperty(t,"Engine",{enumerable:!0,get:function(){return r["default"]}});var i=n(9);Object.defineProperty(t,"Expression",{enumerable:!0,get:function(){return i["default"]}});var o=n(8);Object.defineProperty(t,"register",{enumerable:!0,get:function(){return o.register}})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t,n,r){var i=n.length,o=Array.from(e.attributes).filter(function(e){return e.name.substr(0,i)===n}).reduce(function(n,o){var u=o.name.substr(i).replace(/-([a-z])/g,function(e){return e[1].toUpperCase()}),a=r[u];try{if(!a)throw new ReferenceError("marker '"+u+"' not found.");a(t,e,o.value)}catch(s){var c=e.outerHTML.match(/^<[^<]+>/i);throw s.message=": "+s.message+"\n'"+u+"' -> "+c,s}return a._options&&a._options.breakCompile?!1:n},!0);o&&e.children.length&&Array.from(e.children).forEach(function(e){return u(e,t,n,r)})}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();Object.defineProperty(t,"__esModule",{value:!0});var s=n(2),c=n(8),f=n(12),l=r(f),h=n(13),d=r(h),p=n(15),v=r(p),y=n(17),g=r(y),b=n(18),m=r(b),w=n(20),k=r(w),O=n(21),j=r(O),_=n(22),E=r(_),P={link:l["default"],"class":d["default"],context:v["default"],on:g["default"],foreach:m["default"],prop:k["default"],ref:j["default"],text:E["default"]},x={"int":{set:function(e){return parseInt(e,10)},get:String},bool:{set:Boolean,get:String}},M=new WeakMap,C=new WeakMap,S=new WeakMap,T=function(){function e(t){var n=this,r=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],i=r.state,a=r.markers,s=r.filters,c=r.prefix,f=r.live;if(o(this,e),!t)throw new TypeError("Invalid first argument.");if(i&&Object(i)!==i)throw new TypeError("Invalid 'state' option, object required.");var l=Object.defineProperties(e.config(this),{markers:{value:Object.assign({},P,a)},filters:{value:Object.assign({},x,s)},prefix:{value:(c||"-")+"-"},live:{value:void 0===f?!0:f}});Object.defineProperty(this,"root",{value:this}),this.state=i||{},t.nodeType===Node.ELEMENT_NODE?u(t,this,l.prefix,l.markers):Array.from(t.children||t).forEach(function(e){return u(e,n,l.prefix,l.markers)})}return a(e,null,[{key:"watch",value:function(e,t){var n=M.get(e);n||(n=new Set,M.set(e,n)),n.add(t)}},{key:"config",value:function(e){var t=C.get(e.root);return t||(t={},C.set(e,t)),t}},{key:"queue",value:function(e){var t=this;this._request?this._engines.add(e):(s.State.now(),this._engines=(new Set).add(e),this._request=window.requestAnimationFrame(function(){t._engines.forEach(function(e){var t=M.get(e);t&&t.forEach(function(e){return e()})}),t._request=t._engines=void 0}))}},{key:"spawn",value:function(t,n,r){var i=e.config(t),o=Object.create(t);return Object.defineProperty(o,"parent",{value:t}),o.state=r,n.forEach(function(e){return u(e,o,i.prefix,i.markers)}),o}},{key:"register",value:function(e,t){return(0,c.register)(this,e,t)}}]),a(e,[{key:"state",get:function(){var t=S.get(this);return"object"===("undefined"==typeof t?"undefined":i(t))&&null!==t&&e.queue(this),t},set:function(t){S.set(this,t),e.queue(this)}}]),e}();t["default"]=T},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3);Object.defineProperty(t,"State",{enumerable:!0,get:function(){return r["default"]}});var i=n(5);Object.defineProperty(t,"Observer",{enumerable:!0,get:function(){return i["default"]}});var o=n(6);Object.defineProperty(t,"PropertyObserver",{enumerable:!0,get:function(){return o["default"]}})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();Object.defineProperty(t,"__esModule",{value:!0});var a=n(4),s=r(a),c=new WeakMap,f=0,l=!1,h=function(){function e(t){if(o(this,e),!e.isObject(t))throw new TypeError("Invalid arguments");var n=c.get(t);if(n)return n;c.set(t,this);var r=new s["default"];this.cache=Object.keys(t).reduce(function(n,i){var o=n[i]=t[i];return e.isObject(o)&&new e(o),r.set(o,i),n},{}),this.keyMap=r,this.target=t,this.lastCheck=e.now(),this.lastChange=0}return u(e,null,[{key:"now",value:function(){return l||(f+=1,l=window.requestAnimationFrame(function(){return l=void 0})),f}},{key:"isObject",value:function(e){return"object"===("undefined"==typeof e?"undefined":i(e))&&null!==e}},{key:"is",value:function(e,t){return 0===e&&0===t?1/e===1/t:e!==e?t!==t:e===t}}]),u(e,[{key:"isChanged",value:function(){var t=this,n=e.now();return n>this.lastCheck&&!function(){var r=!1;t.lastCheck=n,t.changelog={},Object.keys(t.cache).forEach(function(e){if(!t.target.hasOwnProperty(e)){var n=t.cache[e];t.changelog[e]={type:"delete",oldValue:n},r=!0}});var i=new s["default"],o={};t.cache=Object.keys(t.target).reduce(function(n,u){var a=t.target[u];if(t.cache.hasOwnProperty(u)?e.is(a,t.cache[u])||(t.changelog[u]=t.changelog[u]||{type:"set"},t.changelog[u].oldValue=t.cache[u],r=!0):(t.changelog[u]={type:"set"},r=!0),e.isObject(a)){var s=new e(a);s.isChanged()&&(r=!0,t.changelog[u]||(t.changelog[u]={type:"modify"},t.changelog[u].changelog=s.changelog))}if(t.changelog[u]){var c=t.keyMap.shift(a,u);c&&c!==u&&t.target[c]!==a&&(t.changelog[u].oldKey=c,t.changelog[c]?t.changelog[c].newKey=u:o[c]=u),o[u]&&(t.changelog[u].newKey=o[u])}return n[u]=a,i.set(a,u),n},{}),t.keyMap=i,r?t.lastChange=t.lastCheck:t.changelog=void 0}(),this.lastChange===n}}]),e}();t["default"]=h},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(){n(this,e),this.map=new Map}return r(e,[{key:"set",value:function(e,t){var n=this.map.get(e);return n||(n=new Set,this.map.set(e,n)),t&&n.add(t),n}},{key:"shift",value:function(e,t){var n=this.map.get(e);if(n&&n.size){if(n.has(t))return n["delete"](t),t;var r=!0,i=!1,o=void 0;try{for(var u,a=n[Symbol.iterator]();!(r=(u=a.next()).done);r=!0){var s=u.value;return n["delete"](s),s}}catch(c){i=!0,o=c}finally{try{!r&&a["return"]&&a["return"]()}finally{if(i)throw o}}}return!1}}]),e}();t["default"]=i},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();Object.defineProperty(t,"__esModule",{value:!0});var u=n(3),a=r(u),s=n(6),c=r(s),f=function(){function e(t,n,r){var o=this;if(i(this,e),!t||!n||!r)throw new TypeError("Invalid arguments");this.callback=r,this.revert=[],this.state=new a["default"]([].concat(n).reduce(function(e,n){var r=new c["default"](t,n);return e[n]=t[n],o.revert.push(r.observe(function(t){a["default"].is(e[n],t)?a["default"].isObject(t)&&o.check():(e[n]=t,o.check())})),e},{}))}return o(e,null,[{key:"requestAnimationFrame",value:function(e){var t=this;return this._request?this._callbacks.add(e):(this._callbacks=(new Set).add(e),this._request=window.requestAnimationFrame(function(){t._callbacks.forEach(function(e){return e()}),t._request=t._callbacks=void 0})),e}},{key:"cancelAnimationFrame",value:function(e){this._callbacks&&this._callbacks["delete"](e)}}]),o(e,[{key:"check",value:function(){var t=this;this.checkFn||(this.checkFn=e.requestAnimationFrame(function(){t.state.isChanged()&&t.callback(t.state.changelog),t.checkFn=void 0}))}},{key:"destroy",value:function(){this.checkFn&&e.cancelAnimationFrame(this.checkFn),this.revert.forEach(function(e){return e()})}}]),e}();t["default"]=f},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();Object.defineProperty(t,"__esModule",{value:!0});var a=n(7),s=r(a),c=new WeakMap,f=function(){function e(t,n){var r=this;o(this,e);var i=e.singleton(t,n,this);return i!==this?i:(this.proxy=new s["default"](t,n,function(e){return r.getters.forEach(function(t){return t(e)})},function(e){return r.setters.forEach(function(t){return t(e)})}),this.getters=new Set,void(this.setters=new Set))}return u(e,null,[{key:"singleton",value:function(e,t,n){var r=c.get(e);if(r){if(r[t])return r[t];r[t]=n}else c.set(e,i({},t,n));return n}}]),u(e,[{key:"observe",value:function(e,t){var n=this;return this.getters.size||this.proxy.on(),this.getters.add(e),this.setters.add(t||e),function(){n.unobserve(e,t)}}},{key:"unobserve",value:function(e,t){this.getters["delete"](e),this.setters["delete"](t||e),this.getters.size||this.setters.size||this.proxy.off()}}]),e}();t["default"]=f},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(t,r,i,o){n(this,e),this.host=t,this.key=r,this.getter=i,this.setter=o||i}return r(e,[{key:"getOwnDescriptor",value:function(){var e=Object.getOwnPropertyDescriptor(this.host,this.key);if(e){if(!e.configurable)throw new TypeError("Cannot create proxy for not configurable property '"+this.key+"'");if(!e.get&&!e.set&&!e.writable)throw new TypeError("Cannot create proxy for readonly property '"+this.key+"'")}return e}},{key:"getProtoDescriptor",value:function(){for(var e=this,t=void 0,n=Object.getPrototypeOf(this.host);n&&!(t=Object.getOwnPropertyDescriptor(n,this.key));)n=Object.getPrototypeOf(n);return t&&(t.get||t.set||(t.get=function(){delete e.host[e.key];var t=e.host[e.key];return e.on(),t},t.set=function(t){delete e.host[e.key],e.host[e.key]=t,e.on()})),t}},{key:"on",value:function(){var e=this.getOwnDescriptor();e?this.ownProperty=!0:(this.ownProperty=!1,e=this.getProtoDescriptor()),e||(this.ownProperty=!0,this.notDefined=!0,e={enumerable:!0,writable:!0,configurable:!0}),this.desc=e,this.value=this.host[this.key],Object.defineProperty(this.host,this.key,{configurable:!0,enumerable:this.desc.enumerable,get:this.get.bind(this),set:this.set.bind(this)})}},{key:"off",value:function(){this.ownProperty?this.notDefined?delete this.host[this.key]:(this.desc.get||this.desc.set||(this.desc.value=this.value),Object.defineProperty(this.host,this.key,this.desc)):delete this.host[this.key]}},{key:"get",value:function(){return this.desc.get&&(this.value=this.desc.get.call(this.host)),this.getter(this.value),this.value}},{key:"set",value:function(e){this.notDefined=!1,this.desc.set&&this.desc.set.call(this.host,e),(this.desc.writable||this.desc.get||this.desc.set)&&(this.value=e),this.setter(this.value)}}]),e}();t["default"]=i},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t,n){var r=Object.assign({},e._options,n),i=u(r,["template","properties","methods","shadow","prototype"]),a=Object.create(i.prototype||HTMLElement.prototype),c=i.template,f=i.properties;if(c&&c!==!0&&(i.template=s(c)),f)for(var l in f)if("string"==typeof f[l])f[l]={link:i.properties[l],attribute:!0};else{if(Object(f[l])!==f[l])throw new TypeError("Invalid '"+l+"' property description.");void 0===f[l].attribute&&(f[l].attribute=!0)}return Object.defineProperty(a,"createdCallback",{value:function(){d.set(this,o(e,this,i,r))}}),"function"==typeof e.prototype.attached&&Object.defineProperty(a,"attachedCallback",{value:function(){d.get(this).then(function(e){e.attached()})}}),"function"==typeof e.prototype.detached&&Object.defineProperty(a,"detachedCallback",{value:function(){d.get(this).then(function(e){e.detached()})}}),document.registerElement(t,{prototype:a})}function o(e,t,n,r){var i=n.template,o=n.properties,u=n.methods,s=n.shadow&&a(t),l=s||document.createDocumentFragment();if(i){if(i===!0){if(!t.children[0]||!t.children[0].content)throw new Error("Template element required.");i=t.children[0].content,t.removeChild(t.children[0])}l.appendChild(document.importNode(i,!0))}else Array.from(t.childNodes).forEach(function(e){l.appendChild(e)});return new Promise(function(n){window.requestAnimationFrame(function(){var i=new e(l,r);if(Object.defineProperty(i,"host",{value:t}),s?Object.defineProperty(i,"shadow",{value:l}):t.insertBefore(l,t.childNodes[0]),o){var a=function(e){var n=o[e],r=n.link,u=n.attribute,a=n.reflect,s=new h["default"](i,r);new f.PropertyObserver(t,e).observe(function(){return s.get()},function(e){return s.set(e)}),u&&!function(){var n=u!==!0?u:c(e);t.hasAttribute(n)&&s.set(t.getAttribute(n)),a&&s.observe(function(e){t.setAttribute(n,e)})}()};for(var d in o)a(d)}u&&[].concat(u).forEach(function(e){Object.defineProperty(t,e,{writable:!0,value:function(){return i[e].apply(i,arguments)}})}),n(i)})})}function u(e){var t=arguments.length<=1||void 0===arguments[1]?[]:arguments[1],n={},r=!0,i=!1,o=void 0;try{for(var u,a=t[Symbol.iterator]();!(r=(u=a.next()).done);r=!0){var s=u.value;n[s]=e[s],delete e[s]}}catch(c){i=!0,o=c}finally{try{!r&&a["return"]&&a["return"]()}finally{if(i)throw o}}return n}function a(e){return"function"==typeof e.attachShadow?e.attachShadow({mode:"closed"}):"function"==typeof e.createShadowRoot?e.createShadowRoot():void 0}function s(e){if("string"==typeof e){var t=document.createElement("template");return t.innerHTML=e,t.content}return e.content||e}function c(e){return e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}Object.defineProperty(t,"__esModule",{value:!0}),t.map=void 0,t.register=i;var f=n(2),l=n(9),h=r(l),d=t.map=new WeakMap},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var u,a=e[Symbol.iterator]();!(r=(u=a.next()).done)&&(n.push(u.value),!t||n.length!==t);r=!0);}catch(s){i=!0,o=s}finally{try{!r&&a["return"]&&a["return"]()}finally{if(i)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();Object.defineProperty(t,"__esModule",{value:!0});var a=n(2),s=n(1),c=r(s),f=n(10),l=r(f),h=n(11),d=r(h),p=function(){function e(t,n){var r=this;if(i(this,e),!n||"string"!=typeof n)throw new TypeError("'"+n+"': Invalid input type.");var u=e.parse(n.trim()),a=o(u,3),s=a[0],f=a[1],h=a[2];if(this.engine=t,this.filter={get:function(e){return e},set:function(e){return e}},this.engine.state?this.context=function(){return r.engine.state}:this.context=function(){return void 0===r.engine.state&&(r.engine.state={}),r.engine.state},h){var p=c["default"].config(t).filters;if(!p[h])throw new ReferenceError("Filter '"+h+"' not found.");Object.assign(this.filter,p[h])}s.forEach(function(e){return d["default"][e](r,t)}),this.path=new l["default"](f,this.context)}return u(e,null,[{key:"parse",value:function(e){for(var t=e.split("|"),n=o(t,2),r=n[0],i=n[1],u=new Set,a=0;a<r.length&&d["default"][r[a]];a++)u.add(r[a]);var s=r.substr(a);return[u,s,i]}}]),u(e,[{key:"get",value:function(){return this.filter.get(this.path.get())}},{key:"set",value:function(e,t){return this.path.set(this.filter.set(e),t)}},{key:"call",value:function(){var e;return(e=this.path).call.apply(e,arguments)}},{key:"observe",value:function(e){var t=this,n=arguments.length<=1||void 0===arguments[1]?!1:arguments[1],r=arguments.length<=2||void 0===arguments[2]?this.deep:arguments[2],i=void 0,o=this.get();r&&(i=new a.State(Object.defineProperty({},"value",{get:this.get.bind(this),configurable:!0,enumerable:!0}))),c["default"].watch(this.engine,function(){var n=t.get();i&&i.isChanged()?e(n,i.changelog.value):a.State.is(n,o)||e(n),o=n}),n&&e(o)}}]),e}();t["default"]=p},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(t,r){if(n(this,e),!t)throw new TypeError("Path cannot be empty.");this.evaluate=t,this.context=r,this.path=this.parse(t)}return r(e,[{key:"parse",value:function(e){var t=[],n=e.split("").reduce(function(e,n){switch(n){case".":return t.push({property:e,proto:Object}),"";case"[":return t.push({property:e,proto:Array}),"";case"]":return e}return e+n},"");return t.push({property:n}),t}},{key:"getContext",value:function(){var e=this.context();if(Object(e)!==e)throw new TypeError("Object required as path context.");return e}},{key:"get",value:function(){var e=this,t=this.getContext();return t&&this.path.every(function(n){var r=n.property,i=n.proto;if(t=t[r],t&&i&&!(t instanceof Object))throw new TypeError("'"+r+"' in '"+e.evaluate+"': Object instance required.");return t}),t}},{key:"set",value:function(e){var t=this,n=arguments.length<=1||void 0===arguments[1]?!1:arguments[1],r=this.path.reduce(function(e,n){var r=n.property,i=n.proto;if(i){if(e.context[r]){if(!(e.context[r]instanceof Object))throw new TypeError("'"+r+"' in '"+t.evaluate+"': Object instance required.")}else e.context[r]=i();e.context=e.context[r]}else e.property=r;return e},{context:this.getContext()}),i=r.context,o=r.property;return n&&void 0!==i[o]||(i[o]=e),i[o]}},{key:"call",value:function(){var e=this,t=this.path.reduce(function(t,n){var r=n.property,i=n.proto;if(i){if(t.context=t.context[r],!(t.context instanceof Object))throw new TypeError("'"+r+"' in '"+e.evaluate+"': Object instance required.")}else t.property=r;return t},{context:this.getContext()}),n=t.context,r=t.property;if("function"!=typeof n[r])throw new TypeError("'"+this.evaluate+"': Function required.");return n[r].apply(n,arguments)}},{key:"delete",value:function(){var e=this.getContext(),t={context:e,property:this.path[0].property};this.path.some(function(n){var r=n.property;return e.hasOwnProperty(r)?(Object.keys(e).length>1&&(t={context:e,property:r}),void(e=e[r])):!0}),delete t.context[t.property]}}]),e}();t["default"]=i},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={"!":function(e){var t=e.filter;e.filter={get:function(e){return t.get(!e)},set:function(e){return t.set(!e)}}},"@":function(e,t){e.context=function(){return t}},"&":function(e){e.set=function(){}},"*":function(e){e.deep=!0}};t["default"]=n},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t,n){var r=void 0;switch(t.type){case"checkbox":case"radio":r=new h(t);break;case"select-one":r=new d(t);break;case"select-multiple":r=new p(t);break;default:r=new l(t)}var i=new f["default"](e,n);i.set(r.get(),!0),i.observe(r.set.bind(r),!0,!1),r.observe(function(){return i.set(r.get())})}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=a;var c=n(9),f=r(c),l=function(){function e(t){u(this,e),this.node=t}return s(e,[{key:"get",value:function(){return this.node.value}},{key:"set",value:function(e){this.value=e,this.node.value!==e&&(this.node.value=e)}},{key:"observe",value:function(e){this.node.addEventListener("input",e)}}]),e}(),h=function(e){function t(){return u(this,t),i(this,Object.getPrototypeOf(t).apply(this,arguments))}return o(t,e),s(t,[{key:"get",value:function(){return this.node.checked?this.node.value:void 0}},{key:"set",value:function(e){this.node.value===e?this.node.checked=!0:this.node.checked=!1}},{key:"observe",value:function(e){this.node.addEventListener("change",e)}}]),t}(l),d=function(e){function t(e){u(this,t);var n=i(this,Object.getPrototypeOf(t).call(this,e));return"MutationObserver"in window&&new MutationObserver(function(){n.set(n.value)}).observe(e,{attributes:!0,childList:!0,characterData:!0,subtree:!0}),n}return o(t,e),s(t,[{key:"set",value:function(e){this.value=e,Array.from(this.node.options).some(function(t){return t.value===e?(t.selected=!0,!0):void 0})}},{key:"observe",value:function(e){this.node.addEventListener("change",e)}}]),t}(l),p=function(e){function t(){return u(this,t),i(this,Object.getPrototypeOf(t).apply(this,arguments))}return o(t,e),s(t,[{key:"get",value:function(){var e=this.value||[],t=Array.from(this.node.options).filter(function(e){return e.selected}).map(function(e){return e.value});return Object.assign(e,t),e.length=t.length,e}},{key:"set",value:function(e){if(this.value=e,!Array.isArray(e))throw new Error("Invalid values. Array instance required.");Array.from(this.node.options).forEach(function(t){t.selected=e.some(function(e){return e===t.value})})}}]),t}(d)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t,n){(0,a.list)(n,function(n,r){var i=new u["default"](e,r);i.set(t.classList.contains(n),!0),i.observe(function(e){e?t.classList.add(n):t.classList.remove(n)},!0,!1)})}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=i;var o=n(9),u=r(o),a=n(14)},function(e,t){"use strict";function n(e,t){e.split(";").forEach(function(e){var n=e.split(":"),i=r(n,2),o=i[0],u=i[1];if(!o||!u)throw new SyntaxError("'"+e+"': Invalid list element.");t(o.trim(),u.trim())})}var r=function(){function e(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var u,a=e[Symbol.iterator]();!(r=(u=a.next()).done)&&(n.push(u.value),!t||n.length!==t);r=!0);}catch(s){i=!0,o=s}finally{try{!r&&a["return"]&&a["return"]()}finally{if(i)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();Object.defineProperty(t,"__esModule",{value:!0}),t.list=n},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e}function o(e,t,n){if(!t.children[0])throw new Error("No children elements.");var r=new a["default"](Array.from(t.childNodes).filter(function(e){return e.nodeType===Node.ELEMENT_NODE}),e),o=new c["default"](e,n);o.set({},!0),o.observe(function(e){if(e){if("object"!==("undefined"==typeof e?"undefined":i(e)))throw new TypeError("Invalid context target.");r.setState(e).append()}else r.remove()},!0,!0)}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=o;var u=n(16),a=r(u),s=n(9),c=r(s);o._options={breakCompile:!0}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();Object.defineProperty(t,"__esModule",{value:!0});var u=n(1),a=r(u),s=function(){function e(t,n,r){if(i(this,e),this.nodes=[].concat(t),this.host=r||this.nodes[0].parentElement,this.parentEngine=n,!this.host)throw new Error("Invalid host for template.");this.nodes[0].parentElement||(this.hidden=!0)}return o(e,[{key:"getState",value:function(){if(!this.engine)throw new Error("Template does not fully initalized.");return this.engine.state}},{key:"setState",value:function(e){return this.engine?this.engine.state=e:this.engine=a["default"].spawn(this.parentEngine,this.nodes,e),this}},{key:"append",value:function(){var e=this,t=arguments.length<=0||void 0===arguments[0]?!1:arguments[0],n=arguments.length<=1||void 0===arguments[1]?null:arguments[1];return(this.hidden||t)&&(this.nodes.forEach(function(t){e.host.insertBefore(t,n)}),this.hidden=!1),this}},{key:"remove",value:function(){var e=this;return this.hidden||!function(){var t=document.createDocumentFragment();e.nodes.forEach(function(e){return t.appendChild(e)}),e.hidden=!0}(),this}},{key:"clone",value:function(){return new this.constructor(this.nodes.map(function(e){return e.cloneNode(!0)}),this.parentEngine,this.host)}}]),e}();t["default"]=s},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t,n){(0,a.list)(n,function(n,r){var i=new u["default"](e,r);t.addEventListener(n,function(e){return i.call(e)})})}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=i;var o=n(9),u=r(o),a=n(14)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t,n){return new l(e,t,n)}var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=o;var a=n(19),s=r(a),c=n(9),f=r(c),l=function(){function e(t,n,r){if(i(this,e),!n.children[0])throw new Error("No children elements.");this.engine=t,this.node=n;var o=new f["default"](t,r),u=o.get(),a=!1;if(void 0===u&&(u=o.set([],!0),a=!0),!Array.isArray(u))throw new TypeError("Invalid foreach target.");a?(this.items=this.createFromView(u),this.template=this.items[this.items.length-1].clone()):(this.items=this.createFromList(u),this.items.length?this.template=this.items[this.items.length-1].clone():this.template=new s["default"](n.children[0],this.engine),this.clear(u)),o.observe(this.render.bind(this),!1,!0)}return u(e,[{key:"createFromView",value:function(e){var t=this,n=this.node.children.length;return Array.from(this.node.children).map(function(r,i){var o=new s["default"](r,t.engine);return e[i]=o.setState(e[i],{index:i,length:n}).getState(),o})}},{key:"createFromList",value:function(e){var t=this,n=e.length,r=void 0;return e.map(function(i,o){return r=t.node.children[o]?new s["default"](t.node.children[o],t.engine).setState(e[o],{index:o,length:n}):r.clone().setState(e[o],{index:o,length:n}).append(!0),e[o]=r.getState(),r})}},{key:"clear",value:function(e){for(var t=e.length,n=this.node.children.length,r=t;n>r;r++)this.node.removeChild(this.node.children[t])}},{key:"render",value:function(e){var t=this,n=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],r=n.type,i=n.changelog;if(!Array.isArray(e))throw new TypeError("Invalid foreach target.");var o=e.length;switch(r){case"modify":Object.assign(this.items,Object.keys(i).reduce(function(n,r){var u=i[r],a=u.type,s=u.oldKey,c=u.newKey;if("delete"===a)t.items[r]&&t.items[r].remove();else{var f=parseInt(r,10),l=t.items[s||r],h=!1;s&&(t.items[r]&&t.items[r].remove(),t.items[s]=null),(!l||c&&!s)&&(l=t.template.clone(),h=!0),l.setState(e[r],{index:f,length:o}),(h||s)&&l.append(!0,t.node.children[f]),n[r]=l}return n},{})),this.items.length=e.length;break;case"set":for(var u=this.items.length,a=e.map(function(e,n){var r=void 0;return r=u>n?t.items[n]:t.template.clone().append(!0),r.setState(e,{index:n,length:o}),r}),s=o;u>s;s++)this.items[s].remove();this.items=a}}}]),e}();o._options={breakCompile:!0}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e){if(h.has(e))return h.get(e);var t=Object.defineProperties(Object.create(e),{number:{get:function(){return this.index+1}},odd:{get:function(){return this.number%2!==0}},even:{get:function(){return this.number%2===0}},first:{get:function(){return 0===this.index}},last:{get:function(){return this.length===this.number}}});return h.set(e,t),t}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=function p(e,t,n){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,t);if(void 0===r){var i=Object.getPrototypeOf(e);return null===i?void 0:p(i,t,n)}if("value"in r)return r.value;var o=r.get;if(void 0!==o)return o.call(n)};Object.defineProperty(t,"__esModule",{value:!0});var f=n(16),l=r(f),h=new WeakMap,d=function(e){function t(e,n,r){return i(this,t),o(this,Object.getPrototypeOf(t).call(this,e,a(n),r))}return u(t,e),s(t,[{key:"setState",value:function(e,n){var r=n.index,i=n.length;return c(Object.getPrototypeOf(t.prototype),"setState",this).call(this,e),
Object.assign(this.engine,{index:r,length:i}),this}}]),t}(l["default"]);t["default"]=d},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t,n){(0,s.list)(n,function(n,r){var i=o(t,n),u=new a["default"](e,r);u.set(i.get(),!0),u.observe(i.set,!0)})}function o(e,t){return t in e?{get:function(){return e[t]},set:function(n){return e[t]=n}}:{get:function(){var n=e.getAttribute(t);return n?n:void 0},set:function(n){n===!1||void 0===n||null===n?e.removeAttribute(t):e.setAttribute(t,n===!0?t:n)}}}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=i;var u=n(9),a=r(u),s=n(14)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t,n){var r=new u["default"](e,n);r.set(t,!0)}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=i;var o=n(9),u=r(o)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t,n){(0,u["default"])(e,t,"textContent: "+n)}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=i;var o=n(20),u=r(o)}])});
//# sourceMappingURL=linked-html.js.map