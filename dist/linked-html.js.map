{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///linked-html.js","webpack:///webpack/bootstrap 752517655c8da0551ca7","webpack:///./linked-html.js","webpack:///./src/Engine.js","webpack:///./~/papillon/src/State.js","webpack:///./~/papillon/src/KeyMap.js","webpack:///./~/papillon/src/Observer.js","webpack:///./~/papillon/src/PropertyObserver.js","webpack:///./~/papillon/src/PropertyProxy.js","webpack:///./src/Component.js","webpack:///./src/Expression/Expression.js","webpack:///./src/Expression/Path.js","webpack:///./src/Expression/Flags.js","webpack:///./src/Markers/Link.js","webpack:///./src/Markers/ClassList.js","webpack:///./src/Markers/List.js","webpack:///./src/Markers/Context.js","webpack:///./src/Markers/Template/Template.js","webpack:///./src/Markers/EventListener.js","webpack:///./src/Markers/Foreach.js","webpack:///./src/Markers/Template/IndexedTemplate.js","webpack:///./src/Markers/Property.js","webpack:///./src/Markers/Reference.js","webpack:///./src/Markers/Text.js"],"names":["root","factory","exports","module","define","amd","this","modules","__webpack_require__","moduleId","installedModules","id","loaded","call","m","c","p","Object","defineProperty","value","_Engine","enumerable","get","_Expression","_Component","register","_interopRequireDefault","obj","__esModule","default","_typeof","Symbol","constructor","_classCallCheck","instance","Constructor","TypeError","compile","node","engine","prefix","markers","prefixLength","length","compileChilds","Array","from","attributes","filter","a","name","substr","reduce","acc","attr","replace","g","toUpperCase","marker","ReferenceError","e","nodeText","outerHTML","match","message","_options","breakCompile","children","forEach","_createClass","defineProperties","target","props","i","descriptor","configurable","writable","key","protoProps","staticProps","prototype","_papillon","_Link","_Link2","_ClassList","_ClassList2","_Context","_Context2","_EventListener","_EventListener2","_Foreach","_Foreach2","_Property","_Property2","_Reference","_Reference2","_Text","_Text2","Markers","link","class","context","on","foreach","prop","ref","text","Filters","int","set","v","parseInt","bool","Boolean","watchers","WeakMap","configs","states","Engine","_this2","_ref","arguments","undefined","state","filters","live","config","assign","nodeType","Node","ELEMENT_NODE","childNodes","n","cb","Set","add","_this","_request","_engines","State","now","window","requestAnimationFrame","nodeList","childEngine","create","options","s","queue","_State","_Observer","_PropertyObserver","_PropertyProxy","_KeyMap","_KeyMap2","map","timestamp","request","isObject","keyMap","cache","keys","lastCheck","lastChange","v1","v2","changed","changelog","hasOwnProperty","type","oldValue","cacheNewKeys","is","nestedState","isChanged","oldKey","shift","newKey","KeyMap","Map","list","size","has","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","iterator","next","done","result","err","_State2","_PropertyObserver2","Observer","host","callback","revert","concat","observer","push","observe","check","_callbacks","_this3","checkFn","cancelAnimationFrame","_defineProperty","_PropertyProxy2","PropertyObserver","singleton","proxy","getters","newValue","setters","unobserve","off","PropertyProxy","getter","setter","desc","getOwnPropertyDescriptor","getPrototypeOf","newVal","getOwnDescriptor","ownProperty","getProtoDescriptor","notDefined","bind","temp","customOptions","constrOpts","extractOptions","HTMLElement","template","properties","resolveTemplate","attribute","camelToDash","attached","then","detached","attributeChanged","attrName","oldVal","document","registerElement","methods","shadow","resolveShadow","createDocumentFragment","localName","Error","removeChild","content","appendChild","importNode","Promise","resolve","insertBefore","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_loop","_properties$key","reflect","expr","_Expression2","val","hasAttribute","getAttribute","removeAttribute","setAttribute","_iterator2","method","apply","_iteratorNormalCompletion3","_didIteratorError3","_iteratorError3","_step3","_iterator3","attachShadow","mode","createShadowRoot","createElement","innerHTML","_ret2","fragment","str","toLowerCase","_slicedToArray","sliceIterator","arr","_arr","_n","_d","_e","_s","_i","isArray","_Engine2","_Path","_Path2","_Flags","_Flags2","Expression","evaluate","_Expression$parse","parse","trim","_Expression$parse2","flags","f","path","_evaluate$split","split","_evaluate$split2","index","onlyDefaults","_path","init","deep","watch","Path","property","char","proto","getContext","every","_path$reduce","_ref2","_path$reduce2","_ref3","some","_ref4","Flags","!","@","&","*","_possibleConstructorReturn","self","_inherits","subClass","superClass","setPrototypeOf","__proto__","Link","wrapper","CheckWrapper","SelectWrapper","MultiSelectWrapper","Wrapper","addEventListener","_Wrapper","checked","_Wrapper2","MutationObserver","childList","characterData","subtree","o","selected","_SelectWrapper","values","newValues","ClassList","_List","classList","contains","remove","_v$split","_v$split2","SyntaxError","Context","_Template2","setState","append","_Template","Template","nodes","parentElement","parentEngine","hidden","spawn","forceAppend","cloneNode","EventListener","Foreach","Controller","_IndexedTemplate","_IndexedTemplate2","createFromView","items","clone","createFromList","clear","render","child","getState","item","max","_changelog$key","itemsLength","extendEngine","extended","number","odd","even","first","last","_get","object","receiver","Function","parent","_Template3","IndexedTemplate","Property","accessor","resolveProperty","Reference","Text"],"mappings":"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","file":"linked-html.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"LinkedHtml\"] = factory();\n\telse\n\t\troot[\"LinkedHtml\"] = factory();\n})(this, function() {\nreturn \n\n\n/** WEBPACK FOOTER **\n ** webpack/universalModuleDefinition\n **/","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"LinkedHtml\"] = factory();\n\telse\n\t\troot[\"LinkedHtml\"] = factory();\n})(this, function() {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _Engine = __webpack_require__(1);\n\t\n\tObject.defineProperty(exports, 'Engine', {\n\t  enumerable: true,\n\t  get: function get() {\n\t    return _Engine.default;\n\t  }\n\t});\n\t\n\tvar _Expression = __webpack_require__(9);\n\t\n\tObject.defineProperty(exports, 'Expression', {\n\t  enumerable: true,\n\t  get: function get() {\n\t    return _Expression.default;\n\t  }\n\t});\n\t\n\tvar _Component = __webpack_require__(8);\n\t\n\tObject.defineProperty(exports, 'register', {\n\t  enumerable: true,\n\t  get: function get() {\n\t    return _Component.register;\n\t  }\n\t});\n\n/***/ },\n/* 1 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _papillon = __webpack_require__(2);\n\t\n\tvar _Component = __webpack_require__(8);\n\t\n\tvar _Link = __webpack_require__(12);\n\t\n\tvar _Link2 = _interopRequireDefault(_Link);\n\t\n\tvar _ClassList = __webpack_require__(13);\n\t\n\tvar _ClassList2 = _interopRequireDefault(_ClassList);\n\t\n\tvar _Context = __webpack_require__(15);\n\t\n\tvar _Context2 = _interopRequireDefault(_Context);\n\t\n\tvar _EventListener = __webpack_require__(17);\n\t\n\tvar _EventListener2 = _interopRequireDefault(_EventListener);\n\t\n\tvar _Foreach = __webpack_require__(18);\n\t\n\tvar _Foreach2 = _interopRequireDefault(_Foreach);\n\t\n\tvar _Property = __webpack_require__(20);\n\t\n\tvar _Property2 = _interopRequireDefault(_Property);\n\t\n\tvar _Reference = __webpack_require__(21);\n\t\n\tvar _Reference2 = _interopRequireDefault(_Reference);\n\t\n\tvar _Text = __webpack_require__(22);\n\t\n\tvar _Text2 = _interopRequireDefault(_Text);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _typeof(obj) { return obj && typeof Symbol !== \"undefined\" && obj.constructor === Symbol ? \"symbol\" : typeof obj; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar Markers = {\n\t  link: _Link2.default,\n\t  class: _ClassList2.default,\n\t  context: _Context2.default,\n\t  on: _EventListener2.default,\n\t  foreach: _Foreach2.default,\n\t  prop: _Property2.default,\n\t  ref: _Reference2.default,\n\t  text: _Text2.default\n\t};\n\t\n\tvar Filters = {\n\t  int: { set: function set(v) {\n\t      return parseInt(v, 10);\n\t    } },\n\t  bool: { set: Boolean }\n\t};\n\t\n\tvar watchers = new WeakMap();\n\tvar configs = new WeakMap();\n\tvar states = new WeakMap();\n\t\n\tvar Engine = (function () {\n\t  _createClass(Engine, null, [{\n\t    key: 'watch',\n\t    value: function watch(engine, cb) {\n\t      var e = watchers.get(engine);\n\t      if (!e) {\n\t        e = new Set();\n\t        watchers.set(engine, e);\n\t      }\n\t      e.add(cb);\n\t    }\n\t  }, {\n\t    key: 'config',\n\t    value: function config(engine) {\n\t      var c = configs.get(engine.root);\n\t      if (!c) {\n\t        c = {};\n\t        configs.set(engine, c);\n\t      }\n\t      return c;\n\t    }\n\t  }, {\n\t    key: 'queue',\n\t    value: function queue(engine) {\n\t      var _this = this;\n\t\n\t      if (!this._request) {\n\t        _papillon.State.now();\n\t\n\t        this._engines = new Set().add(engine);\n\t        this._request = window.requestAnimationFrame(function () {\n\t          _this._engines.forEach(function (e) {\n\t            var set = watchers.get(e);\n\t            if (set) {\n\t              set.forEach(function (cb) {\n\t                return cb();\n\t              });\n\t            }\n\t          });\n\t          _this._request = _this._engines = undefined;\n\t        });\n\t      } else {\n\t        this._engines.add(engine);\n\t      }\n\t    }\n\t  }, {\n\t    key: 'spawn',\n\t    value: function spawn(engine, nodeList, state) {\n\t      var config = Engine.config(engine);\n\t      var childEngine = Object.create(engine);\n\t\n\t      Object.defineProperty(childEngine, 'parent', { value: engine });\n\t      childEngine.state = state;\n\t\n\t      nodeList.forEach(function (node) {\n\t        return compile(node, childEngine, config.prefix, config.markers);\n\t      });\n\t\n\t      return childEngine;\n\t    }\n\t  }, {\n\t    key: 'register',\n\t    value: function register(name, options) {\n\t      return (0, _Component.register)(this, name, options);\n\t    }\n\t  }]);\n\t\n\t  function Engine(node) {\n\t    var _this2 = this;\n\t\n\t    var _ref = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];\n\t\n\t    var state = _ref.state;\n\t    var markers = _ref.markers;\n\t    var filters = _ref.filters;\n\t    var prefix = _ref.prefix;\n\t    var live = _ref.live;\n\t\n\t    _classCallCheck(this, Engine);\n\t\n\t    if (!node) {\n\t      throw new TypeError('Invalid first argument.');\n\t    }\n\t\n\t    if (state && Object(state) !== state) {\n\t      throw new TypeError('Invalid \\'state\\' option, object required.');\n\t    }\n\t\n\t    var config = Object.defineProperties(Engine.config(this), {\n\t      markers: { value: Object.assign({}, Markers, markers) },\n\t      filters: { value: Object.assign({}, Filters, filters) },\n\t      prefix: { value: (prefix || '-') + '-' },\n\t      live: { value: live === undefined ? true : live }\n\t    });\n\t\n\t    Object.defineProperty(this, 'root', { value: this });\n\t    this.state = state || {};\n\t\n\t    if (node.nodeType === Node.ELEMENT_NODE) {\n\t      compile(node, this, config.prefix, config.markers);\n\t    } else {\n\t      Array.from(node.childNodes || node).forEach(function (n) {\n\t        if (n.nodeType === Node.ELEMENT_NODE) {\n\t          compile(n, _this2, config.prefix, config.markers);\n\t        }\n\t      });\n\t    }\n\t  }\n\t\n\t  _createClass(Engine, [{\n\t    key: 'state',\n\t    get: function get() {\n\t      var s = states.get(this);\n\t      if ((typeof s === 'undefined' ? 'undefined' : _typeof(s)) === 'object' && s !== null) {\n\t        Engine.queue(this);\n\t      }\n\t      return s;\n\t    },\n\t    set: function set(value) {\n\t      states.set(this, value);\n\t      Engine.queue(this);\n\t    }\n\t  }]);\n\t\n\t  return Engine;\n\t})();\n\t\n\texports.default = Engine;\n\t\n\tfunction compile(node, engine, prefix, markers) {\n\t  var prefixLength = prefix.length;\n\t  var compileChilds = Array.from(node.attributes).filter(function (a) {\n\t    return a.name.substr(0, prefixLength) === prefix;\n\t  }).reduce(function (acc, attr) {\n\t    var id = attr.name.substr(prefixLength).replace(/-([a-z])/g, function (g) {\n\t      return g[1].toUpperCase();\n\t    });\n\t\n\t    var marker = markers[id];\n\t\n\t    try {\n\t      if (!marker) {\n\t        throw new ReferenceError('marker \\'' + id + '\\' not found.');\n\t      }\n\t      marker(engine, node, attr.value);\n\t    } catch (e) {\n\t      var nodeText = node.outerHTML.match(/^<[^<]+>/i);\n\t      e.message = ': ' + e.message + '\\n\\'' + id + '\\' -> ' + nodeText;\n\t      throw e;\n\t    }\n\t\n\t    if (marker._options && marker._options.breakCompile) {\n\t      return false;\n\t    }\n\t\n\t    return acc;\n\t  }, true);\n\t\n\t  if (compileChilds && node.children.length) {\n\t    Array.from(node.children).forEach(function (node) {\n\t      return compile(node, engine, prefix, markers);\n\t    });\n\t  }\n\t}\n\n/***/ },\n/* 2 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _State = __webpack_require__(3);\n\t\n\tObject.defineProperty(exports, 'State', {\n\t  enumerable: true,\n\t  get: function get() {\n\t    return _State.default;\n\t  }\n\t});\n\t\n\tvar _Observer = __webpack_require__(5);\n\t\n\tObject.defineProperty(exports, 'Observer', {\n\t  enumerable: true,\n\t  get: function get() {\n\t    return _Observer.default;\n\t  }\n\t});\n\t\n\tvar _PropertyObserver = __webpack_require__(6);\n\t\n\tObject.defineProperty(exports, 'PropertyObserver', {\n\t  enumerable: true,\n\t  get: function get() {\n\t    return _PropertyObserver.default;\n\t  }\n\t});\n\t\n\tvar _PropertyProxy = __webpack_require__(7);\n\t\n\tObject.defineProperty(exports, 'PropertyProxy', {\n\t  enumerable: true,\n\t  get: function get() {\n\t    return _PropertyProxy.default;\n\t  }\n\t});\n\n/***/ },\n/* 3 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _KeyMap = __webpack_require__(4);\n\t\n\tvar _KeyMap2 = _interopRequireDefault(_KeyMap);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _typeof(obj) { return obj && typeof Symbol !== \"undefined\" && obj.constructor === Symbol ? \"symbol\" : typeof obj; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar map = new WeakMap();\n\tvar timestamp = 0;\n\tvar request = false;\n\t\n\tvar State = (function () {\n\t  _createClass(State, null, [{\n\t    key: 'now',\n\t    value: function now() {\n\t      if (!request) {\n\t        timestamp = timestamp + 1;\n\t        request = window.requestAnimationFrame(function () {\n\t          return request = undefined;\n\t        });\n\t      }\n\t      return timestamp;\n\t    }\n\t  }, {\n\t    key: 'isObject',\n\t    value: function isObject(target) {\n\t      return (typeof target === 'undefined' ? 'undefined' : _typeof(target)) === 'object' && target !== null;\n\t    }\n\t  }, {\n\t    key: 'is',\n\t    value: function is(v1, v2) {\n\t      if (v1 === 0 && v2 === 0) {\n\t        return 1 / v1 === 1 / v2;\n\t      }\n\t      if (v1 !== v1) {\n\t        return v2 !== v2;\n\t      }\n\t      return v1 === v2;\n\t    }\n\t  }]);\n\t\n\t  function State(target) {\n\t    _classCallCheck(this, State);\n\t\n\t    if (!State.isObject(target)) {\n\t      throw new TypeError('Invalid arguments');\n\t    }\n\t    var state = map.get(target);\n\t    if (state) {\n\t      return state;\n\t    }\n\t    map.set(target, this);\n\t\n\t    var keyMap = new _KeyMap2.default();\n\t    this.cache = Object.keys(target).reduce(function (cache, key) {\n\t      var value = cache[key] = target[key];\n\t      if (State.isObject(value)) {\n\t        new State(value);\n\t      }\n\t      keyMap.set(value, key);\n\t      return cache;\n\t    }, {});\n\t\n\t    this.keyMap = keyMap;\n\t    this.target = target;\n\t    this.lastCheck = State.now();\n\t    this.lastChange = 0;\n\t  }\n\t\n\t  _createClass(State, [{\n\t    key: 'isChanged',\n\t    value: function isChanged() {\n\t      var _this = this;\n\t\n\t      var timestamp = State.now();\n\t\n\t      if (timestamp > this.lastCheck) {\n\t        (function () {\n\t          var changed = false;\n\t\n\t          _this.lastCheck = timestamp;\n\t          _this.changelog = {};\n\t\n\t          Object.keys(_this.cache).forEach(function (key) {\n\t            if (!_this.target.hasOwnProperty(key)) {\n\t              var value = _this.cache[key];\n\t              _this.changelog[key] = { type: 'delete', oldValue: value };\n\t              changed = true;\n\t            }\n\t          });\n\t\n\t          var keyMap = new _KeyMap2.default();\n\t          var cacheNewKeys = {};\n\t          _this.cache = Object.keys(_this.target).reduce(function (cache, key) {\n\t            var value = _this.target[key];\n\t\n\t            if (!_this.cache.hasOwnProperty(key)) {\n\t              _this.changelog[key] = { type: 'set' };\n\t              changed = true;\n\t            } else if (!State.is(value, _this.cache[key])) {\n\t              _this.changelog[key] = _this.changelog[key] || { type: 'set' };\n\t              _this.changelog[key].oldValue = _this.cache[key];\n\t              changed = true;\n\t            }\n\t\n\t            if (State.isObject(value)) {\n\t              var nestedState = new State(value);\n\t              if (nestedState.isChanged()) {\n\t                changed = true;\n\t                if (!_this.changelog[key]) {\n\t                  _this.changelog[key] = { type: 'modify' };\n\t                  _this.changelog[key].changelog = nestedState.changelog;\n\t                }\n\t              }\n\t            }\n\t\n\t            if (_this.changelog[key]) {\n\t              var oldKey = _this.keyMap.shift(value, key);\n\t              if (oldKey && oldKey !== key && _this.target[oldKey] !== value) {\n\t                _this.changelog[key].oldKey = oldKey;\n\t                if (_this.changelog[oldKey]) {\n\t                  _this.changelog[oldKey].newKey = key;\n\t                } else {\n\t                  cacheNewKeys[oldKey] = key;\n\t                }\n\t              }\n\t\n\t              if (cacheNewKeys[key]) {\n\t                _this.changelog[key].newKey = cacheNewKeys[key];\n\t              }\n\t            }\n\t\n\t            cache[key] = value;\n\t            keyMap.set(value, key);\n\t            return cache;\n\t          }, {});\n\t\n\t          _this.keyMap = keyMap;\n\t\n\t          if (changed) {\n\t            _this.lastChange = _this.lastCheck;\n\t          } else {\n\t            _this.changelog = undefined;\n\t          }\n\t        })();\n\t      }\n\t\n\t      return this.lastChange === timestamp;\n\t    }\n\t  }]);\n\t\n\t  return State;\n\t})();\n\t\n\texports.default = State;\n\n/***/ },\n/* 4 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\t\n\tvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar KeyMap = (function () {\n\t  function KeyMap() {\n\t    _classCallCheck(this, KeyMap);\n\t\n\t    this.map = new Map();\n\t  }\n\t\n\t  _createClass(KeyMap, [{\n\t    key: \"set\",\n\t    value: function set(key, value) {\n\t      var list = this.map.get(key);\n\t      if (!list) {\n\t        list = new Set();\n\t        this.map.set(key, list);\n\t      }\n\t\n\t      if (value) {\n\t        list.add(value);\n\t      }\n\t\n\t      return list;\n\t    }\n\t  }, {\n\t    key: \"shift\",\n\t    value: function shift(key, value) {\n\t      var set = this.map.get(key);\n\t      if (set && set.size) {\n\t        if (set.has(value)) {\n\t          set.delete(value);\n\t          return value;\n\t        } else {\n\t          var _iteratorNormalCompletion = true;\n\t          var _didIteratorError = false;\n\t          var _iteratorError = undefined;\n\t\n\t          try {\n\t            for (var _iterator = set[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n\t              var result = _step.value;\n\t\n\t              set.delete(result);\n\t              return result;\n\t            }\n\t          } catch (err) {\n\t            _didIteratorError = true;\n\t            _iteratorError = err;\n\t          } finally {\n\t            try {\n\t              if (!_iteratorNormalCompletion && _iterator.return) {\n\t                _iterator.return();\n\t              }\n\t            } finally {\n\t              if (_didIteratorError) {\n\t                throw _iteratorError;\n\t              }\n\t            }\n\t          }\n\t        }\n\t      }\n\t      return false;\n\t    }\n\t  }]);\n\t\n\t  return KeyMap;\n\t})();\n\t\n\texports.default = KeyMap;\n\n/***/ },\n/* 5 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _State = __webpack_require__(3);\n\t\n\tvar _State2 = _interopRequireDefault(_State);\n\t\n\tvar _PropertyObserver = __webpack_require__(6);\n\t\n\tvar _PropertyObserver2 = _interopRequireDefault(_PropertyObserver);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar Observer = (function () {\n\t  _createClass(Observer, null, [{\n\t    key: 'requestAnimationFrame',\n\t    value: function requestAnimationFrame(cb) {\n\t      var _this = this;\n\t\n\t      if (!this._request) {\n\t        this._callbacks = new Set().add(cb);\n\t        this._request = window.requestAnimationFrame(function () {\n\t          _this._callbacks.forEach(function (cb) {\n\t            return cb();\n\t          });\n\t          _this._request = _this._callbacks = undefined;\n\t        });\n\t      } else {\n\t        this._callbacks.add(cb);\n\t      }\n\t\n\t      return cb;\n\t    }\n\t  }, {\n\t    key: 'cancelAnimationFrame',\n\t    value: function cancelAnimationFrame(cb) {\n\t      if (this._callbacks) {\n\t        this._callbacks.delete(cb);\n\t      }\n\t    }\n\t  }]);\n\t\n\t  function Observer(host, keys, callback) {\n\t    var _this2 = this;\n\t\n\t    _classCallCheck(this, Observer);\n\t\n\t    if (!host || !keys || !callback) {\n\t      throw new TypeError('Invalid arguments');\n\t    }\n\t\n\t    this.callback = callback;\n\t    this.revert = [];\n\t\n\t    this.state = new _State2.default([].concat(keys).reduce(function (list, key) {\n\t      var observer = new _PropertyObserver2.default(host, key);\n\t      list[key] = host[key];\n\t\n\t      _this2.revert.push(observer.observe(function (value) {\n\t        if (!_State2.default.is(list[key], value)) {\n\t          list[key] = value;\n\t          _this2.check();\n\t        } else if (_State2.default.isObject(value)) {\n\t          _this2.check();\n\t        }\n\t      }));\n\t\n\t      return list;\n\t    }, {}));\n\t  }\n\t\n\t  _createClass(Observer, [{\n\t    key: 'check',\n\t    value: function check() {\n\t      var _this3 = this;\n\t\n\t      if (!this.checkFn) {\n\t        this.checkFn = Observer.requestAnimationFrame(function () {\n\t          if (_this3.state.isChanged()) {\n\t            _this3.callback(_this3.state.changelog);\n\t          }\n\t\n\t          _this3.checkFn = undefined;\n\t        });\n\t      }\n\t    }\n\t  }, {\n\t    key: 'destroy',\n\t    value: function destroy() {\n\t      if (this.checkFn) {\n\t        Observer.cancelAnimationFrame(this.checkFn);\n\t      }\n\t\n\t      this.revert.forEach(function (cb) {\n\t        return cb();\n\t      });\n\t    }\n\t  }]);\n\t\n\t  return Observer;\n\t})();\n\t\n\texports.default = Observer;\n\n/***/ },\n/* 6 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _PropertyProxy = __webpack_require__(7);\n\t\n\tvar _PropertyProxy2 = _interopRequireDefault(_PropertyProxy);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar register = new WeakMap();\n\t\n\tvar PropertyObserver = (function () {\n\t  _createClass(PropertyObserver, null, [{\n\t    key: 'singleton',\n\t    value: function singleton(host, key, target) {\n\t      var instance = register.get(host);\n\t      if (instance) {\n\t        if (instance[key]) {\n\t          return instance[key];\n\t        } else {\n\t          instance[key] = target;\n\t        }\n\t      } else {\n\t        register.set(host, _defineProperty({}, key, target));\n\t      }\n\t\n\t      return target;\n\t    }\n\t  }]);\n\t\n\t  function PropertyObserver(host, key) {\n\t    var _this = this;\n\t\n\t    _classCallCheck(this, PropertyObserver);\n\t\n\t    var singleton = PropertyObserver.singleton(host, key, this);\n\t    if (singleton !== this) {\n\t      return singleton;\n\t    }\n\t\n\t    this.proxy = new _PropertyProxy2.default(host, key, function (value) {\n\t      return _this.getters.forEach(function (cb) {\n\t        return cb(value);\n\t      });\n\t    }, function (newValue) {\n\t      return _this.setters.forEach(function (cb) {\n\t        return cb(newValue);\n\t      });\n\t    });\n\t\n\t    this.getters = new Set();\n\t    this.setters = new Set();\n\t  }\n\t\n\t  _createClass(PropertyObserver, [{\n\t    key: 'observe',\n\t    value: function observe(get, set) {\n\t      var _this2 = this;\n\t\n\t      if (!this.getters.size) {\n\t        this.proxy.on();\n\t      }\n\t\n\t      this.getters.add(get);\n\t      this.setters.add(set || get);\n\t\n\t      return function () {\n\t        _this2.unobserve(get, set);\n\t      };\n\t    }\n\t  }, {\n\t    key: 'unobserve',\n\t    value: function unobserve(get, set) {\n\t      this.getters.delete(get);\n\t      this.setters.delete(set || get);\n\t\n\t      if (!this.getters.size && !this.setters.size) {\n\t        this.proxy.off();\n\t      }\n\t    }\n\t  }]);\n\t\n\t  return PropertyObserver;\n\t})();\n\t\n\texports.default = PropertyObserver;\n\n/***/ },\n/* 7 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\t\n\tvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar PropertyProxy = (function () {\n\t  function PropertyProxy(host, key, get, set) {\n\t    var replace = arguments.length <= 4 || arguments[4] === undefined ? false : arguments[4];\n\t\n\t    _classCallCheck(this, PropertyProxy);\n\t\n\t    this.host = host;\n\t    this.key = key;\n\t    this.getter = get;\n\t    this.setter = set || get;\n\t    this.replace = replace;\n\t  }\n\t\n\t  _createClass(PropertyProxy, [{\n\t    key: \"getOwnDescriptor\",\n\t    value: function getOwnDescriptor() {\n\t      var desc = Object.getOwnPropertyDescriptor(this.host, this.key);\n\t\n\t      if (desc) {\n\t        if (!desc.configurable) {\n\t          throw new TypeError(\"Cannot create proxy for not configurable property '\" + this.key + \"'\");\n\t        }\n\t        if (!desc.get && !desc.set && !desc.writable) {\n\t          throw new TypeError(\"Cannot create proxy for readonly property '\" + this.key + \"'\");\n\t        }\n\t      }\n\t\n\t      return desc;\n\t    }\n\t  }, {\n\t    key: \"getProtoDescriptor\",\n\t    value: function getProtoDescriptor() {\n\t      var _this = this;\n\t\n\t      var desc = undefined,\n\t          host = Object.getPrototypeOf(this.host);\n\t\n\t      while (host) {\n\t        desc = Object.getOwnPropertyDescriptor(host, this.key);\n\t        if (desc) {\n\t          break;\n\t        } else {\n\t          host = Object.getPrototypeOf(host);\n\t        }\n\t      }\n\t\n\t      if (desc) {\n\t        if (!desc.get && !desc.set) {\n\t          desc.get = function () {\n\t            delete _this.host[_this.key];\n\t            var value = _this.host[_this.key];\n\t            _this.on();\n\t            return value;\n\t          };\n\t          desc.set = function (newVal) {\n\t            delete _this.host[_this.key];\n\t            _this.host[_this.key] = newVal;\n\t            _this.on();\n\t          };\n\t        }\n\t      }\n\t\n\t      return desc;\n\t    }\n\t  }, {\n\t    key: \"on\",\n\t    value: function on() {\n\t      var desc = this.getOwnDescriptor();\n\t\n\t      if (desc) {\n\t        this.ownProperty = true;\n\t      } else {\n\t        this.ownProperty = false;\n\t        desc = this.getProtoDescriptor();\n\t      }\n\t\n\t      if (!desc) {\n\t        this.ownProperty = true;\n\t        this.notDefined = true;\n\t        desc = {\n\t          enumerable: true,\n\t          writable: true,\n\t          configurable: true\n\t        };\n\t      }\n\t\n\t      this.desc = desc;\n\t      this.value = this.host[this.key];\n\t\n\t      Object.defineProperty(this.host, this.key, {\n\t        configurable: true,\n\t        enumerable: this.desc.enumerable,\n\t        get: this.get.bind(this),\n\t        set: this.set.bind(this)\n\t      });\n\t    }\n\t  }, {\n\t    key: \"off\",\n\t    value: function off() {\n\t      if (this.ownProperty) {\n\t        if (this.notDefined) {\n\t          delete this.host[this.key];\n\t        } else {\n\t          if (!this.desc.get && !this.desc.set) {\n\t            this.desc.value = this.value;\n\t          }\n\t          Object.defineProperty(this.host, this.key, this.desc);\n\t        }\n\t      } else {\n\t        delete this.host[this.key];\n\t      }\n\t    }\n\t  }, {\n\t    key: \"get\",\n\t    value: function get() {\n\t      if (this.desc.get) {\n\t        this.value = this.desc.get.call(this.host);\n\t      }\n\t      var temp = this.getter(this.value);\n\t      if (this.replace) {\n\t        this.value = temp;\n\t      }\n\t      return this.value;\n\t    }\n\t  }, {\n\t    key: \"set\",\n\t    value: function set(newValue) {\n\t      this.notDefined = false;\n\t\n\t      if (this.desc.set) {\n\t        this.desc.set.call(this.host, newValue);\n\t      }\n\t\n\t      if (this.desc.writable || this.desc.get || this.desc.set) {\n\t        this.value = newValue;\n\t      }\n\t\n\t      var temp = this.setter(this.value);\n\t      if (this.replace) {\n\t        this.value = temp;\n\t      }\n\t    }\n\t  }]);\n\t\n\t  return PropertyProxy;\n\t})();\n\t\n\texports.default = PropertyProxy;\n\n/***/ },\n/* 8 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.map = undefined;\n\texports.register = register;\n\t\n\tvar _Expression = __webpack_require__(9);\n\t\n\tvar _Expression2 = _interopRequireDefault(_Expression);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _typeof(obj) { return obj && typeof Symbol !== \"undefined\" && obj.constructor === Symbol ? \"symbol\" : typeof obj; }\n\t\n\tvar map = exports.map = new WeakMap();\n\t\n\tfunction register(constructor, name, customOptions) {\n\t  var constrOpts = Object.assign({}, constructor._options, customOptions);\n\t  var options = extractOptions(constrOpts, ['template', 'properties', 'methods', 'shadow', 'prototype']);\n\t  var prototype = Object.create(options.prototype || HTMLElement.prototype);\n\t  var template = options.template;\n\t  var properties = options.properties;\n\t\n\t  if (template && template !== true) {\n\t    options.template = resolveTemplate(template);\n\t  }\n\t\n\t  if (properties) {\n\t    var _iteratorNormalCompletion = true;\n\t    var _didIteratorError = false;\n\t    var _iteratorError = undefined;\n\t\n\t    try {\n\t      for (var _iterator = Object.keys(properties)[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n\t        var key = _step.value;\n\t\n\t        if (typeof properties[key] === 'string') {\n\t          properties[key] = {\n\t            link: options.properties[key],\n\t            attribute: camelToDash(key)\n\t          };\n\t        } else if (Object(properties[key]) === properties[key]) {\n\t          if (properties[key].attribute === undefined) {\n\t            properties[key].attribute = camelToDash(key);\n\t          }\n\t        } else {\n\t          throw new TypeError('Invalid \\'' + key + '\\' property description.');\n\t        }\n\t      }\n\t    } catch (err) {\n\t      _didIteratorError = true;\n\t      _iteratorError = err;\n\t    } finally {\n\t      try {\n\t        if (!_iteratorNormalCompletion && _iterator.return) {\n\t          _iterator.return();\n\t        }\n\t      } finally {\n\t        if (_didIteratorError) {\n\t          throw _iteratorError;\n\t        }\n\t      }\n\t    }\n\t  }\n\t\n\t  Object.defineProperty(prototype, 'createdCallback', {\n\t    value: function value() {\n\t      map.set(this, compile(constructor, this, options, constrOpts));\n\t    }\n\t  });\n\t\n\t  if (typeof constructor.prototype.attached === 'function') {\n\t    Object.defineProperty(prototype, 'attachedCallback', {\n\t      value: function value() {\n\t        map.get(this).then(function (engine) {\n\t          engine.attached();\n\t        });\n\t      }\n\t    });\n\t  }\n\t\n\t  if (typeof constructor.prototype.detached === 'function') {\n\t    Object.defineProperty(prototype, 'detachedCallback', {\n\t      value: function value() {\n\t        map.get(this).then(function (engine) {\n\t          engine.detached();\n\t        });\n\t      }\n\t    });\n\t  }\n\t\n\t  if (typeof constructor.prototype.attributeChanged === 'function') {\n\t    Object.defineProperty(prototype, 'attributeChangedCallback', {\n\t      value: function value(attrName, oldVal, newVal) {\n\t        map.get(this).then(function (engine) {\n\t          engine.attributeChanged(attrName, oldVal, newVal);\n\t        });\n\t      }\n\t    });\n\t  }\n\t\n\t  return document.registerElement(name, { prototype: prototype });\n\t}\n\t\n\tfunction compile(constructor, host, options, constrOpts) {\n\t  var template = options.template;\n\t  var properties = options.properties;\n\t  var methods = options.methods;\n\t\n\t  var shadow = options.shadow && resolveShadow(host);\n\t  var target = shadow || document.createDocumentFragment();\n\t\n\t  if (template) {\n\t    if (template === true) {\n\t      template = host.children[0];\n\t      if (!(template && template.localName === 'template')) {\n\t        throw new Error('Template element required.');\n\t      }\n\t      host.removeChild(template);\n\t\n\t      if (template.content) {\n\t        target.appendChild(template.content);\n\t      } else {\n\t        Array.from(template.childNodes).forEach(function (n) {\n\t          target.appendChild(n);\n\t        });\n\t      }\n\t    } else {\n\t      target.appendChild(document.importNode(template, true));\n\t    }\n\t  } else {\n\t    Array.from(host.childNodes).forEach(function (n) {\n\t      target.appendChild(n);\n\t    });\n\t  }\n\t\n\t  return Promise.resolve().then(function () {\n\t    var engine = new constructor(target, constrOpts);\n\t    Object.defineProperty(engine, 'host', { value: host });\n\t\n\t    if (!shadow) {\n\t      host.insertBefore(target, host.childNodes[0]);\n\t    } else {\n\t      Object.defineProperty(engine, 'shadow', { value: target });\n\t    }\n\t\n\t    if (properties) {\n\t      var _iteratorNormalCompletion2 = true;\n\t      var _didIteratorError2 = false;\n\t      var _iteratorError2 = undefined;\n\t\n\t      try {\n\t        var _loop = function _loop() {\n\t          var key = _step2.value;\n\t          var _properties$key = properties[key];\n\t          var link = _properties$key.link;\n\t          var attribute = _properties$key.attribute;\n\t          var reflect = _properties$key.reflect;\n\t\n\t          var expr = new _Expression2.default(engine, link);\n\t\n\t          Object.defineProperty(host, key, {\n\t            get: function get() {\n\t              return expr.get();\n\t            },\n\t            set: function set(val) {\n\t              return expr.set(val);\n\t            }\n\t          });\n\t\n\t          if (attribute) {\n\t            if (host.hasAttribute(attribute)) {\n\t              expr.set(host.getAttribute(attribute));\n\t            }\n\t            if (reflect) {\n\t              expr.observe(function (val) {\n\t                if (val === undefined) {\n\t                  host.removeAttribute(attribute);\n\t                } else {\n\t                  if (val === true) {\n\t                    host.setAttribute(attribute, '');\n\t                  } else {\n\t                    host.setAttribute(attribute, val);\n\t                  }\n\t                }\n\t              }, true);\n\t            }\n\t          }\n\t        };\n\t\n\t        for (var _iterator2 = Object.keys(properties)[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n\t          _loop();\n\t        }\n\t      } catch (err) {\n\t        _didIteratorError2 = true;\n\t        _iteratorError2 = err;\n\t      } finally {\n\t        try {\n\t          if (!_iteratorNormalCompletion2 && _iterator2.return) {\n\t            _iterator2.return();\n\t          }\n\t        } finally {\n\t          if (_didIteratorError2) {\n\t            throw _iteratorError2;\n\t          }\n\t        }\n\t      }\n\t    }\n\t\n\t    if (methods) {\n\t      [].concat(methods).forEach(function (method) {\n\t        Object.defineProperty(host, method, {\n\t          writable: true,\n\t          value: function value() {\n\t            return engine[method].apply(engine, arguments);\n\t          }\n\t        });\n\t      });\n\t    }\n\t\n\t    return engine;\n\t  });\n\t}\n\t\n\tfunction extractOptions(options) {\n\t  var list = arguments.length <= 1 || arguments[1] === undefined ? [] : arguments[1];\n\t\n\t  var temp = {};\n\t  var _iteratorNormalCompletion3 = true;\n\t  var _didIteratorError3 = false;\n\t  var _iteratorError3 = undefined;\n\t\n\t  try {\n\t    for (var _iterator3 = list[Symbol.iterator](), _step3; !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {\n\t      var key = _step3.value;\n\t\n\t      temp[key] = options[key];\n\t      delete options[key];\n\t    }\n\t  } catch (err) {\n\t    _didIteratorError3 = true;\n\t    _iteratorError3 = err;\n\t  } finally {\n\t    try {\n\t      if (!_iteratorNormalCompletion3 && _iterator3.return) {\n\t        _iterator3.return();\n\t      }\n\t    } finally {\n\t      if (_didIteratorError3) {\n\t        throw _iteratorError3;\n\t      }\n\t    }\n\t  }\n\t\n\t  return temp;\n\t}\n\t\n\tfunction resolveShadow(host) {\n\t  if (typeof host.attachShadow === 'function') {\n\t    return host.attachShadow({ mode: \"closed\" });\n\t  } else if (typeof host.createShadowRoot === 'function') {\n\t    return host.createShadowRoot();\n\t  }\n\t}\n\t\n\tfunction resolveTemplate(content) {\n\t  if (typeof content === 'string') {\n\t    var template = document.createElement('template');\n\t    template.innerHTML = content;\n\t\n\t    if (!template.content) {\n\t      var _ret2 = (function () {\n\t        var fragment = document.createDocumentFragment();\n\t        Array.from(template.childNodes).forEach(function (n) {\n\t          fragment.appendChild(n);\n\t        });\n\t        return {\n\t          v: fragment\n\t        };\n\t      })();\n\t\n\t      if ((typeof _ret2 === 'undefined' ? 'undefined' : _typeof(_ret2)) === \"object\") return _ret2.v;\n\t    } else {\n\t      return template.content;\n\t    }\n\t  } else {\n\t    return content.content || content;\n\t  }\n\t}\n\t\n\tfunction camelToDash(str) {\n\t  return str.replace(/([a-z])([A-Z])/g, '$1-$2').toLowerCase();\n\t}\n\n/***/ },\n/* 9 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _slicedToArray = (function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; })();\n\t\n\tvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _papillon = __webpack_require__(2);\n\t\n\tvar _Engine = __webpack_require__(1);\n\t\n\tvar _Engine2 = _interopRequireDefault(_Engine);\n\t\n\tvar _Path = __webpack_require__(10);\n\t\n\tvar _Path2 = _interopRequireDefault(_Path);\n\t\n\tvar _Flags = __webpack_require__(11);\n\t\n\tvar _Flags2 = _interopRequireDefault(_Flags);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar Expression = (function () {\n\t  _createClass(Expression, null, [{\n\t    key: 'parse',\n\t    value: function parse(evaluate) {\n\t      var _evaluate$split = evaluate.split('|');\n\t\n\t      var _evaluate$split2 = _slicedToArray(_evaluate$split, 2);\n\t\n\t      var temp = _evaluate$split2[0];\n\t      var filter = _evaluate$split2[1];\n\t\n\t      var flags = new Set();\n\t\n\t      for (var index = 0; index < temp.length; index++) {\n\t        if (_Flags2.default[temp[index]]) {\n\t          flags.add(temp[index]);\n\t        } else {\n\t          break;\n\t        }\n\t      }\n\t\n\t      var expr = temp.substr(index);\n\t      return [flags, expr, filter];\n\t    }\n\t  }]);\n\t\n\t  function Expression(engine, evaluate) {\n\t    var _this = this;\n\t\n\t    _classCallCheck(this, Expression);\n\t\n\t    if (!evaluate || typeof evaluate !== 'string') {\n\t      throw new TypeError('\\'' + evaluate + '\\': Invalid input type.');\n\t    }\n\t\n\t    var _Expression$parse = Expression.parse(evaluate.trim());\n\t\n\t    var _Expression$parse2 = _slicedToArray(_Expression$parse, 3);\n\t\n\t    var flags = _Expression$parse2[0];\n\t    var expr = _Expression$parse2[1];\n\t    var filter = _Expression$parse2[2];\n\t\n\t    this.engine = engine;\n\t    this.filter = { get: function get(v) {\n\t        return v;\n\t      }, set: function set(v) {\n\t        return v;\n\t      } };\n\t\n\t    if (this.engine.state) {\n\t      this.context = function () {\n\t        return _this.engine.state;\n\t      };\n\t    } else {\n\t      this.context = function () {\n\t        if (_this.engine.state === undefined) {\n\t          _this.engine.state = {};\n\t        }\n\t        return _this.engine.state;\n\t      };\n\t    }\n\t\n\t    if (filter) {\n\t      var filters = _Engine2.default.config(engine).filters;\n\t      if (!filters[filter]) {\n\t        throw new ReferenceError('Filter \\'' + filter + '\\' not found.');\n\t      }\n\t      Object.assign(this.filter, filters[filter]);\n\t    }\n\t\n\t    flags.forEach(function (f) {\n\t      return _Flags2.default[f](_this, engine);\n\t    });\n\t    this.path = new _Path2.default(expr, this.context);\n\t  }\n\t\n\t  _createClass(Expression, [{\n\t    key: 'get',\n\t    value: function get() {\n\t      return this.filter.get(this.path.get());\n\t    }\n\t  }, {\n\t    key: 'set',\n\t    value: function set(value, onlyDefaults) {\n\t      return this.path.set(this.filter.set(value), onlyDefaults);\n\t    }\n\t  }, {\n\t    key: 'call',\n\t    value: function call() {\n\t      var _path;\n\t\n\t      return (_path = this.path).call.apply(_path, arguments);\n\t    }\n\t  }, {\n\t    key: 'observe',\n\t    value: function observe(cb) {\n\t      var _this2 = this;\n\t\n\t      var init = arguments.length <= 1 || arguments[1] === undefined ? false : arguments[1];\n\t      var deep = arguments.length <= 2 || arguments[2] === undefined ? this.deep : arguments[2];\n\t\n\t      var target = undefined;\n\t      var cache = this.get();\n\t\n\t      if (deep) {\n\t        target = new _papillon.State(Object.defineProperty({}, 'value', {\n\t          get: this.get.bind(this),\n\t          configurable: true,\n\t          enumerable: true\n\t        }));\n\t      }\n\t\n\t      _Engine2.default.watch(this.engine, function () {\n\t        var newVal = _this2.get();\n\t\n\t        if (target && target.isChanged()) {\n\t          cb(newVal, target.changelog.value);\n\t        } else if (!_papillon.State.is(newVal, cache)) {\n\t          cb(newVal);\n\t        }\n\t\n\t        cache = newVal;\n\t      });\n\t\n\t      if (init) {\n\t        cb(cache);\n\t      }\n\t    }\n\t  }]);\n\t\n\t  return Expression;\n\t})();\n\t\n\texports.default = Expression;\n\n/***/ },\n/* 10 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar Path = (function () {\n\t  function Path(evaluate, context) {\n\t    _classCallCheck(this, Path);\n\t\n\t    if (!evaluate) {\n\t      throw new TypeError('Path cannot be empty.');\n\t    }\n\t\n\t    this.evaluate = evaluate;\n\t    this.context = context;\n\t    this.path = this.parse(evaluate);\n\t  }\n\t\n\t  _createClass(Path, [{\n\t    key: 'parse',\n\t    value: function parse(path) {\n\t      var result = [];\n\t\n\t      var property = path.split('').reduce(function (acc, char) {\n\t        switch (char) {\n\t          case \".\":\n\t            result.push({ property: acc, proto: Object });\n\t            return \"\";\n\t          case \"[\":\n\t            result.push({ property: acc, proto: Array });\n\t            return \"\";\n\t          case \"]\":\n\t            return acc;\n\t        }\n\t\n\t        return acc + char;\n\t      }, \"\");\n\t\n\t      result.push({ property: property });\n\t\n\t      return result;\n\t    }\n\t  }, {\n\t    key: 'getContext',\n\t    value: function getContext() {\n\t      var context = this.context();\n\t      if (Object(context) !== context) {\n\t        throw new TypeError('Object required as path context.');\n\t      }\n\t      return context;\n\t    }\n\t  }, {\n\t    key: 'get',\n\t    value: function get() {\n\t      var _this = this;\n\t\n\t      var result = this.getContext();\n\t\n\t      if (result) {\n\t        this.path.every(function (_ref) {\n\t          var property = _ref.property;\n\t          var proto = _ref.proto;\n\t\n\t          result = result[property];\n\t\n\t          if (result && proto && !(result instanceof Object)) {\n\t            throw new TypeError('\\'' + property + '\\' in \\'' + _this.evaluate + '\\': Object instance required.');\n\t          }\n\t\n\t          return result;\n\t        });\n\t      }\n\t\n\t      return result;\n\t    }\n\t  }, {\n\t    key: 'set',\n\t    value: function set(newVal) {\n\t      var _this2 = this;\n\t\n\t      var check = arguments.length <= 1 || arguments[1] === undefined ? false : arguments[1];\n\t\n\t      var _path$reduce = this.path.reduce(function (acc, _ref2) {\n\t        var property = _ref2.property;\n\t        var proto = _ref2.proto;\n\t\n\t        if (proto) {\n\t          if (!acc.context[property]) {\n\t            acc.context[property] = proto();\n\t          } else if (!(acc.context[property] instanceof Object)) {\n\t            throw new TypeError('\\'' + property + '\\' in \\'' + _this2.evaluate + '\\': Object instance required.');\n\t          }\n\t\n\t          acc.context = acc.context[property];\n\t        } else {\n\t          acc.property = property;\n\t        }\n\t\n\t        return acc;\n\t      }, { context: this.getContext() });\n\t\n\t      var context = _path$reduce.context;\n\t      var property = _path$reduce.property;\n\t\n\t      if (!check || context[property] === undefined) {\n\t        context[property] = newVal;\n\t      }\n\t\n\t      return context[property];\n\t    }\n\t  }, {\n\t    key: 'call',\n\t    value: function call() {\n\t      var _this3 = this;\n\t\n\t      var _path$reduce2 = this.path.reduce(function (acc, _ref3) {\n\t        var property = _ref3.property;\n\t        var proto = _ref3.proto;\n\t\n\t        if (proto) {\n\t          acc.context = acc.context[property];\n\t          if (!(acc.context instanceof Object)) {\n\t            throw new TypeError('\\'' + property + '\\' in \\'' + _this3.evaluate + '\\': Object instance required.');\n\t          }\n\t        } else {\n\t          acc.property = property;\n\t        }\n\t\n\t        return acc;\n\t      }, { context: this.getContext() });\n\t\n\t      var context = _path$reduce2.context;\n\t      var property = _path$reduce2.property;\n\t\n\t      if (typeof context[property] !== 'function') {\n\t        throw new TypeError('\\'' + this.evaluate + '\\': Function required.');\n\t      }\n\t\n\t      return context[property].apply(context, arguments);\n\t    }\n\t  }, {\n\t    key: 'delete',\n\t    value: function _delete() {\n\t      var context = this.getContext();\n\t      var result = { context: context, property: this.path[0].property };\n\t\n\t      this.path.some(function (_ref4) {\n\t        var property = _ref4.property;\n\t\n\t        if (!context.hasOwnProperty(property)) {\n\t          return true;\n\t        }\n\t\n\t        if (Object.keys(context).length > 1) {\n\t          result = { context: context, property: property };\n\t        }\n\t\n\t        context = context[property];\n\t      });\n\t\n\t      delete result.context[result.property];\n\t    }\n\t  }]);\n\t\n\t  return Path;\n\t})();\n\t\n\texports.default = Path;\n\n/***/ },\n/* 11 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\tvar Flags = {\n\t  '!': function _(expr) {\n\t    var filter = expr.filter;\n\t    expr.filter = {\n\t      get: function get(v) {\n\t        return filter.get(!v);\n\t      }, set: function set(v) {\n\t        return filter.set(!v);\n\t      }\n\t    };\n\t  },\n\t  '@': function _(expr, engine) {\n\t    expr.context = function () {\n\t      return engine;\n\t    };\n\t  },\n\t  '&': function _(expr) {\n\t    expr.set = function () {};\n\t  },\n\t  '*': function _(expr) {\n\t    expr.deep = true;\n\t  }\n\t};\n\t\n\texports.default = Flags;\n\n/***/ },\n/* 12 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.default = Link;\n\t\n\tvar _Expression = __webpack_require__(9);\n\t\n\tvar _Expression2 = _interopRequireDefault(_Expression);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar Wrapper = (function () {\n\t  function Wrapper(node) {\n\t    _classCallCheck(this, Wrapper);\n\t\n\t    this.node = node;\n\t  }\n\t\n\t  _createClass(Wrapper, [{\n\t    key: 'get',\n\t    value: function get() {\n\t      return this.node.value;\n\t    }\n\t  }, {\n\t    key: 'set',\n\t    value: function set(value) {\n\t      this.value = value;\n\t\n\t      if (this.node.value !== value) {\n\t        this.node.value = value;\n\t      }\n\t    }\n\t  }, {\n\t    key: 'observe',\n\t    value: function observe(cb) {\n\t      this.node.addEventListener('input', cb);\n\t    }\n\t  }]);\n\t\n\t  return Wrapper;\n\t})();\n\t\n\tvar CheckWrapper = (function (_Wrapper) {\n\t  _inherits(CheckWrapper, _Wrapper);\n\t\n\t  function CheckWrapper() {\n\t    _classCallCheck(this, CheckWrapper);\n\t\n\t    return _possibleConstructorReturn(this, Object.getPrototypeOf(CheckWrapper).apply(this, arguments));\n\t  }\n\t\n\t  _createClass(CheckWrapper, [{\n\t    key: 'get',\n\t    value: function get() {\n\t      return this.node.checked ? this.node.value : undefined;\n\t    }\n\t  }, {\n\t    key: 'set',\n\t    value: function set(value) {\n\t      if (this.node.value === value) {\n\t        this.node.checked = true;\n\t      } else {\n\t        this.node.checked = false;\n\t      }\n\t    }\n\t  }, {\n\t    key: 'observe',\n\t    value: function observe(cb) {\n\t      this.node.addEventListener('change', cb);\n\t    }\n\t  }]);\n\t\n\t  return CheckWrapper;\n\t})(Wrapper);\n\t\n\tvar SelectWrapper = (function (_Wrapper2) {\n\t  _inherits(SelectWrapper, _Wrapper2);\n\t\n\t  function SelectWrapper(node) {\n\t    _classCallCheck(this, SelectWrapper);\n\t\n\t    var _this2 = _possibleConstructorReturn(this, Object.getPrototypeOf(SelectWrapper).call(this, node));\n\t\n\t    if ('MutationObserver' in window) {\n\t      new MutationObserver(function () {\n\t        _this2.set(_this2.value);\n\t      }).observe(node, {\n\t        attributes: true,\n\t        childList: true,\n\t        characterData: true,\n\t        subtree: true\n\t      });\n\t    }\n\t    return _this2;\n\t  }\n\t\n\t  _createClass(SelectWrapper, [{\n\t    key: 'set',\n\t    value: function set(value) {\n\t      this.value = value;\n\t\n\t      Array.from(this.node.options).some(function (o) {\n\t        if (o.value === value) {\n\t          o.selected = true;\n\t          return true;\n\t        }\n\t      });\n\t    }\n\t  }, {\n\t    key: 'observe',\n\t    value: function observe(cb) {\n\t      this.node.addEventListener('change', cb);\n\t    }\n\t  }]);\n\t\n\t  return SelectWrapper;\n\t})(Wrapper);\n\t\n\tvar MultiSelectWrapper = (function (_SelectWrapper) {\n\t  _inherits(MultiSelectWrapper, _SelectWrapper);\n\t\n\t  function MultiSelectWrapper() {\n\t    _classCallCheck(this, MultiSelectWrapper);\n\t\n\t    return _possibleConstructorReturn(this, Object.getPrototypeOf(MultiSelectWrapper).apply(this, arguments));\n\t  }\n\t\n\t  _createClass(MultiSelectWrapper, [{\n\t    key: 'get',\n\t    value: function get() {\n\t      var values = this.value || [];\n\t      var newValues = Array.from(this.node.options).filter(function (o) {\n\t        return o.selected;\n\t      }).map(function (o) {\n\t        return o.value;\n\t      });\n\t\n\t      Object.assign(values, newValues);\n\t      values.length = newValues.length;\n\t\n\t      return values;\n\t    }\n\t  }, {\n\t    key: 'set',\n\t    value: function set(values) {\n\t      this.value = values;\n\t\n\t      if (!Array.isArray(values)) {\n\t        throw new Error('Invalid values. Array instance required.');\n\t      }\n\t\n\t      Array.from(this.node.options).forEach(function (o) {\n\t        o.selected = values.some(function (v) {\n\t          return v === o.value;\n\t        });\n\t      });\n\t    }\n\t  }]);\n\t\n\t  return MultiSelectWrapper;\n\t})(SelectWrapper);\n\t\n\tfunction Link(engine, node, evaluate) {\n\t  var wrapper = undefined;\n\t\n\t  switch (node.type) {\n\t    case \"checkbox\":\n\t    case \"radio\":\n\t      wrapper = new CheckWrapper(node);\n\t      break;\n\t\n\t    case \"select-one\":\n\t      wrapper = new SelectWrapper(node);\n\t      break;\n\t\n\t    case \"select-multiple\":\n\t      wrapper = new MultiSelectWrapper(node);\n\t      break;\n\t\n\t    default:\n\t      wrapper = new Wrapper(node);\n\t  }\n\t\n\t  var expr = new _Expression2.default(engine, evaluate);\n\t\n\t  expr.set(wrapper.get(), true);\n\t  expr.observe(wrapper.set.bind(wrapper), true, false);\n\t  wrapper.observe(function () {\n\t    return expr.set(wrapper.get());\n\t  });\n\t}\n\n/***/ },\n/* 13 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.default = ClassList;\n\t\n\tvar _Expression = __webpack_require__(9);\n\t\n\tvar _Expression2 = _interopRequireDefault(_Expression);\n\t\n\tvar _List = __webpack_require__(14);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction ClassList(engine, node, evaluate) {\n\t  (0, _List.list)(evaluate, function (name, value) {\n\t    var expr = new _Expression2.default(engine, value);\n\t\n\t    expr.set(node.classList.contains(name), true);\n\t    expr.observe(function (val) {\n\t      if (val) {\n\t        node.classList.add(name);\n\t      } else {\n\t        node.classList.remove(name);\n\t      }\n\t    }, true, false);\n\t  });\n\t}\n\n/***/ },\n/* 14 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tvar _slicedToArray = (function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; })();\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.list = list;\n\tfunction list(evaluate, cb) {\n\t  evaluate.split(';').forEach(function (v) {\n\t    var _v$split = v.split(':');\n\t\n\t    var _v$split2 = _slicedToArray(_v$split, 2);\n\t\n\t    var name = _v$split2[0];\n\t    var value = _v$split2[1];\n\t\n\t    if (!name || !value) {\n\t      throw new SyntaxError('\\'' + v + '\\': Invalid list element.');\n\t    }\n\t\n\t    cb(name.trim(), value.trim());\n\t  });\n\t}\n\n/***/ },\n/* 15 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.default = Context;\n\t\n\tvar _Template = __webpack_require__(16);\n\t\n\tvar _Template2 = _interopRequireDefault(_Template);\n\t\n\tvar _Expression = __webpack_require__(9);\n\t\n\tvar _Expression2 = _interopRequireDefault(_Expression);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _typeof(obj) { return obj && typeof Symbol !== \"undefined\" && obj.constructor === Symbol ? \"symbol\" : typeof obj; }\n\t\n\tfunction Context(engine, node, evaluate) {\n\t  if (!node.children[0]) {\n\t    throw new Error('No children elements.');\n\t  }\n\t\n\t  var template = new _Template2.default(Array.from(node.childNodes).filter(function (n) {\n\t    return n.nodeType === Node.ELEMENT_NODE;\n\t  }), engine);\n\t\n\t  var expr = new _Expression2.default(engine, evaluate);\n\t\n\t  expr.set({}, true);\n\t  expr.observe(function (state) {\n\t    if (!state) {\n\t      template.remove();\n\t    } else {\n\t      if ((typeof state === 'undefined' ? 'undefined' : _typeof(state)) !== 'object') {\n\t        throw new TypeError('Invalid context target.');\n\t      }\n\t      template.setState(state).append();\n\t    }\n\t  }, true, true);\n\t}\n\t\n\tContext._options = {\n\t  breakCompile: true\n\t};\n\n/***/ },\n/* 16 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _Engine = __webpack_require__(1);\n\t\n\tvar _Engine2 = _interopRequireDefault(_Engine);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar Template = (function () {\n\t  function Template(nodes, engine, host) {\n\t    _classCallCheck(this, Template);\n\t\n\t    this.nodes = [].concat(nodes);\n\t    this.host = host || this.nodes[0].parentElement;\n\t    this.parentEngine = engine;\n\t\n\t    if (!this.host) {\n\t      throw new Error('Invalid host for template.');\n\t    }\n\t\n\t    if (!this.nodes[0].parentElement) {\n\t      this.hidden = true;\n\t    }\n\t  }\n\t\n\t  _createClass(Template, [{\n\t    key: 'getState',\n\t    value: function getState() {\n\t      if (!this.engine) {\n\t        throw new Error('Template does not fully initalized.');\n\t      }\n\t\n\t      return this.engine.state;\n\t    }\n\t  }, {\n\t    key: 'setState',\n\t    value: function setState(state) {\n\t      if (!this.engine) {\n\t        this.engine = _Engine2.default.spawn(this.parentEngine, this.nodes, state);\n\t      } else {\n\t        this.engine.state = state;\n\t      }\n\t\n\t      return this;\n\t    }\n\t  }, {\n\t    key: 'append',\n\t    value: function append() {\n\t      var _this = this;\n\t\n\t      var forceAppend = arguments.length <= 0 || arguments[0] === undefined ? false : arguments[0];\n\t      var insertBefore = arguments.length <= 1 || arguments[1] === undefined ? null : arguments[1];\n\t\n\t      if (this.hidden || forceAppend) {\n\t        this.nodes.forEach(function (node) {\n\t          _this.host.insertBefore(node, insertBefore);\n\t        });\n\t        this.hidden = false;\n\t      }\n\t\n\t      return this;\n\t    }\n\t  }, {\n\t    key: 'remove',\n\t    value: function remove() {\n\t      var _this2 = this;\n\t\n\t      if (!this.hidden) {\n\t        (function () {\n\t          var fragment = document.createDocumentFragment();\n\t          _this2.nodes.forEach(function (node) {\n\t            return fragment.appendChild(node);\n\t          });\n\t          _this2.hidden = true;\n\t        })();\n\t      }\n\t\n\t      return this;\n\t    }\n\t  }, {\n\t    key: 'clone',\n\t    value: function clone() {\n\t      return new this.constructor(this.nodes.map(function (node) {\n\t        return node.cloneNode(true);\n\t      }), this.parentEngine, this.host);\n\t    }\n\t  }]);\n\t\n\t  return Template;\n\t})();\n\t\n\texports.default = Template;\n\n/***/ },\n/* 17 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.default = EventListener;\n\t\n\tvar _Expression = __webpack_require__(9);\n\t\n\tvar _Expression2 = _interopRequireDefault(_Expression);\n\t\n\tvar _List = __webpack_require__(14);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction EventListener(engine, node, evaluate) {\n\t  (0, _List.list)(evaluate, function (name, value) {\n\t    var expr = new _Expression2.default(engine, value);\n\t    node.addEventListener(name, function (e) {\n\t      return expr.call(e);\n\t    });\n\t  });\n\t}\n\n/***/ },\n/* 18 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.default = Foreach;\n\t\n\tvar _IndexedTemplate = __webpack_require__(19);\n\t\n\tvar _IndexedTemplate2 = _interopRequireDefault(_IndexedTemplate);\n\t\n\tvar _Expression = __webpack_require__(9);\n\t\n\tvar _Expression2 = _interopRequireDefault(_Expression);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar Controller = (function () {\n\t  function Controller(engine, node, evaluate) {\n\t    _classCallCheck(this, Controller);\n\t\n\t    if (!node.children[0]) {\n\t      throw new Error('No children elements.');\n\t    }\n\t\n\t    this.engine = engine;\n\t    this.node = node;\n\t\n\t    var expr = new _Expression2.default(engine, evaluate);\n\t    var list = expr.get();\n\t    var createFromView = false;\n\t\n\t    if (list === undefined) {\n\t      list = expr.set([], true);\n\t      createFromView = true;\n\t    }\n\t\n\t    if (!Array.isArray(list)) {\n\t      throw new TypeError('Invalid foreach target.');\n\t    }\n\t\n\t    if (createFromView) {\n\t      this.items = this.createFromView(list);\n\t      this.template = this.items[this.items.length - 1].clone();\n\t    } else {\n\t      this.items = this.createFromList(list);\n\t\n\t      if (this.items.length) {\n\t        this.template = this.items[this.items.length - 1].clone();\n\t      } else {\n\t        this.template = new _IndexedTemplate2.default(node.children[0], this.engine);\n\t      }\n\t\n\t      this.clear(list);\n\t    }\n\t\n\t    expr.observe(this.render.bind(this), false, true);\n\t  }\n\t\n\t  _createClass(Controller, [{\n\t    key: 'createFromView',\n\t    value: function createFromView(list) {\n\t      var _this = this;\n\t\n\t      var length = this.node.children.length;\n\t\n\t      return Array.from(this.node.children).map(function (child, index) {\n\t        var temp = new _IndexedTemplate2.default(child, _this.engine);\n\t\n\t        list[index] = temp.setState(list[index], { index: index, length: length }).getState();\n\t\n\t        return temp;\n\t      });\n\t    }\n\t  }, {\n\t    key: 'createFromList',\n\t    value: function createFromList(list) {\n\t      var _this2 = this;\n\t\n\t      var length = list.length;\n\t      var temp = undefined;\n\t\n\t      return list.map(function (item, index) {\n\t        if (_this2.node.children[index]) {\n\t          temp = new _IndexedTemplate2.default(_this2.node.children[index], _this2.engine).setState(list[index], { index: index, length: length });\n\t        } else {\n\t          temp = temp.clone().setState(list[index], { index: index, length: length }).append(true);\n\t        }\n\t\n\t        list[index] = temp.getState();\n\t\n\t        return temp;\n\t      });\n\t    }\n\t  }, {\n\t    key: 'clear',\n\t    value: function clear(list) {\n\t      var index = list.length;\n\t      var max = this.node.children.length;\n\t      for (var i = index; i < max; i++) {\n\t        this.node.removeChild(this.node.children[index]);\n\t      }\n\t    }\n\t  }, {\n\t    key: 'render',\n\t    value: function render(list) {\n\t      var _this3 = this;\n\t\n\t      var _ref = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];\n\t\n\t      var type = _ref.type;\n\t      var changelog = _ref.changelog;\n\t\n\t      if (!Array.isArray(list)) {\n\t        throw new TypeError('Invalid foreach target.');\n\t      }\n\t\n\t      var length = list.length;\n\t\n\t      switch (type) {\n\t        case 'modify':\n\t          Object.assign(this.items, Object.keys(changelog).reduce(function (items, key) {\n\t            var _changelog$key = changelog[key];\n\t            var type = _changelog$key.type;\n\t            var oldKey = _changelog$key.oldKey;\n\t            var newKey = _changelog$key.newKey;\n\t\n\t            if (type === 'delete') {\n\t              if (_this3.items[key]) {\n\t                _this3.items[key].remove();\n\t              }\n\t            } else {\n\t              var index = parseInt(key, 10);\n\t              var temp = _this3.items[oldKey || key];\n\t              var append = false;\n\t\n\t              if (oldKey) {\n\t                if (_this3.items[key]) {\n\t                  _this3.items[key].remove();\n\t                }\n\t                _this3.items[oldKey] = null;\n\t              }\n\t\n\t              if (!temp || newKey && !oldKey) {\n\t                temp = _this3.template.clone();\n\t                append = true;\n\t              }\n\t\n\t              temp.setState(list[key], { index: index, length: length });\n\t\n\t              if (append || oldKey) {\n\t                temp.append(true, _this3.node.children[index]);\n\t              }\n\t\n\t              items[key] = temp;\n\t            }\n\t\n\t            return items;\n\t          }, {}));\n\t\n\t          this.items.length = list.length;\n\t\n\t          break;\n\t\n\t        case 'set':\n\t          var itemsLength = this.items.length;\n\t          var items = list.map(function (item, index) {\n\t            var temp = undefined;\n\t\n\t            if (index < itemsLength) {\n\t              temp = _this3.items[index];\n\t            } else {\n\t              temp = _this3.template.clone().append(true);\n\t            }\n\t\n\t            temp.setState(item, { index: index, length: length });\n\t\n\t            return temp;\n\t          });\n\t\n\t          for (var i = length; i < itemsLength; i++) {\n\t            this.items[i].remove();\n\t          }\n\t\n\t          this.items = items;\n\t      }\n\t    }\n\t  }]);\n\t\n\t  return Controller;\n\t})();\n\t\n\tfunction Foreach(engine, node, evaluate) {\n\t  return new Controller(engine, node, evaluate);\n\t}\n\t\n\tForeach._options = {\n\t  breakCompile: true\n\t};\n\n/***/ },\n/* 19 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\t\n\tvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _Template2 = __webpack_require__(16);\n\t\n\tvar _Template3 = _interopRequireDefault(_Template2);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar map = new WeakMap();\n\t\n\tfunction extendEngine(engine) {\n\t  if (map.has(engine)) {\n\t    return map.get(engine);\n\t  } else {\n\t    var extended = Object.defineProperties(Object.create(engine), {\n\t      number: { get: function get() {\n\t          return this.index + 1;\n\t        } },\n\t      odd: { get: function get() {\n\t          return this.number % 2 !== 0;\n\t        } },\n\t      even: { get: function get() {\n\t          return this.number % 2 === 0;\n\t        } },\n\t      first: { get: function get() {\n\t          return this.index === 0;\n\t        } },\n\t      last: { get: function get() {\n\t          return this.length === this.number;\n\t        } }\n\t    });\n\t\n\t    map.set(engine, extended);\n\t\n\t    return extended;\n\t  }\n\t}\n\t\n\tvar IndexedTemplate = (function (_Template) {\n\t  _inherits(IndexedTemplate, _Template);\n\t\n\t  function IndexedTemplate(nodes, engine, host) {\n\t    _classCallCheck(this, IndexedTemplate);\n\t\n\t    return _possibleConstructorReturn(this, Object.getPrototypeOf(IndexedTemplate).call(this, nodes, extendEngine(engine), host));\n\t  }\n\t\n\t  _createClass(IndexedTemplate, [{\n\t    key: 'setState',\n\t    value: function setState(state, _ref) {\n\t      var index = _ref.index;\n\t      var length = _ref.length;\n\t\n\t      _get(Object.getPrototypeOf(IndexedTemplate.prototype), 'setState', this).call(this, state);\n\t      Object.assign(this.engine, { index: index, length: length });\n\t\n\t      return this;\n\t    }\n\t  }]);\n\t\n\t  return IndexedTemplate;\n\t})(_Template3.default);\n\t\n\texports.default = IndexedTemplate;\n\n/***/ },\n/* 20 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.default = Property;\n\t\n\tvar _Expression = __webpack_require__(9);\n\t\n\tvar _Expression2 = _interopRequireDefault(_Expression);\n\t\n\tvar _List = __webpack_require__(14);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction Property(engine, node, evaluate) {\n\t  (0, _List.list)(evaluate, function (name, value) {\n\t    var accessor = resolveProperty(node, name);\n\t    var expr = new _Expression2.default(engine, value);\n\t\n\t    expr.set(accessor.get(), true);\n\t    expr.observe(accessor.set, true);\n\t  });\n\t}\n\t\n\tfunction resolveProperty(node, name) {\n\t  if (name in node) {\n\t    return {\n\t      get: function get() {\n\t        return node[name];\n\t      },\n\t      set: function set(value) {\n\t        return node[name] = value;\n\t      }\n\t    };\n\t  } else {\n\t    return {\n\t      get: function get() {\n\t        var val = node.getAttribute(name);\n\t        return val ? val : undefined;\n\t      },\n\t      set: function set(value) {\n\t        if (value === false || value === undefined || value === null) {\n\t          node.removeAttribute(name);\n\t        } else {\n\t          node.setAttribute(name, value === true ? name : value);\n\t        }\n\t      }\n\t    };\n\t  }\n\t}\n\n/***/ },\n/* 21 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.default = Reference;\n\t\n\tvar _Expression = __webpack_require__(9);\n\t\n\tvar _Expression2 = _interopRequireDefault(_Expression);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction Reference(engine, node, evaluate) {\n\t  var expr = new _Expression2.default(engine, evaluate);\n\t  expr.set(node, true);\n\t}\n\n/***/ },\n/* 22 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.default = Text;\n\t\n\tvar _Property = __webpack_require__(20);\n\t\n\tvar _Property2 = _interopRequireDefault(_Property);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction Text(engine, node, evaluate) {\n\t  (0, _Property2.default)(engine, node, 'textContent: ' + evaluate);\n\t}\n\n/***/ }\n/******/ ])\n});\n;\n\n\n/** WEBPACK FOOTER **\n ** linked-html.js\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 752517655c8da0551ca7\n **/","// Main modules\nexport { default as Engine } from './src/Engine';\nexport { default as Expression } from './src/Expression/Expression';\n\n// Tools\nexport { register as register } from './src/Component';\n\n\n\n/** WEBPACK FOOTER **\n ** ./linked-html.js\n **/","import { State } from 'papillon/papillon';\nimport { register as registerComponent } from './Component';\n\nimport Link from './Markers/Link';\nimport ClassList from './Markers/ClassList';\nimport Context from './Markers/Context';\nimport EventListener from './Markers/EventListener';\nimport Foreach from './Markers/Foreach';\nimport Property from './Markers/Property';\nimport Reference from './Markers/Reference';\nimport Text from './Markers/Text';\n\nconst Markers = {\n  link: Link,\n  class: ClassList,\n  context: Context,\n  on: EventListener,\n  foreach: Foreach,\n  prop: Property,\n  ref: Reference,\n  text: Text\n};\n\nconst Filters = {\n  int: { set: v => parseInt(v, 10) },\n  bool: { set: Boolean }\n};\n\nconst watchers = new WeakMap();\nconst configs = new WeakMap();\nconst states = new WeakMap();\n\nexport default class Engine {\n  static watch(engine, cb) {\n    let e = watchers.get(engine);\n    if (!e) {\n      e = new Set();\n      watchers.set(engine, e);\n    }\n    e.add(cb);\n  }\n\n  static config(engine) {\n    let c = configs.get(engine.root);\n    if (!c) {\n      c = {};\n      configs.set(engine, c);\n    }\n    return c;\n  }\n\n  static queue(engine) {\n    if (!this._request) {\n      State.now();\n\n      this._engines = new Set().add(engine);\n      this._request = window.requestAnimationFrame(()=> {\n        this._engines.forEach(e => {\n          const set = watchers.get(e);\n          if (set) {\n            set.forEach(cb => cb());\n          }\n        });\n        this._request = this._engines = undefined;\n      });\n    } else {\n      this._engines.add(engine);\n    }\n  }\n\n  static spawn(engine, nodeList, state) {\n    const config = Engine.config(engine);\n    const childEngine = Object.create(engine);\n\n    Object.defineProperty(childEngine, 'parent', { value: engine });\n    childEngine.state = state;\n\n    nodeList.forEach(\n      node => compile(node, childEngine, config.prefix, config.markers)\n    );\n\n    return childEngine;\n  }\n\n  static register(name, options) {\n    return registerComponent(this, name, options);\n  }\n\n  constructor(node, {state, markers, filters, prefix, live} = {}) {\n    if (!node) {\n      throw new TypeError('Invalid first argument.');\n    }\n\n    if (state && Object(state) !== state) {\n      throw new TypeError(`Invalid 'state' option, object required.`);\n    }\n\n    const config = Object.defineProperties(Engine.config(this), {\n      markers: { value: Object.assign({}, Markers, markers) },\n      filters: { value: Object.assign({}, Filters, filters) },\n      prefix: { value: (prefix || '-') + '-' },\n      live: { value: live === undefined ? true : live }\n    });\n\n    Object.defineProperty(this, 'root', { value: this });\n    this.state = state || {};\n\n    if(node.nodeType === Node.ELEMENT_NODE) {\n      compile(node, this, config.prefix, config.markers);\n    } else {\n      Array.from(node.childNodes || node).forEach(\n        n => {\n          if (n.nodeType === Node.ELEMENT_NODE) {\n            compile(n, this, config.prefix, config.markers);\n          }\n        }\n      );\n    }\n  }\n\n  get state() {\n    const s = states.get(this);\n    if ((typeof s === 'object') && s !== null) {\n      Engine.queue(this);\n    }\n    return s;\n  }\n\n  set state(value) {\n    states.set(this, value);\n    Engine.queue(this);\n  }\n}\n\nfunction compile(node, engine, prefix, markers) {\n  const prefixLength = prefix.length;\n  const compileChilds = Array.from(node.attributes)\n    .filter(a => a.name.substr(0, prefixLength) === prefix)\n    .reduce((acc, attr) => {\n      const id = attr.name.substr(prefixLength)\n        .replace(/-([a-z])/g, g => g[1].toUpperCase());\n\n      const marker = markers[id];\n\n      try {\n        if (!marker) {\n          throw new ReferenceError(`marker '${id}' not found.`);\n        }\n        marker(engine, node, attr.value);\n      } catch(e) {\n        const nodeText = node.outerHTML.match(/^<[^<]+>/i);\n        e.message = `: ${e.message}\\n'${id}' -> ${nodeText}`;\n        throw e;\n      }\n\n      if (marker._options && marker._options.breakCompile) {\n        return false;\n      }\n\n      return acc;\n    }, true);\n\n  if (compileChilds && node.children.length) {\n    Array.from(node.children).forEach(\n      node => compile(node, engine, prefix, markers)\n    );\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/Engine.js\n **/","import KeyMap from './KeyMap';\n\nconst map = new WeakMap();\nlet timestamp = 0;\nlet request = false;\n\nclass State {\n\n  static now() {\n    if (!request) {\n      timestamp = timestamp + 1;\n      request = window.requestAnimationFrame(\n        ()=> request = undefined\n      );\n    }\n    return timestamp;\n  }\n\n  static isObject(target) {\n    return typeof(target) === 'object' && target !== null;\n  }\n\n  static is(v1, v2) {\n    if (v1 === 0 && v2 === 0) {\n      return 1 / v1 === 1 / v2;\n    }\n    if (v1 !== v1) {\n      return v2 !== v2;\n    }\n    return v1 === v2;\n  }\n\n  constructor(target) {\n    if (!State.isObject(target)) {\n      throw new TypeError('Invalid arguments');\n    }\n    const state = map.get(target);\n    if (state) { return state; }\n    map.set(target, this);\n\n    const keyMap = new KeyMap();\n    this.cache = Object.keys(target).reduce((cache, key)=> {\n      let value = cache[key] = target[key];\n      if (State.isObject(value)) {\n        new State(value);\n      }\n      keyMap.set(value, key);\n      return cache;\n    }, {});\n\n    this.keyMap = keyMap;\n    this.target = target;\n    this.lastCheck = State.now();\n    this.lastChange = 0;\n  }\n\n  isChanged() {\n    let timestamp = State.now();\n\n    if (timestamp > this.lastCheck) {\n      let changed = false;\n\n      this.lastCheck = timestamp;\n      this.changelog = {};\n\n      Object.keys(this.cache).forEach((key)=> {\n        if (!this.target.hasOwnProperty(key)) {\n          let value = this.cache[key];\n          this.changelog[key] = { type: 'delete', oldValue: value };\n          changed = true;\n        }\n      });\n\n      const keyMap = new KeyMap();\n      const cacheNewKeys = {};\n      this.cache = Object.keys(this.target).reduce((cache, key)=> {\n        const value = this.target[key];\n\n        if (!this.cache.hasOwnProperty(key)) {\n          this.changelog[key] = { type:'set' };\n          changed = true;\n        } else if (!State.is(value, this.cache[key])) {\n          this.changelog[key] = this.changelog[key] || { type: 'set'};\n          this.changelog[key].oldValue = this.cache[key];\n          changed = true;\n        }\n\n        if (State.isObject(value)) {\n          let nestedState = new State(value);\n          if (nestedState.isChanged()) {\n            changed = true;\n            if (!this.changelog[key]) {\n              this.changelog[key] = { type: 'modify' };\n              this.changelog[key].changelog = nestedState.changelog;\n            }\n          }\n        }\n\n        if (this.changelog[key]) {\n          const oldKey = this.keyMap.shift(value, key);\n          if (oldKey && oldKey !== key && this.target[oldKey] !== value) {\n            this.changelog[key].oldKey = oldKey;\n            if (this.changelog[oldKey]) {\n              this.changelog[oldKey].newKey = key;\n            } else {\n              cacheNewKeys[oldKey] = key;\n            }\n          }\n\n          if (cacheNewKeys[key]) {\n            this.changelog[key].newKey = cacheNewKeys[key];\n          }\n        }\n\n        cache[key] = value;\n        keyMap.set(value, key);\n        return cache;\n      }, {});\n\n      this.keyMap = keyMap;\n\n      if (changed) {\n        this.lastChange = this.lastCheck;\n      } else {\n        this.changelog = undefined;\n      }\n    }\n\n    return this.lastChange === timestamp;\n  }\n}\n\nexport default State;\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/papillon/src/State.js\n **/","class KeyMap {\n    constructor() {\n      this.map = new Map();\n    }\n\n    set(key, value) {\n      let list = this.map.get(key);\n      if (!list) {\n        list = new Set();\n        this.map.set(key, list);\n      }\n\n      if (value) {\n        list.add(value);\n      }\n\n      return list;\n    }\n\n    shift(key, value) {\n      let set = this.map.get(key);\n      if (set && set.size) {\n        if (set.has(value)) {\n          set.delete(value);\n          return value;\n        } else {\n          for(let result of set) {\n            set.delete(result);\n            return result;\n          }\n        }\n      }\n      return false;\n    }\n}\n\nexport default KeyMap;\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/papillon/src/KeyMap.js\n **/","import State from './State';\nimport PropertyObserver from './PropertyObserver';\n\nclass Observer {\n  static requestAnimationFrame(cb) {\n    if (!this._request) {\n      this._callbacks = new Set().add(cb);\n      this._request = window.requestAnimationFrame(()=> {\n        this._callbacks.forEach(cb => cb());\n        this._request = this._callbacks = undefined;\n      });\n    } else {\n      this._callbacks.add(cb);\n    }\n\n    return cb;\n  }\n\n  static cancelAnimationFrame(cb) {\n    if (this._callbacks) {\n      this._callbacks.delete(cb);\n    }\n  }\n\n  constructor(host, keys, callback) {\n    if (!host || !keys || !callback) {\n      throw new TypeError('Invalid arguments');\n    }\n\n    this.callback = callback;\n    this.revert = [];\n\n    this.state = new State(\n      [].concat(keys).reduce( (list, key) => {\n        let observer = new PropertyObserver(host, key);\n        list[key] = host[key];\n\n        this.revert.push(observer.observe((value)=> {\n          if (!State.is(list[key], value)) {\n            list[key] = value;\n            this.check();\n          } else if (State.isObject(value)) {\n            this.check();\n          }\n        }));\n\n        return list;\n      }, {})\n    );\n  }\n\n  check() {\n    if (!this.checkFn) {\n      this.checkFn = Observer.requestAnimationFrame(()=> {\n        if (this.state.isChanged()) {\n          this.callback(this.state.changelog);\n        }\n\n        this.checkFn = undefined;\n      });\n    }\n  }\n\n  destroy() {\n    if (this.checkFn) {\n      Observer.cancelAnimationFrame(this.checkFn);\n    }\n\n    this.revert.forEach(cb => cb());\n  }\n}\n\nexport default Observer;\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/papillon/src/Observer.js\n **/","import PropertyProxy from './PropertyProxy';\n\nlet register = new WeakMap();\n\nclass PropertyObserver {\n  static singleton(host, key, target) {\n    let instance = register.get(host);\n    if (instance) {\n      if (instance[key]) {\n        return instance[key];\n      } else {\n        instance[key] = target;\n      }\n    } else {\n      register.set(host, { [key]: target });\n    }\n\n    return target;\n  }\n\n  constructor(host, key) {\n    let singleton = PropertyObserver.singleton(host, key, this);\n    if (singleton !== this) {\n      return singleton;\n    }\n\n    this.proxy = new PropertyProxy(host, key,\n      (value)=> this.getters.forEach(cb => cb(value)),\n      (newValue)=> this.setters.forEach(cb => cb(newValue))\n    );\n\n    this.getters = new Set();\n    this.setters = new Set();\n  }\n\n  observe(get, set) {\n    if (!this.getters.size) {\n      this.proxy.on();\n    }\n\n    this.getters.add(get);\n    this.setters.add(set || get);\n\n    return ()=> {\n      this.unobserve(get, set);\n    };\n  }\n\n  unobserve(get, set) {\n    this.getters.delete(get);\n    this.setters.delete(set || get);\n\n    if (!this.getters.size && !this.setters.size) {\n      this.proxy.off();\n    }\n  }\n}\n\nexport default PropertyObserver;\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/papillon/src/PropertyObserver.js\n **/","class PropertyProxy {\n  constructor(host, key, get, set, replace = false) {\n    this.host = host;\n    this.key = key;\n    this.getter = get;\n    this.setter = set || get;\n    this.replace = replace;\n  }\n\n  getOwnDescriptor() {\n    let desc = Object.getOwnPropertyDescriptor(this.host, this.key);\n\n    if (desc) {\n      if (!desc.configurable) {\n        throw new TypeError(\n          `Cannot create proxy for not configurable property '${this.key}'`);\n      }\n      if (!desc.get && !desc.set && !desc.writable) {\n        throw new TypeError(\n          `Cannot create proxy for readonly property '${this.key}'`);\n      }\n    }\n\n    return desc;\n  }\n\n  getProtoDescriptor() {\n    let desc, host = Object.getPrototypeOf(this.host);\n\n    while(host) {\n      desc = Object.getOwnPropertyDescriptor(host, this.key);\n      if (desc) {\n        break;\n      } else {\n        host = Object.getPrototypeOf(host);\n      }\n    }\n\n    if (desc) {\n      if (!desc.get && !desc.set) {\n        desc.get = ()=> {\n          delete this.host[this.key];\n          let value = this.host[this.key];\n          this.on();\n          return value;\n        };\n        desc.set = (newVal)=> {\n          delete this.host[this.key];\n          this.host[this.key] = newVal;\n          this.on();\n        };\n      }\n    }\n\n    return desc;\n  }\n\n  on() {\n    let desc = this.getOwnDescriptor();\n\n    if (desc) {\n      this.ownProperty = true;\n    } else {\n      this.ownProperty = false;\n      desc = this.getProtoDescriptor();\n    }\n\n    if (!desc) {\n      this.ownProperty = true;\n      this.notDefined = true;\n      desc = {\n        enumerable: true,\n        writable: true,\n        configurable: true\n      };\n    }\n\n    this.desc = desc;\n    this.value = this.host[this.key];\n\n    Object.defineProperty(this.host, this.key, {\n      configurable: true,\n      enumerable: this.desc.enumerable,\n      get: this.get.bind(this),\n      set: this.set.bind(this)\n    });\n  }\n\n  off() {\n    if (this.ownProperty) {\n      if (this.notDefined) {\n        delete this.host[this.key];\n      } else {\n        if (!this.desc.get && !this.desc.set) {\n          this.desc.value = this.value;\n        }\n        Object.defineProperty(this.host, this.key, this.desc);\n      }\n    } else {\n      delete this.host[this.key];\n    }\n  }\n\n  get() {\n    if (this.desc.get) {\n      this.value = this.desc.get.call(this.host);\n    }\n    const temp = this.getter(this.value);\n    if (this.replace) {\n      this.value = temp;\n    }\n    return this.value;\n  }\n\n  set(newValue) {\n    this.notDefined = false;\n\n    if (this.desc.set) {\n      this.desc.set.call(this.host, newValue);\n    }\n\n    if (this.desc.writable || this.desc.get || this.desc.set) {\n      this.value = newValue;\n    }\n\n    const temp = this.setter(this.value);\n    if (this.replace) {\n      this.value = temp;\n    }\n  }\n}\n\nexport default PropertyProxy;\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/papillon/src/PropertyProxy.js\n **/","import Expression from './Expression/Expression';\n\nexport const map = new WeakMap();\n\nexport function register(constructor, name, customOptions) {\n  const constrOpts = Object.assign({}, constructor._options, customOptions);\n  const options = extractOptions(\n    constrOpts, ['template', 'properties', 'methods', 'shadow', 'prototype']\n  );\n  const prototype = Object.create(options.prototype || HTMLElement.prototype);\n  const { template, properties } = options;\n\n  if (template && template !== true) {\n    options.template = resolveTemplate(template);\n  }\n\n  if(properties) {\n    for (let key of Object.keys(properties)) {\n      if (typeof properties[key] === 'string') {\n        properties[key] = {\n          link: options.properties[key],\n          attribute: camelToDash(key)\n        };\n      } else if (Object(properties[key]) === properties[key]) {\n        if (properties[key].attribute === undefined) {\n          properties[key].attribute = camelToDash(key);\n        }\n      } else {\n        throw new TypeError(`Invalid '${key}' property description.`);\n      }\n    }\n  }\n\n  Object.defineProperty(prototype, 'createdCallback', {\n    value: function() {\n      map.set(this, compile(constructor, this, options, constrOpts));\n    }\n  });\n\n  if (typeof constructor.prototype.attached === 'function') {\n    Object.defineProperty(prototype, 'attachedCallback', {\n      value: function() {\n        map.get(this).then(engine => {\n          engine.attached();\n        });\n      }\n    });\n  }\n\n  if (typeof constructor.prototype.detached === 'function') {\n    Object.defineProperty(prototype, 'detachedCallback', {\n      value: function() {\n        map.get(this).then(engine => {\n          engine.detached();\n        });\n      }\n    });\n  }\n\n  if (typeof constructor.prototype.attributeChanged === 'function') {\n    Object.defineProperty(prototype, 'attributeChangedCallback', {\n      value: function(attrName, oldVal, newVal) {\n        map.get(this).then(engine => {\n          engine.attributeChanged(attrName, oldVal, newVal);\n        });\n      }\n    });\n  }\n\n  return document.registerElement(name, { prototype });\n}\n\nfunction compile(constructor, host, options, constrOpts) {\n  let { template, properties, methods } = options;\n  const shadow = options.shadow && resolveShadow(host);\n  const target = shadow || document.createDocumentFragment();\n\n  if (template) {\n    if (template === true) {\n      template = host.children[0];\n      if (!(template && template.localName === 'template')) {\n        throw new Error('Template element required.');\n      }\n      host.removeChild(template);\n\n      if (template.content) {\n        target.appendChild(template.content);\n      } else {\n        Array.from(template.childNodes).forEach(n => {\n          target.appendChild(n);\n        });\n      }\n    } else {\n      target.appendChild(document.importNode(template, true));\n    }\n  } else {\n    Array.from(host.childNodes).forEach(n => {\n      target.appendChild(n);\n    });\n  }\n\n  return Promise.resolve().then(()=> {\n    const engine = new constructor(target, constrOpts);\n    Object.defineProperty(engine, 'host', { value: host });\n\n    if (!shadow) {\n      host.insertBefore(target, host.childNodes[0]);\n    } else {\n      Object.defineProperty(engine, 'shadow', { value: target });\n    }\n\n    if (properties) {\n      for (let key of Object.keys(properties)) {\n        const { link, attribute, reflect } = properties[key];\n        const expr = new Expression(engine, link);\n\n        Object.defineProperty(host, key, {\n          get: ()=> expr.get(),\n          set: (val)=> expr.set(val)\n        });\n\n        if (attribute) {\n          if (host.hasAttribute(attribute)) {\n            expr.set(host.getAttribute(attribute));\n          }\n          if (reflect) {\n            expr.observe((val)=> {\n              if (val === undefined) {\n                host.removeAttribute(attribute);\n              } else {\n                if (val === true) {\n                  host.setAttribute(attribute, '');\n                } else {\n                  host.setAttribute(attribute, val);\n                }\n              }\n            }, true);\n          }\n        }\n      }\n    }\n\n    if (methods) {\n      [].concat(methods).forEach(method => {\n        Object.defineProperty(host, method, {\n          writable: true,\n          value: (...args)=> engine[method](...args)\n        });\n      });\n    }\n\n    return engine;\n  });\n}\n\nfunction extractOptions(options, list = []) {\n  const temp = {};\n  for (let key of list) {\n    temp[key] = options[key];\n    delete options[key];\n  }\n\n  return temp;\n}\n\nfunction resolveShadow(host) {\n  if (typeof host.attachShadow === 'function') {\n    return host.attachShadow({mode: \"closed\"});\n  } else if (typeof host.createShadowRoot === 'function') {\n    return host.createShadowRoot();\n  }\n}\n\nfunction resolveTemplate(content) {\n  if (typeof content === 'string') {\n    const template = document.createElement('template');\n    template.innerHTML = content;\n\n    if (!template.content) {\n      const fragment = document.createDocumentFragment();\n      Array.from(template.childNodes).forEach(n => {\n        fragment.appendChild(n);\n      });\n      return fragment;\n    } else {\n      return template.content;\n    }\n  } else {\n    return content.content || content;\n  }\n}\n\nfunction camelToDash(str) {\n  return str.replace(/([a-z])([A-Z])/g, '$1-$2').toLowerCase();\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/Component.js\n **/","import { State } from 'papillon/papillon';\nimport Engine from '../Engine';\nimport Path from './Path';\nimport Flags from './Flags';\n\nexport default class Expression {\n  static parse(evaluate) {\n    const [temp, filter] = evaluate.split('|');\n    const flags = new Set();\n\n    for(var index = 0; index < temp.length; index++) {\n      if (Flags[temp[index]]) {\n        flags.add(temp[index]);\n      } else {\n        break;\n      }\n    }\n\n    const expr = temp.substr(index);\n    return [flags, expr, filter];\n  }\n\n  constructor(engine, evaluate) {\n    if(!evaluate || typeof evaluate !== 'string') {\n      throw new TypeError(`'${evaluate}': Invalid input type.`);\n    }\n\n    const [flags, expr, filter] = Expression.parse(evaluate.trim());\n    this.engine = engine;\n    this.filter = { get: v => v, set: v => v };\n\n    if (this.engine.state) {\n      this.context = ()=> this.engine.state;\n    } else {\n      this.context = ()=> {\n        if (this.engine.state === undefined) {\n          this.engine.state = {};\n        }\n        return this.engine.state;\n      };\n    }\n\n    if (filter) {\n      const filters = Engine.config(engine).filters;\n      if (!filters[filter]) {\n        throw new ReferenceError(`Filter '${filter}' not found.`);\n      }\n      Object.assign(this.filter, filters[filter]);\n    }\n\n    flags.forEach(f => Flags[f](this, engine));\n    this.path = new Path(expr, this.context);\n  }\n\n  get() {\n    return this.filter.get(this.path.get());\n  }\n\n  set(value, onlyDefaults) {\n    return this.path.set(this.filter.set(value), onlyDefaults);\n  }\n\n  call(...args) {\n    return this.path.call(...args);\n  }\n\n  observe(cb, init = false, deep = this.deep) {\n    let target;\n    let cache = this.get();\n\n    if (deep) {\n      target = new State(Object.defineProperty({}, 'value', {\n        get: this.get.bind(this),\n        configurable: true,\n        enumerable: true\n      }));\n    }\n\n    Engine.watch(this.engine, ()=> {\n      const newVal = this.get();\n\n      if (target && target.isChanged()) {\n        cb(newVal, target.changelog.value);\n      } else if (!State.is(newVal, cache)) {\n        cb(newVal);\n      }\n\n      cache = newVal;\n    });\n\n    if (init) {\n      cb(cache);\n    }\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/Expression/Expression.js\n **/","export default class Path {\n  constructor(evaluate, context) {\n    if (!evaluate) {\n      throw new TypeError('Path cannot be empty.');\n    }\n\n    this.evaluate = evaluate;\n    this.context = context;\n    this.path = this.parse(evaluate);\n  }\n\n  parse(path) {\n    let result = [];\n\n    const property = path.split('').reduce(\n      (acc, char)=> {\n        switch(char) {\n          case \".\":\n            result.push({property: acc, proto: Object});\n            return \"\";\n          case \"[\":\n            result.push({property: acc, proto: Array});\n            return \"\";\n          case \"]\":\n            return acc;\n        }\n\n        return acc + char;\n      }, \"\");\n\n    result.push({property});\n\n    return result;\n  }\n\n  getContext() {\n    const context = this.context();\n    if (Object(context) !== context) {\n      throw new TypeError('Object required as path context.');\n    }\n    return context;\n  }\n\n  get() {\n    let result = this.getContext();\n\n    if (result) {\n      this.path.every(({property, proto})=> {\n        result = result[property];\n\n        if(result && proto && !(result instanceof Object)) {\n          throw new TypeError(\n            `'${property}' in '${this.evaluate}': Object instance required.`);\n        }\n\n        return result;\n      });\n    }\n\n    return result;\n  }\n\n  set(newVal, check = false) {\n    const {context, property} = this.path.reduce((acc, {property, proto})=> {\n      if (proto) {\n        if (!acc.context[property]) {\n          acc.context[property] = proto();\n        } else if(!(acc.context[property] instanceof Object)) {\n          throw new TypeError(\n            `'${property}' in '${this.evaluate}': Object instance required.`);\n        }\n\n        acc.context = acc.context[property];\n      } else {\n        acc.property = property;\n      }\n\n      return acc;\n    }, { context: this.getContext() });\n\n    if (!check || context[property] === undefined) {\n      context[property] = newVal;\n    }\n\n    return context[property];\n  }\n\n  call(...args) {\n    const { context, property } = this.path.reduce((acc, {property, proto})=> {\n      if (proto) {\n        acc.context = acc.context[property];\n        if(!(acc.context instanceof Object)) {\n          throw new TypeError(\n            `'${property}' in '${this.evaluate}': Object instance required.`);\n        }\n      } else {\n        acc.property = property;\n      }\n\n      return acc;\n    }, { context: this.getContext() });\n\n    if (typeof context[property] !== 'function') {\n      throw new TypeError(`'${this.evaluate}': Function required.`);\n    }\n\n    return context[property](...args);\n  }\n\n  delete() {\n    let context = this.getContext();\n    let result = { context, property: this.path[0].property };\n\n    this.path.some(({property}) => {\n      if (!context.hasOwnProperty(property)) {\n        return true;\n      }\n\n      if (Object.keys(context).length > 1) {\n        result = { context, property };\n      }\n\n      context = context[property];\n    });\n\n    delete result.context[result.property];\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/Expression/Path.js\n **/","const Flags = {\n  '!': function(expr) {\n    const filter = expr.filter;\n    expr.filter = {\n      get: v => filter.get(!v), set: v => filter.set(!v)\n    };\n  },\n  '@': function(expr, engine) {\n    expr.context = ()=> engine;\n  },\n  '&': function(expr) {\n    expr.set = ()=> {};\n  },\n  '*': function(expr) {\n    expr.deep = true;\n  }\n};\n\nexport default Flags;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/Expression/Flags.js\n **/","import Expression from '../Expression/Expression';\n\nclass Wrapper {\n  constructor(node) {\n    this.node = node;\n  }\n\n  get() {\n    return this.node.value;\n  }\n\n  set(value) {\n    this.value = value;\n\n    if (this.node.value !== value) {\n      this.node.value = value;\n    }\n  }\n\n  observe(cb) {\n    this.node.addEventListener('input', cb);\n  }\n}\n\nclass CheckWrapper extends Wrapper {\n  get() {\n    return this.node.checked ? this.node.value : undefined;\n  }\n\n  set(value) {\n    if (this.node.value === value) {\n      this.node.checked = true;\n    } else {\n      this.node.checked = false;\n    }\n  }\n\n  observe(cb) {\n    this.node.addEventListener('change', cb);\n  }\n}\n\nclass SelectWrapper extends Wrapper {\n  constructor(node) {\n    super(node);\n\n    if ('MutationObserver' in window) {\n      new MutationObserver(()=> {\n        this.set(this.value);\n      }).observe(node, {\n        attributes: true,\n        childList: true,\n        characterData: true,\n        subtree: true\n      });\n    }\n  }\n\n  set(value) {\n    this.value = value;\n\n    Array.from(this.node.options).some(o => {\n      if (o.value === value) {\n        o.selected = true;\n        return true;\n      }\n    });\n  }\n\n  observe(cb) {\n    this.node.addEventListener('change', cb);\n  }\n}\n\nclass MultiSelectWrapper extends SelectWrapper {\n  get() {\n    const values = this.value || [];\n    const newValues = Array.from(this.node.options)\n      .filter(o => o.selected)\n      .map(o => o.value);\n\n    Object.assign(values, newValues);\n    values.length = newValues.length;\n\n    return values;\n  }\n\n  set(values) {\n    this.value = values;\n\n    if (!Array.isArray(values)) {\n      throw new Error('Invalid values. Array instance required.');\n    }\n\n    Array.from(this.node.options).forEach(o => {\n      o.selected = values.some(v => v === o.value);\n    });\n  }\n}\n\nexport default function Link(engine, node, evaluate) {\n  let wrapper;\n\n  switch(node.type) {\n    case \"checkbox\":\n    case \"radio\":\n      wrapper = new CheckWrapper(node);\n      break;\n\n    case \"select-one\":\n      wrapper = new SelectWrapper(node);\n      break;\n\n    case \"select-multiple\":\n      wrapper = new MultiSelectWrapper(node);\n      break;\n\n    default:\n      wrapper = new Wrapper(node);\n  }\n\n  const expr = new Expression(engine, evaluate);\n\n  expr.set(wrapper.get(), true);\n  expr.observe(wrapper.set.bind(wrapper), true, false);\n  wrapper.observe(()=> expr.set(wrapper.get()));\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/Markers/Link.js\n **/","import Expression from '../Expression/Expression';\nimport {list} from './List';\n\nexport default function ClassList(engine, node, evaluate) {\n  list(evaluate, (name, value)=> {\n    const expr = new Expression(engine, value);\n\n    expr.set(node.classList.contains(name), true);\n    expr.observe(val => {\n      if (val) {\n        node.classList.add(name);\n      } else {\n        node.classList.remove(name);\n      }\n    }, true, false);\n  });\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/Markers/ClassList.js\n **/","export function list(evaluate, cb) {\n  evaluate.split(';').forEach(v => {\n    const [name, value] = v.split(':');\n\n    if (!name || !value) {\n      throw new SyntaxError(`'${v}': Invalid list element.`);\n    }\n\n    cb(name.trim(), value.trim());\n  });\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/Markers/List.js\n **/","import Template from './Template/Template';\nimport Expression from '../Expression/Expression';\n\nexport default function Context(engine, node, evaluate) {\n  if (!node.children[0]) {\n    throw new Error('No children elements.');\n  }\n\n  const template = new Template(\n    Array.from(node.childNodes)\n      .filter(n => n.nodeType === Node.ELEMENT_NODE),\n    engine\n  );\n\n  const expr = new Expression(engine, evaluate);\n\n  expr.set({}, true);\n  expr.observe(state => {\n    if (!state) {\n      template.remove();\n    } else {\n      if (typeof state !== 'object') {\n        throw new TypeError('Invalid context target.');\n      }\n      template.setState(state).append();\n    }\n  }, true, true);\n}\n\nContext._options = {\n  breakCompile: true\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/Markers/Context.js\n **/","import Engine from '../../Engine';\n\nexport default class Template {\n  constructor(nodes, engine, host) {\n    this.nodes = [].concat(nodes);\n    this.host = host || this.nodes[0].parentElement;\n    this.parentEngine = engine;\n\n    if (!this.host) {\n      throw new Error('Invalid host for template.');\n    }\n\n    if (!this.nodes[0].parentElement) {\n      this.hidden = true;\n    }\n  }\n\n  getState() {\n    if (!this.engine) {\n      throw new Error('Template does not fully initalized.');\n    }\n\n    return this.engine.state;\n  }\n\n  setState(state) {\n    if (!this.engine) {\n      this.engine = Engine.spawn(this.parentEngine, this.nodes, state);\n    } else {\n      this.engine.state = state;\n    }\n\n    return this;\n  }\n\n  append(forceAppend = false, insertBefore = null) {\n    if (this.hidden || forceAppend) {\n      this.nodes.forEach(node => {\n        this.host.insertBefore(node, insertBefore);\n      });\n      this.hidden = false;\n    }\n\n    return this;\n  }\n\n  remove() {\n    if (!this.hidden) {\n      const fragment = document.createDocumentFragment();\n      this.nodes.forEach(node => fragment.appendChild(node));\n      this.hidden = true;\n    }\n\n    return this;\n  }\n\n  clone() {\n    return new this.constructor(\n      this.nodes.map(node => node.cloneNode(true)),\n      this.parentEngine,\n      this.host\n    );\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/Markers/Template/Template.js\n **/","import Expression from '../Expression/Expression';\nimport {list} from './List';\n\nexport default function EventListener(engine, node, evaluate) {\n  list(evaluate, (name, value)=> {\n    const expr = new Expression(engine, value);\n    node.addEventListener(name, (e)=> expr.call(e));\n  });\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/Markers/EventListener.js\n **/","import IndexedTemplate from './Template/IndexedTemplate';\nimport Expression from '../Expression/Expression';\n\nclass Controller {\n  constructor(engine, node, evaluate) {\n    if (!node.children[0]) {\n      throw new Error('No children elements.');\n    }\n\n    this.engine = engine;\n    this.node = node;\n\n    const expr = new Expression(engine, evaluate);\n    let list = expr.get();\n    let createFromView = false;\n\n    if(list === undefined) {\n      list = expr.set([], true);\n      createFromView = true;\n    }\n\n    if (!Array.isArray(list)) {\n      throw new TypeError('Invalid foreach target.');\n    }\n\n    if (createFromView) {\n      this.items = this.createFromView(list);\n      this.template = this.items[this.items.length -1].clone();\n    } else {\n      this.items = this.createFromList(list);\n\n      if (this.items.length) {\n        this.template = this.items[this.items.length - 1].clone();\n      } else {\n        this.template = new IndexedTemplate(node.children[0], this.engine);\n      }\n\n      this.clear(list);\n    }\n\n    expr.observe(this.render.bind(this), false, true);\n  }\n\n  createFromView(list) {\n    const length = this.node.children.length;\n\n    return Array.from(this.node.children).map((child, index) => {\n      const temp = new IndexedTemplate(child, this.engine);\n\n      list[index] = temp\n        .setState(list[index], { index, length })\n        .getState();\n\n      return temp;\n    });\n  }\n\n  createFromList(list) {\n    const length = list.length;\n    let temp;\n\n    return list.map((item, index) => {\n      if (this.node.children[index]) {\n        temp = new IndexedTemplate(this.node.children[index], this.engine)\n          .setState(list[index], { index, length });\n      } else {\n        temp = temp\n          .clone()\n          .setState(list[index], { index, length })\n          .append(true);\n      }\n\n      list[index] = temp.getState();\n\n      return temp;\n    });\n  }\n\n  clear(list) {\n    const index = list.length;\n    const max = this.node.children.length;\n    for (let i = index; i < max; i++) {\n      this.node.removeChild(this.node.children[index]);\n    }\n  }\n\n  render(list, { type, changelog } = {}) {\n    if (!Array.isArray(list)) {\n      throw new TypeError('Invalid foreach target.');\n    }\n\n    const length = list.length;\n\n    switch(type) {\n      case 'modify':\n        Object.assign(this.items, Object.keys(changelog)\n          .reduce((items, key) => {\n            const { type, oldKey, newKey } = changelog[key];\n\n            if (type === 'delete') {\n              if (this.items[key]) {\n                this.items[key].remove();\n              }\n            } else {\n              const index = parseInt(key, 10);\n              let temp = this.items[oldKey || key];\n              let append = false;\n\n              if (oldKey) {\n                if (this.items[key]) {\n                  this.items[key].remove();\n                }\n                this.items[oldKey] = null;\n              }\n\n              if (!temp || (newKey && !oldKey)) {\n                temp = this.template.clone();\n                append = true;\n              }\n\n              temp.setState(list[key], { index, length });\n\n              if (append || oldKey) {\n                temp.append(true, this.node.children[index]);\n              }\n\n              items[key] = temp;\n            }\n\n            return items;\n          }, {})\n        );\n\n        this.items.length = list.length;\n\n        break;\n\n      case 'set':\n        const itemsLength = this.items.length;\n        const items = list.map((item, index) => {\n          let temp;\n\n          if (index < itemsLength) {\n            temp = this.items[index];\n          } else {\n            temp = this.template.clone().append(true);\n          }\n\n          temp.setState(item, { index, length });\n\n          return temp;\n        });\n\n        for(let i = length; i < itemsLength; i++) {\n          this.items[i].remove();\n        }\n\n        this.items = items;\n    }\n  }\n}\n\nexport default function Foreach(engine, node, evaluate) {\n  return new Controller(engine, node, evaluate);\n}\n\nForeach._options = {\n  breakCompile: true\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/Markers/Foreach.js\n **/","import Template from './Template';\n\nconst map = new WeakMap();\n\nfunction extendEngine(engine) {\n  if (map.has(engine)) {\n    return map.get(engine);\n  } else {\n    const extended = Object.defineProperties(Object.create(engine), {\n      number: { get: function() { return this.index + 1; }},\n      odd: { get: function() { return this.number % 2 !== 0; }},\n      even: { get: function() { return this.number % 2 === 0; }},\n      first: { get: function() { return this.index === 0; }},\n      last: { get: function() { return this.length === this.number; }}\n    });\n\n    map.set(engine, extended);\n\n    return extended;\n  }\n}\n\nexport default class IndexedTemplate extends Template {\n  constructor(nodes, engine, host) {\n    super(nodes, extendEngine(engine), host);\n  }\n\n  setState(state, {index, length}) {\n    super.setState(state);\n    Object.assign(this.engine, {index, length});\n\n    return this;\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/Markers/Template/IndexedTemplate.js\n **/","import Expression from '../Expression/Expression';\nimport {list} from './List';\n\nexport default function Property(engine, node, evaluate) {\n  list(evaluate, (name, value)=> {\n    const accessor = resolveProperty(node, name);\n    const expr = new Expression(engine, value);\n\n    expr.set(accessor.get(), true);\n    expr.observe(accessor.set, true);\n  });\n}\n\nfunction resolveProperty(node, name) {\n  if (name in node) {\n    return {\n      get: ()=> node[name],\n      set: (value)=> node[name] = value\n    };\n  } else {\n    return {\n      get: ()=> {\n        const val = node.getAttribute(name);\n        return val ? val : undefined;\n      },\n      set: (value)=> {\n        if (value === false || value === undefined || value === null) {\n          node.removeAttribute(name);\n        } else {\n          node.setAttribute(name, value === true ? name : value);\n        }\n      }\n    };\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/Markers/Property.js\n **/","import Expression from '../Expression/Expression';\n\nexport default function Reference(engine, node, evaluate) {\n  const expr = new Expression(engine, evaluate);\n  expr.set(node, true);\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/Markers/Reference.js\n **/","import Property from './Property';\n\nexport default function Text(engine, node, evaluate) {\n  Property(engine, node, `textContent: ${evaluate}`);\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/Markers/Text.js\n **/"],"sourceRoot":""}