{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///linked-html.js","webpack:///webpack/bootstrap ae9f14592c6fe9adb4e8","webpack:///./src/Engine.js","webpack:///./~/papillon/src/State.js","webpack:///./~/papillon/src/KeyMap.js","webpack:///./~/papillon/src/Observer.js","webpack:///./~/papillon/src/PropertyObserver.js","webpack:///./~/papillon/src/PropertyProxy.js","webpack:///./src/Markers/Link.js","webpack:///./src/Expression/Expression.js","webpack:///./src/Expression/Path.js","webpack:///./src/Expression/Flags.js","webpack:///./src/Markers/ClassList.js","webpack:///./src/Markers/List.js","webpack:///./src/Markers/Context.js","webpack:///./src/Markers/Template/Template.js","webpack:///./src/Markers/EventListener.js","webpack:///./src/Markers/Foreach.js","webpack:///./src/Markers/Template/IndexedTemplate.js","webpack:///./src/Markers/Property.js","webpack:///./src/Markers/Text.js"],"names":["root","factory","exports","module","define","amd","this","modules","__webpack_require__","moduleId","installedModules","id","loaded","call","m","c","p","Object","defineProperty","value","_Engine","enumerable","get","_Expression","_interopRequireDefault","obj","__esModule","default","_classCallCheck","instance","Constructor","TypeError","_typeof","Symbol","constructor","compile","node","engine","prefix","markers","prefixLength","length","compileChilds","Array","from","attributes","filter","a","name","substr","reduce","acc","attr","replace","g","toUpperCase","marker","ReferenceError","e","nodeText","outerHTML","match","message","_options","breakCompile","children","forEach","_createClass","defineProperties","target","props","i","descriptor","configurable","writable","key","protoProps","staticProps","prototype","_papillon","_Link","_Link2","_ClassList","_ClassList2","_Context","_Context2","_EventListener","_EventListener2","_Foreach","_Foreach2","_Property","_Property2","_Text","_Text2","Markers","link","class","context","on","foreach","prop","text","Filters","int","set","v","parseInt","String","bool","Boolean","watchers","WeakMap","configs","states","Engine","_this2","_ref","arguments","undefined","state","filters","live","config","assign","nodeType","Node","ELEMENT_NODE","DOCUMENT_FRAGMENT_NODE","cb","Set","add","_this","_request","_engines","State","now","window","requestAnimationFrame","nodeList","childEngine","create","s","queue","_State","_Observer","_KeyMap","_KeyMap2","map","timestamp","request","isObject","keyMap","cache","keys","lastCheck","lastChange","v1","v2","changed","changelog","hasOwnProperty","type","oldValue","cacheNewKeys","is","nestedState","isChanged","oldKey","shift","newKey","KeyMap","Map","list","size","has","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","iterator","next","done","result","err","_State2","_PropertyObserver","_PropertyObserver2","Observer","host","callback","revert","concat","observer","push","observe","check","_callbacks","_this3","checkFn","cancelAnimationFrame","_defineProperty","_PropertyProxy","_PropertyProxy2","register","PropertyObserver","singleton","proxy","getters","newValue","setters","unobserve","off","PropertyProxy","getter","setter","desc","getOwnPropertyDescriptor","getPrototypeOf","newVal","getOwnDescriptor","ownProperty","getProtoDescriptor","notDefined","bind","_possibleConstructorReturn","self","_inherits","subClass","superClass","setPrototypeOf","__proto__","Link","evaluate","wrapper","CheckWrapper","SelectWrapper","MultiSelectWrapper","Wrapper","expr","_Expression2","addEventListener","_Wrapper","apply","checked","_Wrapper2","MutationObserver","childList","characterData","subtree","options","some","o","selected","_SelectWrapper","values","newValues","isArray","Error","_slicedToArray","sliceIterator","arr","_arr","_n","_d","_e","_s","_i","_Engine2","_Path","_Path2","_Flags","_Flags2","Expression","_Expression$parse","parse","trim","_Expression$parse2","flags","f","path","_evaluate$split","split","_evaluate$split2","temp","index","onlyDefaults","_path","init","deep","watch","Path","property","char","proto","getContext","every","_path$reduce","_ref2","_path$reduce2","_ref3","_ref4","Flags","!","@","&","*","ClassList","_List","classList","contains","val","remove","_v$split","_v$split2","SyntaxError","Context","template","_Template2","childNodes","n","setState","append","_Template","Template","nodes","parentElement","parentEngine","hidden","spawn","forceAppend","insertBefore","fragment","document","createDocumentFragment","appendChild","cloneNode","EventListener","Foreach","Controller","_IndexedTemplate","_IndexedTemplate2","createFromView","items","clone","createFromList","clear","render","child","getState","item","max","removeChild","_changelog$key","itemsLength","extendEngine","extended","number","odd","even","first","last","_get","object","receiver","Function","parent","_Template3","IndexedTemplate","Property","accessor","resolveProperty","getAttribute","removeAttribute","setAttribute","Text"],"mappings":"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","file":"linked-html.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"LinkedHtml\"] = factory();\n\telse\n\t\troot[\"LinkedHtml\"] = factory();\n})(this, function() {\nreturn \n\n\n/** WEBPACK FOOTER **\n ** webpack/universalModuleDefinition\n **/","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"LinkedHtml\"] = factory();\n\telse\n\t\troot[\"LinkedHtml\"] = factory();\n})(this, function() {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _Engine = __webpack_require__(1);\n\t\n\tObject.defineProperty(exports, 'Engine', {\n\t  enumerable: true,\n\t  get: function get() {\n\t    return _Engine.default;\n\t  }\n\t});\n\t\n\tvar _Expression = __webpack_require__(9);\n\t\n\tObject.defineProperty(exports, 'Expression', {\n\t  enumerable: true,\n\t  get: function get() {\n\t    return _Expression.default;\n\t  }\n\t});\n\n/***/ },\n/* 1 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _papillon = __webpack_require__(2);\n\t\n\tvar _Link = __webpack_require__(8);\n\t\n\tvar _Link2 = _interopRequireDefault(_Link);\n\t\n\tvar _ClassList = __webpack_require__(12);\n\t\n\tvar _ClassList2 = _interopRequireDefault(_ClassList);\n\t\n\tvar _Context = __webpack_require__(14);\n\t\n\tvar _Context2 = _interopRequireDefault(_Context);\n\t\n\tvar _EventListener = __webpack_require__(16);\n\t\n\tvar _EventListener2 = _interopRequireDefault(_EventListener);\n\t\n\tvar _Foreach = __webpack_require__(17);\n\t\n\tvar _Foreach2 = _interopRequireDefault(_Foreach);\n\t\n\tvar _Property = __webpack_require__(19);\n\t\n\tvar _Property2 = _interopRequireDefault(_Property);\n\t\n\tvar _Text = __webpack_require__(20);\n\t\n\tvar _Text2 = _interopRequireDefault(_Text);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _typeof(obj) { return obj && typeof Symbol !== \"undefined\" && obj.constructor === Symbol ? \"symbol\" : typeof obj; }\n\t\n\tvar Markers = {\n\t  link: _Link2.default,\n\t  class: _ClassList2.default,\n\t  context: _Context2.default,\n\t  on: _EventListener2.default,\n\t  foreach: _Foreach2.default,\n\t  prop: _Property2.default,\n\t  text: _Text2.default\n\t};\n\t\n\tvar Filters = {\n\t  int: { set: function set(v) {\n\t      return parseInt(v, 10);\n\t    }, get: String },\n\t  bool: { set: Boolean, get: String }\n\t};\n\t\n\tvar watchers = new WeakMap();\n\tvar configs = new WeakMap();\n\tvar states = new WeakMap();\n\t\n\tvar Engine = (function () {\n\t  _createClass(Engine, null, [{\n\t    key: 'watch',\n\t    value: function watch(engine, cb) {\n\t      var e = watchers.get(engine);\n\t      if (!e) {\n\t        e = new Set();\n\t        watchers.set(engine, e);\n\t      }\n\t      e.add(cb);\n\t    }\n\t  }, {\n\t    key: 'config',\n\t    value: function config(engine) {\n\t      var c = configs.get(engine.root);\n\t      if (!c) {\n\t        c = {};\n\t        configs.set(engine, c);\n\t      }\n\t      return c;\n\t    }\n\t  }, {\n\t    key: 'queue',\n\t    value: function queue(engine) {\n\t      var _this = this;\n\t\n\t      if (!this._request) {\n\t        _papillon.State.now();\n\t\n\t        this._engines = new Set().add(engine);\n\t        this._request = window.requestAnimationFrame(function () {\n\t          _this._engines.forEach(function (e) {\n\t            var set = watchers.get(e);\n\t            if (set) {\n\t              set.forEach(function (cb) {\n\t                return cb();\n\t              });\n\t            }\n\t          });\n\t          _this._request = _this._engines = undefined;\n\t        });\n\t      } else {\n\t        this._engines.add(engine);\n\t      }\n\t    }\n\t  }, {\n\t    key: 'spawn',\n\t    value: function spawn(engine, nodeList, state) {\n\t      var config = Engine.config(engine);\n\t      var childEngine = Object.create(engine);\n\t\n\t      Object.defineProperty(childEngine, 'parent', { value: engine });\n\t      childEngine.state = state;\n\t\n\t      nodeList.forEach(function (node) {\n\t        return compile(node, childEngine, config.prefix, config.markers);\n\t      });\n\t\n\t      return childEngine;\n\t    }\n\t  }]);\n\t\n\t  function Engine(node) {\n\t    var _this2 = this;\n\t\n\t    _classCallCheck(this, Engine);\n\t\n\t    var _ref = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];\n\t\n\t    var state = _ref.state;\n\t    var markers = _ref.markers;\n\t    var filters = _ref.filters;\n\t    var prefix = _ref.prefix;\n\t    var live = _ref.live;\n\t\n\t    if (state && Object(state) !== state) {\n\t      throw TypeError('Invalid \\'state\\' option, object required.');\n\t    }\n\t\n\t    var config = Object.defineProperties(Engine.config(this), {\n\t      markers: { value: Object.assign({}, Markers, markers) },\n\t      filters: { value: Object.assign({}, Filters, filters) },\n\t      prefix: { value: (prefix || '-') + '-' },\n\t      live: { value: live === undefined ? true : live }\n\t    });\n\t\n\t    Object.defineProperty(this, 'root', { value: this });\n\t    this.state = state || {};\n\t\n\t    switch (node.nodeType) {\n\t      case Node.ELEMENT_NODE:\n\t        compile(node, this, config.prefix, config.markers);\n\t        break;\n\t      case Node.DOCUMENT_FRAGMENT_NODE:\n\t        Array.from(node.children).forEach(function (node) {\n\t          return compile(node, _this2, config.prefix, config.markers);\n\t        });\n\t        break;\n\t      default:\n\t        throw new TypeError('Element or DocumentFragment required.');\n\t    }\n\t  }\n\t\n\t  _createClass(Engine, [{\n\t    key: 'state',\n\t    get: function get() {\n\t      var s = states.get(this);\n\t      if ((typeof s === 'undefined' ? 'undefined' : _typeof(s)) === 'object' && s !== null) {\n\t        Engine.queue(this);\n\t      }\n\t      return s;\n\t    },\n\t    set: function set(value) {\n\t      states.set(this, value);\n\t      Engine.queue(this);\n\t    }\n\t  }]);\n\t\n\t  return Engine;\n\t})();\n\t\n\texports.default = Engine;\n\t\n\tfunction compile(node, engine, prefix, markers) {\n\t  var prefixLength = prefix.length;\n\t  var compileChilds = Array.from(node.attributes).filter(function (a) {\n\t    return a.name.substr(0, prefixLength) === prefix;\n\t  }).reduce(function (acc, attr) {\n\t    var id = attr.name.substr(prefixLength).replace(/-([a-z])/g, function (g) {\n\t      return g[1].toUpperCase();\n\t    });\n\t\n\t    var marker = markers[id];\n\t\n\t    try {\n\t      if (!marker) {\n\t        throw new ReferenceError('marker \\'' + id + '\\' not found.');\n\t      }\n\t      marker(engine, node, attr.value);\n\t    } catch (e) {\n\t      var nodeText = node.outerHTML.match(/^<[^<]+>/i);\n\t      e.message = ': ' + e.message + '\\n\\'' + id + '\\' -> ' + nodeText;\n\t      throw e;\n\t    }\n\t\n\t    if (marker._options && marker._options.breakCompile) {\n\t      return false;\n\t    }\n\t\n\t    return acc;\n\t  }, true);\n\t\n\t  if (compileChilds && node.children.length) {\n\t    Array.from(node.children).forEach(function (node) {\n\t      return compile(node, engine, prefix, markers);\n\t    });\n\t  }\n\t}\n\n/***/ },\n/* 2 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _State = __webpack_require__(3);\n\t\n\tObject.defineProperty(exports, 'State', {\n\t  enumerable: true,\n\t  get: function get() {\n\t    return _State.default;\n\t  }\n\t});\n\t\n\tvar _Observer = __webpack_require__(5);\n\t\n\tObject.defineProperty(exports, 'Observer', {\n\t  enumerable: true,\n\t  get: function get() {\n\t    return _Observer.default;\n\t  }\n\t});\n\n/***/ },\n/* 3 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _KeyMap = __webpack_require__(4);\n\t\n\tvar _KeyMap2 = _interopRequireDefault(_KeyMap);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _typeof(obj) { return obj && typeof Symbol !== \"undefined\" && obj.constructor === Symbol ? \"symbol\" : typeof obj; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar map = new WeakMap();\n\tvar timestamp = 0;\n\tvar request = false;\n\t\n\tvar State = (function () {\n\t  _createClass(State, null, [{\n\t    key: 'now',\n\t    value: function now() {\n\t      if (!request) {\n\t        timestamp = timestamp + 1;\n\t        request = window.requestAnimationFrame(function () {\n\t          return request = undefined;\n\t        });\n\t      }\n\t      return timestamp;\n\t    }\n\t  }, {\n\t    key: 'isObject',\n\t    value: function isObject(target) {\n\t      return (typeof target === 'undefined' ? 'undefined' : _typeof(target)) === 'object' && target !== null;\n\t    }\n\t  }, {\n\t    key: 'is',\n\t    value: function is(v1, v2) {\n\t      if (v1 === 0 && v2 === 0) {\n\t        return 1 / v1 === 1 / v2;\n\t      }\n\t      if (v1 !== v1) {\n\t        return v2 !== v2;\n\t      }\n\t      return v1 === v2;\n\t    }\n\t  }]);\n\t\n\t  function State(target) {\n\t    _classCallCheck(this, State);\n\t\n\t    if (!State.isObject(target)) {\n\t      throw new TypeError('Invalid arguments');\n\t    }\n\t    var state = map.get(target);\n\t    if (state) {\n\t      return state;\n\t    }\n\t    map.set(target, this);\n\t\n\t    var keyMap = new _KeyMap2.default();\n\t    this.cache = Object.keys(target).reduce(function (cache, key) {\n\t      var value = cache[key] = target[key];\n\t      if (State.isObject(value)) {\n\t        new State(value);\n\t      }\n\t      keyMap.set(value, key);\n\t      return cache;\n\t    }, {});\n\t\n\t    this.keyMap = keyMap;\n\t    this.target = target;\n\t    this.lastCheck = State.now();\n\t    this.lastChange = 0;\n\t  }\n\t\n\t  _createClass(State, [{\n\t    key: 'isChanged',\n\t    value: function isChanged() {\n\t      var _this = this;\n\t\n\t      var timestamp = State.now();\n\t\n\t      if (timestamp > this.lastCheck) {\n\t        (function () {\n\t          var changed = false;\n\t\n\t          _this.lastCheck = timestamp;\n\t          _this.changelog = {};\n\t\n\t          Object.keys(_this.cache).forEach(function (key) {\n\t            if (!_this.target.hasOwnProperty(key)) {\n\t              var value = _this.cache[key];\n\t              _this.changelog[key] = { type: 'delete', oldValue: value };\n\t              changed = true;\n\t            }\n\t          });\n\t\n\t          var keyMap = new _KeyMap2.default();\n\t          var cacheNewKeys = {};\n\t          _this.cache = Object.keys(_this.target).reduce(function (cache, key) {\n\t            var value = _this.target[key];\n\t\n\t            if (!_this.cache.hasOwnProperty(key)) {\n\t              _this.changelog[key] = { type: 'set' };\n\t              changed = true;\n\t            } else if (!State.is(value, _this.cache[key])) {\n\t              _this.changelog[key] = _this.changelog[key] || { type: 'set' };\n\t              _this.changelog[key].oldValue = _this.cache[key];\n\t              changed = true;\n\t            }\n\t\n\t            if (State.isObject(value)) {\n\t              var nestedState = new State(value);\n\t              if (nestedState.isChanged()) {\n\t                changed = true;\n\t                if (!_this.changelog[key]) {\n\t                  _this.changelog[key] = { type: 'modify' };\n\t                  _this.changelog[key].changelog = nestedState.changelog;\n\t                }\n\t              }\n\t            }\n\t\n\t            if (_this.changelog[key]) {\n\t              var oldKey = _this.keyMap.shift(value, key);\n\t              if (oldKey && oldKey !== key && _this.target[oldKey] !== value) {\n\t                _this.changelog[key].oldKey = oldKey;\n\t                if (_this.changelog[oldKey]) {\n\t                  _this.changelog[oldKey].newKey = key;\n\t                } else {\n\t                  cacheNewKeys[oldKey] = key;\n\t                }\n\t              }\n\t\n\t              if (cacheNewKeys[key]) {\n\t                _this.changelog[key].newKey = cacheNewKeys[key];\n\t              }\n\t            }\n\t\n\t            cache[key] = value;\n\t            keyMap.set(value, key);\n\t            return cache;\n\t          }, {});\n\t\n\t          _this.keyMap = keyMap;\n\t\n\t          if (changed) {\n\t            _this.lastChange = _this.lastCheck;\n\t          } else {\n\t            _this.changelog = undefined;\n\t          }\n\t        })();\n\t      }\n\t\n\t      return this.lastChange === timestamp;\n\t    }\n\t  }]);\n\t\n\t  return State;\n\t})();\n\t\n\texports.default = State;\n\n/***/ },\n/* 4 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\t\n\tvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar KeyMap = (function () {\n\t  function KeyMap() {\n\t    _classCallCheck(this, KeyMap);\n\t\n\t    this.map = new Map();\n\t  }\n\t\n\t  _createClass(KeyMap, [{\n\t    key: \"set\",\n\t    value: function set(key, value) {\n\t      var list = this.map.get(key);\n\t      if (!list) {\n\t        list = new Set();\n\t        this.map.set(key, list);\n\t      }\n\t\n\t      if (value) {\n\t        list.add(value);\n\t      }\n\t\n\t      return list;\n\t    }\n\t  }, {\n\t    key: \"shift\",\n\t    value: function shift(key, value) {\n\t      var set = this.map.get(key);\n\t      if (set && set.size) {\n\t        if (set.has(value)) {\n\t          set.delete(value);\n\t          return value;\n\t        } else {\n\t          var _iteratorNormalCompletion = true;\n\t          var _didIteratorError = false;\n\t          var _iteratorError = undefined;\n\t\n\t          try {\n\t            for (var _iterator = set[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n\t              var result = _step.value;\n\t\n\t              set.delete(result);\n\t              return result;\n\t            }\n\t          } catch (err) {\n\t            _didIteratorError = true;\n\t            _iteratorError = err;\n\t          } finally {\n\t            try {\n\t              if (!_iteratorNormalCompletion && _iterator.return) {\n\t                _iterator.return();\n\t              }\n\t            } finally {\n\t              if (_didIteratorError) {\n\t                throw _iteratorError;\n\t              }\n\t            }\n\t          }\n\t        }\n\t      }\n\t      return false;\n\t    }\n\t  }]);\n\t\n\t  return KeyMap;\n\t})();\n\t\n\texports.default = KeyMap;\n\n/***/ },\n/* 5 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _State = __webpack_require__(3);\n\t\n\tvar _State2 = _interopRequireDefault(_State);\n\t\n\tvar _PropertyObserver = __webpack_require__(6);\n\t\n\tvar _PropertyObserver2 = _interopRequireDefault(_PropertyObserver);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar Observer = (function () {\n\t  _createClass(Observer, null, [{\n\t    key: 'requestAnimationFrame',\n\t    value: function requestAnimationFrame(cb) {\n\t      var _this = this;\n\t\n\t      if (!this._request) {\n\t        this._callbacks = new Set().add(cb);\n\t        this._request = window.requestAnimationFrame(function () {\n\t          _this._callbacks.forEach(function (cb) {\n\t            return cb();\n\t          });\n\t          _this._request = _this._callbacks = undefined;\n\t        });\n\t      } else {\n\t        this._callbacks.add(cb);\n\t      }\n\t\n\t      return cb;\n\t    }\n\t  }, {\n\t    key: 'cancelAnimationFrame',\n\t    value: function cancelAnimationFrame(cb) {\n\t      if (this._callbacks) {\n\t        this._callbacks.delete(cb);\n\t      }\n\t    }\n\t  }]);\n\t\n\t  function Observer(host, keys, callback) {\n\t    var _this2 = this;\n\t\n\t    _classCallCheck(this, Observer);\n\t\n\t    if (!host || !keys || !callback) {\n\t      throw new TypeError('Invalid arguments');\n\t    }\n\t\n\t    this.callback = callback;\n\t    this.revert = [];\n\t\n\t    this.state = new _State2.default([].concat(keys).reduce(function (list, key) {\n\t      var observer = new _PropertyObserver2.default(host, key);\n\t      list[key] = host[key];\n\t\n\t      _this2.revert.push(observer.observe(function (value) {\n\t        if (!_State2.default.is(list[key], value)) {\n\t          list[key] = value;\n\t          _this2.check();\n\t        } else if (_State2.default.isObject(value)) {\n\t          _this2.check();\n\t        }\n\t      }));\n\t\n\t      return list;\n\t    }, {}));\n\t  }\n\t\n\t  _createClass(Observer, [{\n\t    key: 'check',\n\t    value: function check() {\n\t      var _this3 = this;\n\t\n\t      if (!this.checkFn) {\n\t        this.checkFn = Observer.requestAnimationFrame(function () {\n\t          if (_this3.state.isChanged()) {\n\t            _this3.callback(_this3.state.changelog);\n\t          }\n\t\n\t          _this3.checkFn = undefined;\n\t        });\n\t      }\n\t    }\n\t  }, {\n\t    key: 'destroy',\n\t    value: function destroy() {\n\t      if (this.checkFn) {\n\t        Observer.cancelAnimationFrame(this.checkFn);\n\t      }\n\t\n\t      this.revert.forEach(function (cb) {\n\t        return cb();\n\t      });\n\t    }\n\t  }]);\n\t\n\t  return Observer;\n\t})();\n\t\n\texports.default = Observer;\n\n/***/ },\n/* 6 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _PropertyProxy = __webpack_require__(7);\n\t\n\tvar _PropertyProxy2 = _interopRequireDefault(_PropertyProxy);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar register = new WeakMap();\n\t\n\tvar PropertyObserver = (function () {\n\t  _createClass(PropertyObserver, null, [{\n\t    key: 'singleton',\n\t    value: function singleton(host, key, target) {\n\t      var instance = register.get(host);\n\t      if (instance) {\n\t        if (instance[key]) {\n\t          return instance[key];\n\t        } else {\n\t          instance[key] = target;\n\t        }\n\t      } else {\n\t        register.set(host, _defineProperty({}, key, target));\n\t      }\n\t\n\t      return target;\n\t    }\n\t  }]);\n\t\n\t  function PropertyObserver(host, key) {\n\t    var _this = this;\n\t\n\t    _classCallCheck(this, PropertyObserver);\n\t\n\t    var singleton = PropertyObserver.singleton(host, key, this);\n\t    if (singleton !== this) {\n\t      return singleton;\n\t    }\n\t\n\t    this.proxy = new _PropertyProxy2.default(host, key, function (value) {\n\t      return _this.getters.forEach(function (cb) {\n\t        return cb(value);\n\t      });\n\t    }, function (newValue) {\n\t      return _this.setters.forEach(function (cb) {\n\t        return cb(newValue);\n\t      });\n\t    });\n\t\n\t    this.getters = new Set();\n\t    this.setters = new Set();\n\t  }\n\t\n\t  _createClass(PropertyObserver, [{\n\t    key: 'observe',\n\t    value: function observe(get, set) {\n\t      var _this2 = this;\n\t\n\t      if (!this.getters.size) {\n\t        this.proxy.on();\n\t      }\n\t\n\t      this.getters.add(get);\n\t      this.setters.add(set || get);\n\t\n\t      return function () {\n\t        _this2.unobserve(get, set);\n\t      };\n\t    }\n\t  }, {\n\t    key: 'unobserve',\n\t    value: function unobserve(get, set) {\n\t      this.getters.delete(get);\n\t      this.setters.delete(set || get);\n\t\n\t      if (!this.getters.size && !this.setters.size) {\n\t        this.proxy.off();\n\t      }\n\t    }\n\t  }]);\n\t\n\t  return PropertyObserver;\n\t})();\n\t\n\texports.default = PropertyObserver;\n\n/***/ },\n/* 7 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\t\n\tvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar PropertyProxy = (function () {\n\t  function PropertyProxy(host, key, get, set) {\n\t    _classCallCheck(this, PropertyProxy);\n\t\n\t    this.host = host;\n\t    this.key = key;\n\t    this.getter = get;\n\t    this.setter = set || get;\n\t  }\n\t\n\t  _createClass(PropertyProxy, [{\n\t    key: \"getOwnDescriptor\",\n\t    value: function getOwnDescriptor() {\n\t      var desc = Object.getOwnPropertyDescriptor(this.host, this.key);\n\t\n\t      if (desc) {\n\t        if (!desc.configurable) {\n\t          throw new TypeError(\"Cannot create proxy for not configurable property '\" + this.key + \"'\");\n\t        }\n\t        if (!desc.get && !desc.set && !desc.writable) {\n\t          throw new TypeError(\"Cannot create proxy for readonly property '\" + this.key + \"'\");\n\t        }\n\t      }\n\t\n\t      return desc;\n\t    }\n\t  }, {\n\t    key: \"getProtoDescriptor\",\n\t    value: function getProtoDescriptor() {\n\t      var _this = this;\n\t\n\t      var desc = undefined,\n\t          host = Object.getPrototypeOf(this.host);\n\t\n\t      while (host) {\n\t        desc = Object.getOwnPropertyDescriptor(host, this.key);\n\t        if (desc) {\n\t          break;\n\t        } else {\n\t          host = Object.getPrototypeOf(host);\n\t        }\n\t      }\n\t\n\t      if (desc) {\n\t        if (!desc.get && !desc.set) {\n\t          desc.get = function () {\n\t            delete _this.host[_this.key];\n\t            var value = _this.host[_this.key];\n\t            _this.on();\n\t            return value;\n\t          };\n\t          desc.set = function (newVal) {\n\t            delete _this.host[_this.key];\n\t            _this.host[_this.key] = newVal;\n\t            _this.on();\n\t          };\n\t        }\n\t      }\n\t\n\t      return desc;\n\t    }\n\t  }, {\n\t    key: \"on\",\n\t    value: function on() {\n\t      var desc = this.getOwnDescriptor();\n\t\n\t      if (desc) {\n\t        this.ownProperty = true;\n\t      } else {\n\t        this.ownProperty = false;\n\t        desc = this.getProtoDescriptor();\n\t      }\n\t\n\t      if (!desc) {\n\t        this.ownProperty = true;\n\t        this.notDefined = true;\n\t        desc = {\n\t          enumerable: true,\n\t          writable: true,\n\t          configurable: true\n\t        };\n\t      }\n\t\n\t      this.desc = desc;\n\t      this.value = this.host[this.key];\n\t\n\t      Object.defineProperty(this.host, this.key, {\n\t        configurable: true,\n\t        enumerable: this.desc.enumerable,\n\t        get: this.get.bind(this),\n\t        set: this.set.bind(this)\n\t      });\n\t    }\n\t  }, {\n\t    key: \"off\",\n\t    value: function off() {\n\t      if (this.ownProperty) {\n\t        if (this.notDefined) {\n\t          delete this.host[this.key];\n\t        } else {\n\t          if (!this.desc.get && !this.desc.set) {\n\t            this.desc.value = this.value;\n\t          }\n\t          Object.defineProperty(this.host, this.key, this.desc);\n\t        }\n\t      } else {\n\t        delete this.host[this.key];\n\t      }\n\t    }\n\t  }, {\n\t    key: \"get\",\n\t    value: function get() {\n\t      if (this.desc.get) {\n\t        this.value = this.desc.get.call(this.host);\n\t      }\n\t      this.getter(this.value);\n\t      return this.value;\n\t    }\n\t  }, {\n\t    key: \"set\",\n\t    value: function set(newValue) {\n\t      this.notDefined = false;\n\t\n\t      if (this.desc.set) {\n\t        this.desc.set.call(this.host, newValue);\n\t      }\n\t\n\t      if (this.desc.writable || this.desc.get || this.desc.set) {\n\t        this.value = newValue;\n\t      }\n\t\n\t      this.setter(this.value);\n\t    }\n\t  }]);\n\t\n\t  return PropertyProxy;\n\t})();\n\t\n\texports.default = PropertyProxy;\n\n/***/ },\n/* 8 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.default = Link;\n\t\n\tvar _Expression = __webpack_require__(9);\n\t\n\tvar _Expression2 = _interopRequireDefault(_Expression);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar Wrapper = (function () {\n\t  function Wrapper(node) {\n\t    _classCallCheck(this, Wrapper);\n\t\n\t    this.node = node;\n\t  }\n\t\n\t  _createClass(Wrapper, [{\n\t    key: 'get',\n\t    value: function get() {\n\t      return this.node.value;\n\t    }\n\t  }, {\n\t    key: 'set',\n\t    value: function set(value) {\n\t      this.value = value;\n\t\n\t      if (this.node.value !== value) {\n\t        this.node.value = value;\n\t      }\n\t    }\n\t  }, {\n\t    key: 'observe',\n\t    value: function observe(cb) {\n\t      this.node.addEventListener('input', cb);\n\t    }\n\t  }]);\n\t\n\t  return Wrapper;\n\t})();\n\t\n\tvar CheckWrapper = (function (_Wrapper) {\n\t  _inherits(CheckWrapper, _Wrapper);\n\t\n\t  function CheckWrapper() {\n\t    _classCallCheck(this, CheckWrapper);\n\t\n\t    return _possibleConstructorReturn(this, Object.getPrototypeOf(CheckWrapper).apply(this, arguments));\n\t  }\n\t\n\t  _createClass(CheckWrapper, [{\n\t    key: 'get',\n\t    value: function get() {\n\t      return this.node.checked ? this.node.value : undefined;\n\t    }\n\t  }, {\n\t    key: 'set',\n\t    value: function set(value) {\n\t      if (this.node.value === value) {\n\t        this.node.checked = true;\n\t      } else {\n\t        this.node.checked = false;\n\t      }\n\t    }\n\t  }, {\n\t    key: 'observe',\n\t    value: function observe(cb) {\n\t      this.node.addEventListener('change', cb);\n\t    }\n\t  }]);\n\t\n\t  return CheckWrapper;\n\t})(Wrapper);\n\t\n\tvar SelectWrapper = (function (_Wrapper2) {\n\t  _inherits(SelectWrapper, _Wrapper2);\n\t\n\t  function SelectWrapper(node) {\n\t    _classCallCheck(this, SelectWrapper);\n\t\n\t    var _this2 = _possibleConstructorReturn(this, Object.getPrototypeOf(SelectWrapper).call(this, node));\n\t\n\t    if ('MutationObserver' in window) {\n\t      new MutationObserver(function () {\n\t        _this2.set(_this2.value);\n\t      }).observe(node, {\n\t        attributes: true,\n\t        childList: true,\n\t        characterData: true,\n\t        subtree: true\n\t      });\n\t    }\n\t    return _this2;\n\t  }\n\t\n\t  _createClass(SelectWrapper, [{\n\t    key: 'set',\n\t    value: function set(value) {\n\t      this.value = value;\n\t\n\t      Array.from(this.node.options).some(function (o) {\n\t        if (o.value === value) {\n\t          o.selected = true;\n\t          return true;\n\t        }\n\t      });\n\t    }\n\t  }, {\n\t    key: 'observe',\n\t    value: function observe(cb) {\n\t      this.node.addEventListener('change', cb);\n\t    }\n\t  }]);\n\t\n\t  return SelectWrapper;\n\t})(Wrapper);\n\t\n\tvar MultiSelectWrapper = (function (_SelectWrapper) {\n\t  _inherits(MultiSelectWrapper, _SelectWrapper);\n\t\n\t  function MultiSelectWrapper() {\n\t    _classCallCheck(this, MultiSelectWrapper);\n\t\n\t    return _possibleConstructorReturn(this, Object.getPrototypeOf(MultiSelectWrapper).apply(this, arguments));\n\t  }\n\t\n\t  _createClass(MultiSelectWrapper, [{\n\t    key: 'get',\n\t    value: function get() {\n\t      var values = this.value || [];\n\t      var newValues = Array.from(this.node.options).filter(function (o) {\n\t        return o.selected;\n\t      }).map(function (o) {\n\t        return o.value;\n\t      });\n\t\n\t      Object.assign(values, newValues);\n\t      values.length = newValues.length;\n\t\n\t      return values;\n\t    }\n\t  }, {\n\t    key: 'set',\n\t    value: function set(values) {\n\t      this.value = values;\n\t\n\t      if (!Array.isArray(values)) {\n\t        throw new Error('Invalid values. Array instance required.');\n\t      }\n\t\n\t      Array.from(this.node.options).forEach(function (o) {\n\t        o.selected = values.some(function (v) {\n\t          return v === o.value;\n\t        });\n\t      });\n\t    }\n\t  }]);\n\t\n\t  return MultiSelectWrapper;\n\t})(SelectWrapper);\n\t\n\tfunction Link(engine, node, evaluate) {\n\t  var wrapper = undefined;\n\t\n\t  switch (node.type) {\n\t    case \"checkbox\":\n\t    case \"radio\":\n\t      wrapper = new CheckWrapper(node);\n\t      break;\n\t\n\t    case \"select-one\":\n\t      wrapper = new SelectWrapper(node);\n\t      break;\n\t\n\t    case \"select-multiple\":\n\t      wrapper = new MultiSelectWrapper(node);\n\t      break;\n\t\n\t    default:\n\t      wrapper = new Wrapper(node);\n\t  }\n\t\n\t  var expr = new _Expression2.default(engine, evaluate);\n\t\n\t  expr.set(wrapper.get(), true);\n\t  expr.observe(wrapper.set.bind(wrapper), true, false);\n\t  wrapper.observe(function () {\n\t    return expr.set(wrapper.get());\n\t  });\n\t}\n\n/***/ },\n/* 9 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\t\n\tvar _slicedToArray = (function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; })();\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _papillon = __webpack_require__(2);\n\t\n\tvar _Engine = __webpack_require__(1);\n\t\n\tvar _Engine2 = _interopRequireDefault(_Engine);\n\t\n\tvar _Path = __webpack_require__(10);\n\t\n\tvar _Path2 = _interopRequireDefault(_Path);\n\t\n\tvar _Flags = __webpack_require__(11);\n\t\n\tvar _Flags2 = _interopRequireDefault(_Flags);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar Expression = (function () {\n\t  _createClass(Expression, null, [{\n\t    key: 'parse',\n\t    value: function parse(evaluate) {\n\t      var _evaluate$split = evaluate.split('|');\n\t\n\t      var _evaluate$split2 = _slicedToArray(_evaluate$split, 2);\n\t\n\t      var temp = _evaluate$split2[0];\n\t      var filter = _evaluate$split2[1];\n\t\n\t      var flags = new Set();\n\t\n\t      for (var index = 0; index < temp.length; index++) {\n\t        if (_Flags2.default[temp[index]]) {\n\t          flags.add(temp[index]);\n\t        } else {\n\t          break;\n\t        }\n\t      }\n\t\n\t      var expr = temp.substr(index);\n\t      return [flags, expr, filter];\n\t    }\n\t  }]);\n\t\n\t  function Expression(engine, evaluate) {\n\t    var _this = this;\n\t\n\t    _classCallCheck(this, Expression);\n\t\n\t    if (!evaluate || typeof evaluate !== 'string') {\n\t      throw new TypeError('\\'' + evaluate + '\\': Invalid input type.');\n\t    }\n\t\n\t    var _Expression$parse = Expression.parse(evaluate.trim());\n\t\n\t    var _Expression$parse2 = _slicedToArray(_Expression$parse, 3);\n\t\n\t    var flags = _Expression$parse2[0];\n\t    var expr = _Expression$parse2[1];\n\t    var filter = _Expression$parse2[2];\n\t\n\t    this.engine = engine;\n\t    this.filter = { get: function get(v) {\n\t        return v;\n\t      }, set: function set(v) {\n\t        return v;\n\t      } };\n\t\n\t    if (this.engine.state) {\n\t      this.context = function () {\n\t        return _this.engine.state;\n\t      };\n\t    } else {\n\t      this.context = function () {\n\t        if (_this.engine.state === undefined) {\n\t          _this.engine.state = {};\n\t        }\n\t        return _this.engine.state;\n\t      };\n\t    }\n\t\n\t    if (filter) {\n\t      var filters = _Engine2.default.config(engine).filters;\n\t      if (!filters[filter]) {\n\t        throw new ReferenceError('Filter \\'' + filter + '\\' not found.');\n\t      }\n\t      Object.assign(this.filter, filters[filter]);\n\t    }\n\t\n\t    flags.forEach(function (f) {\n\t      return _Flags2.default[f](_this, engine);\n\t    });\n\t    this.path = new _Path2.default(expr, this.context);\n\t  }\n\t\n\t  _createClass(Expression, [{\n\t    key: 'get',\n\t    value: function get() {\n\t      return this.filter.get(this.path.get());\n\t    }\n\t  }, {\n\t    key: 'set',\n\t    value: function set(value, onlyDefaults) {\n\t      return this.path.set(this.filter.set(value), onlyDefaults);\n\t    }\n\t  }, {\n\t    key: 'call',\n\t    value: function call() {\n\t      var _path;\n\t\n\t      return (_path = this.path).call.apply(_path, arguments);\n\t    }\n\t  }, {\n\t    key: 'observe',\n\t    value: function observe(cb) {\n\t      var _this2 = this;\n\t\n\t      var init = arguments.length <= 1 || arguments[1] === undefined ? false : arguments[1];\n\t      var deep = arguments.length <= 2 || arguments[2] === undefined ? this.deep : arguments[2];\n\t\n\t      var target = undefined;\n\t      var cache = this.get();\n\t\n\t      if (deep) {\n\t        target = new _papillon.State(Object.defineProperty({}, 'value', {\n\t          get: this.get.bind(this),\n\t          configurable: true,\n\t          enumerable: true\n\t        }));\n\t      }\n\t\n\t      _Engine2.default.watch(this.engine, function () {\n\t        var newVal = _this2.get();\n\t\n\t        if (target && target.isChanged()) {\n\t          cb(newVal, target.changelog.value);\n\t        } else if (!_papillon.State.is(newVal, cache)) {\n\t          cb(newVal);\n\t        }\n\t\n\t        cache = newVal;\n\t      });\n\t\n\t      if (init) {\n\t        cb(cache);\n\t      }\n\t    }\n\t  }]);\n\t\n\t  return Expression;\n\t})();\n\t\n\texports.default = Expression;\n\n/***/ },\n/* 10 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar Path = (function () {\n\t  function Path(evaluate, context) {\n\t    _classCallCheck(this, Path);\n\t\n\t    if (!evaluate) {\n\t      throw new TypeError('Path cannot be empty.');\n\t    }\n\t\n\t    this.evaluate = evaluate;\n\t    this.context = context;\n\t    this.path = this.parse(evaluate);\n\t  }\n\t\n\t  _createClass(Path, [{\n\t    key: 'parse',\n\t    value: function parse(path) {\n\t      var result = [];\n\t\n\t      var property = path.split('').reduce(function (acc, char) {\n\t        switch (char) {\n\t          case \".\":\n\t            result.push({ property: acc, proto: Object });\n\t            return \"\";\n\t          case \"[\":\n\t            result.push({ property: acc, proto: Array });\n\t            return \"\";\n\t          case \"]\":\n\t            return acc;\n\t        }\n\t\n\t        return acc + char;\n\t      }, \"\");\n\t\n\t      result.push({ property: property });\n\t\n\t      return result;\n\t    }\n\t  }, {\n\t    key: 'getContext',\n\t    value: function getContext() {\n\t      var context = this.context();\n\t      if (Object(context) !== context) {\n\t        throw new TypeError('Object required as path context.');\n\t      }\n\t      return context;\n\t    }\n\t  }, {\n\t    key: 'get',\n\t    value: function get() {\n\t      var _this = this;\n\t\n\t      var result = this.getContext();\n\t\n\t      if (result) {\n\t        this.path.every(function (_ref) {\n\t          var property = _ref.property;\n\t          var proto = _ref.proto;\n\t\n\t          result = result[property];\n\t\n\t          if (result && proto && !(result instanceof Object)) {\n\t            throw new TypeError('\\'' + property + '\\' in \\'' + _this.evaluate + '\\': Object instance required.');\n\t          }\n\t\n\t          return result;\n\t        });\n\t      }\n\t\n\t      return result;\n\t    }\n\t  }, {\n\t    key: 'set',\n\t    value: function set(newVal) {\n\t      var _this2 = this;\n\t\n\t      var check = arguments.length <= 1 || arguments[1] === undefined ? false : arguments[1];\n\t\n\t      var _path$reduce = this.path.reduce(function (acc, _ref2) {\n\t        var property = _ref2.property;\n\t        var proto = _ref2.proto;\n\t\n\t        if (proto) {\n\t          if (!acc.context[property]) {\n\t            acc.context[property] = proto();\n\t          } else if (!(acc.context[property] instanceof Object)) {\n\t            throw new TypeError('\\'' + property + '\\' in \\'' + _this2.evaluate + '\\': Object instance required.');\n\t          }\n\t\n\t          acc.context = acc.context[property];\n\t        } else {\n\t          acc.property = property;\n\t        }\n\t\n\t        return acc;\n\t      }, { context: this.getContext() });\n\t\n\t      var context = _path$reduce.context;\n\t      var property = _path$reduce.property;\n\t\n\t      if (!check || context[property] === undefined) {\n\t        context[property] = newVal;\n\t      }\n\t\n\t      return context[property];\n\t    }\n\t  }, {\n\t    key: 'call',\n\t    value: function call() {\n\t      var _this3 = this;\n\t\n\t      var _path$reduce2 = this.path.reduce(function (acc, _ref3) {\n\t        var property = _ref3.property;\n\t        var proto = _ref3.proto;\n\t\n\t        if (proto) {\n\t          acc.context = acc.context[property];\n\t          if (!(acc.context instanceof Object)) {\n\t            throw new TypeError('\\'' + property + '\\' in \\'' + _this3.evaluate + '\\': Object instance required.');\n\t          }\n\t        } else {\n\t          acc.property = property;\n\t        }\n\t\n\t        return acc;\n\t      }, { context: this.getContext() });\n\t\n\t      var context = _path$reduce2.context;\n\t      var property = _path$reduce2.property;\n\t\n\t      if (typeof context[property] !== 'function') {\n\t        throw new TypeError('\\'' + this.evaluate + '\\': Function required.');\n\t      }\n\t\n\t      return context[property].apply(context, arguments);\n\t    }\n\t  }, {\n\t    key: 'delete',\n\t    value: function _delete() {\n\t      var context = this.getContext();\n\t      var result = { context: context, property: this.path[0].property };\n\t\n\t      this.path.some(function (_ref4) {\n\t        var property = _ref4.property;\n\t\n\t        if (!context.hasOwnProperty(property)) {\n\t          return true;\n\t        }\n\t\n\t        if (Object.keys(context).length > 1) {\n\t          result = { context: context, property: property };\n\t        }\n\t\n\t        context = context[property];\n\t      });\n\t\n\t      delete result.context[result.property];\n\t    }\n\t  }]);\n\t\n\t  return Path;\n\t})();\n\t\n\texports.default = Path;\n\n/***/ },\n/* 11 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\tvar Flags = {\n\t  '!': function _(expr) {\n\t    var filter = expr.filter;\n\t    expr.filter = {\n\t      get: function get(v) {\n\t        return filter.get(!v);\n\t      }, set: function set(v) {\n\t        return filter.set(!v);\n\t      }\n\t    };\n\t  },\n\t  '@': function _(expr, engine) {\n\t    expr.context = function () {\n\t      return engine;\n\t    };\n\t  },\n\t  '&': function _(expr) {\n\t    expr.set = function () {};\n\t  },\n\t  '*': function _(expr) {\n\t    expr.deep = true;\n\t  }\n\t};\n\t\n\texports.default = Flags;\n\n/***/ },\n/* 12 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.default = ClassList;\n\t\n\tvar _Expression = __webpack_require__(9);\n\t\n\tvar _Expression2 = _interopRequireDefault(_Expression);\n\t\n\tvar _List = __webpack_require__(13);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction ClassList(engine, node, evaluate) {\n\t  (0, _List.list)(evaluate, function (name, value) {\n\t    var expr = new _Expression2.default(engine, value);\n\t\n\t    expr.set(node.classList.contains(name), true);\n\t    expr.observe(function (val) {\n\t      if (val) {\n\t        node.classList.add(name);\n\t      } else {\n\t        node.classList.remove(name);\n\t      }\n\t    }, true, false);\n\t  });\n\t}\n\n/***/ },\n/* 13 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tvar _slicedToArray = (function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; })();\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.list = list;\n\tfunction list(evaluate, cb) {\n\t  evaluate.split(';').forEach(function (v) {\n\t    var _v$split = v.split(':');\n\t\n\t    var _v$split2 = _slicedToArray(_v$split, 2);\n\t\n\t    var name = _v$split2[0];\n\t    var value = _v$split2[1];\n\t\n\t    if (!name || !value) {\n\t      throw new SyntaxError('\\'' + v + '\\': Invalid list element.');\n\t    }\n\t\n\t    cb(name.trim(), value.trim());\n\t  });\n\t}\n\n/***/ },\n/* 14 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.default = Context;\n\t\n\tvar _Template = __webpack_require__(15);\n\t\n\tvar _Template2 = _interopRequireDefault(_Template);\n\t\n\tvar _Expression = __webpack_require__(9);\n\t\n\tvar _Expression2 = _interopRequireDefault(_Expression);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _typeof(obj) { return obj && typeof Symbol !== \"undefined\" && obj.constructor === Symbol ? \"symbol\" : typeof obj; }\n\t\n\tfunction Context(engine, node, evaluate) {\n\t  if (!node.children[0]) {\n\t    throw new Error('No children elements.');\n\t  }\n\t\n\t  var template = new _Template2.default(Array.from(node.childNodes).filter(function (n) {\n\t    return n.nodeType === Node.ELEMENT_NODE;\n\t  }), engine);\n\t\n\t  var expr = new _Expression2.default(engine, evaluate);\n\t\n\t  expr.set({}, true);\n\t  expr.observe(function (state) {\n\t    if (!state) {\n\t      template.remove();\n\t    } else {\n\t      if ((typeof state === 'undefined' ? 'undefined' : _typeof(state)) !== 'object') {\n\t        throw new TypeError('Invalid context target.');\n\t      }\n\t      template.setState(state).append();\n\t    }\n\t  }, true, true);\n\t}\n\t\n\tContext._options = {\n\t  breakCompile: true\n\t};\n\n/***/ },\n/* 15 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _Engine = __webpack_require__(1);\n\t\n\tvar _Engine2 = _interopRequireDefault(_Engine);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar Template = (function () {\n\t  function Template(nodes, engine, host) {\n\t    _classCallCheck(this, Template);\n\t\n\t    this.nodes = [].concat(nodes);\n\t    this.host = host || this.nodes[0].parentElement;\n\t    this.parentEngine = engine;\n\t\n\t    if (!this.host) {\n\t      throw new Error('Invalid host for template.');\n\t    }\n\t\n\t    if (!this.nodes[0].parentElement) {\n\t      this.hidden = true;\n\t    }\n\t  }\n\t\n\t  _createClass(Template, [{\n\t    key: 'getState',\n\t    value: function getState() {\n\t      if (!this.engine) {\n\t        throw new Error('Template does not fully initalized.');\n\t      }\n\t\n\t      return this.engine.state;\n\t    }\n\t  }, {\n\t    key: 'setState',\n\t    value: function setState(state) {\n\t      if (!this.engine) {\n\t        this.engine = _Engine2.default.spawn(this.parentEngine, this.nodes, state);\n\t      } else {\n\t        this.engine.state = state;\n\t      }\n\t\n\t      return this;\n\t    }\n\t  }, {\n\t    key: 'append',\n\t    value: function append() {\n\t      var _this = this;\n\t\n\t      var forceAppend = arguments.length <= 0 || arguments[0] === undefined ? false : arguments[0];\n\t      var insertBefore = arguments.length <= 1 || arguments[1] === undefined ? null : arguments[1];\n\t\n\t      if (this.hidden || forceAppend) {\n\t        this.nodes.forEach(function (node) {\n\t          _this.host.insertBefore(node, insertBefore);\n\t        });\n\t        this.hidden = false;\n\t      }\n\t\n\t      return this;\n\t    }\n\t  }, {\n\t    key: 'remove',\n\t    value: function remove() {\n\t      var _this2 = this;\n\t\n\t      if (!this.hidden) {\n\t        (function () {\n\t          var fragment = document.createDocumentFragment();\n\t          _this2.nodes.forEach(function (node) {\n\t            return fragment.appendChild(node);\n\t          });\n\t          _this2.hidden = true;\n\t        })();\n\t      }\n\t\n\t      return this;\n\t    }\n\t  }, {\n\t    key: 'clone',\n\t    value: function clone() {\n\t      return new this.constructor(this.nodes.map(function (node) {\n\t        return node.cloneNode(true);\n\t      }), this.parentEngine, this.host);\n\t    }\n\t  }]);\n\t\n\t  return Template;\n\t})();\n\t\n\texports.default = Template;\n\n/***/ },\n/* 16 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.default = EventListener;\n\t\n\tvar _Expression = __webpack_require__(9);\n\t\n\tvar _Expression2 = _interopRequireDefault(_Expression);\n\t\n\tvar _List = __webpack_require__(13);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction EventListener(engine, node, evaluate) {\n\t  (0, _List.list)(evaluate, function (name, value) {\n\t    var expr = new _Expression2.default(engine, value);\n\t    node.addEventListener(name, function (e) {\n\t      return expr.call(e);\n\t    });\n\t  });\n\t}\n\n/***/ },\n/* 17 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.default = Foreach;\n\t\n\tvar _IndexedTemplate = __webpack_require__(18);\n\t\n\tvar _IndexedTemplate2 = _interopRequireDefault(_IndexedTemplate);\n\t\n\tvar _Expression = __webpack_require__(9);\n\t\n\tvar _Expression2 = _interopRequireDefault(_Expression);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar Controller = (function () {\n\t  function Controller(engine, node, evaluate) {\n\t    _classCallCheck(this, Controller);\n\t\n\t    if (!node.children[0]) {\n\t      throw new Error('No children elements.');\n\t    }\n\t\n\t    this.engine = engine;\n\t    this.node = node;\n\t\n\t    var expr = new _Expression2.default(engine, evaluate);\n\t    var list = expr.get();\n\t    var createFromView = false;\n\t\n\t    if (list === undefined) {\n\t      list = expr.set([], true);\n\t      createFromView = true;\n\t    }\n\t\n\t    if (!Array.isArray(list)) {\n\t      throw new TypeError('Invalid foreach target.');\n\t    }\n\t\n\t    if (createFromView) {\n\t      this.items = this.createFromView(list);\n\t      this.template = this.items[this.items.length - 1].clone();\n\t    } else {\n\t      this.items = this.createFromList(list);\n\t\n\t      if (this.items.length) {\n\t        this.template = this.items[this.items.length - 1].clone();\n\t      } else {\n\t        this.template = new _IndexedTemplate2.default(node.children[0], this.engine);\n\t      }\n\t\n\t      this.clear(list);\n\t    }\n\t\n\t    expr.observe(this.render.bind(this), false, true);\n\t  }\n\t\n\t  _createClass(Controller, [{\n\t    key: 'createFromView',\n\t    value: function createFromView(list) {\n\t      var _this = this;\n\t\n\t      var length = this.node.children.length;\n\t\n\t      return Array.from(this.node.children).map(function (child, index) {\n\t        var temp = new _IndexedTemplate2.default(child, _this.engine);\n\t\n\t        list[index] = temp.setState(list[index], { index: index, length: length }).getState();\n\t\n\t        return temp;\n\t      });\n\t    }\n\t  }, {\n\t    key: 'createFromList',\n\t    value: function createFromList(list) {\n\t      var _this2 = this;\n\t\n\t      var length = list.length;\n\t      var temp = undefined;\n\t\n\t      return list.map(function (item, index) {\n\t        if (_this2.node.children[index]) {\n\t          temp = new _IndexedTemplate2.default(_this2.node.children[index], _this2.engine).setState(list[index], { index: index, length: length });\n\t        } else {\n\t          temp = temp.clone().setState(list[index], { index: index, length: length }).append(true);\n\t        }\n\t\n\t        list[index] = temp.getState();\n\t\n\t        return temp;\n\t      });\n\t    }\n\t  }, {\n\t    key: 'clear',\n\t    value: function clear(list) {\n\t      var index = list.length;\n\t      var max = this.node.children.length;\n\t      for (var i = index; i < max; i++) {\n\t        this.node.removeChild(this.node.children[index]);\n\t      }\n\t    }\n\t  }, {\n\t    key: 'render',\n\t    value: function render(list) {\n\t      var _this3 = this;\n\t\n\t      var _ref = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];\n\t\n\t      var type = _ref.type;\n\t      var changelog = _ref.changelog;\n\t\n\t      if (!Array.isArray(list)) {\n\t        throw new TypeError('Invalid foreach target.');\n\t      }\n\t\n\t      var length = list.length;\n\t\n\t      switch (type) {\n\t        case 'modify':\n\t          Object.assign(this.items, Object.keys(changelog).reduce(function (items, key) {\n\t            var _changelog$key = changelog[key];\n\t            var type = _changelog$key.type;\n\t            var oldKey = _changelog$key.oldKey;\n\t            var newKey = _changelog$key.newKey;\n\t\n\t            if (type === 'delete') {\n\t              if (_this3.items[key]) {\n\t                _this3.items[key].remove();\n\t              }\n\t            } else {\n\t              var index = parseInt(key, 10);\n\t              var temp = _this3.items[oldKey || key];\n\t              var append = false;\n\t\n\t              if (oldKey) {\n\t                if (_this3.items[key]) {\n\t                  _this3.items[key].remove();\n\t                }\n\t                _this3.items[oldKey] = null;\n\t              }\n\t\n\t              if (!temp || newKey && !oldKey) {\n\t                temp = _this3.template.clone();\n\t                append = true;\n\t              }\n\t\n\t              temp.setState(list[key], { index: index, length: length });\n\t\n\t              if (append || oldKey) {\n\t                temp.append(true, _this3.node.children[index]);\n\t              }\n\t\n\t              items[key] = temp;\n\t            }\n\t\n\t            return items;\n\t          }, {}));\n\t\n\t          this.items.length = list.length;\n\t\n\t          break;\n\t\n\t        case 'set':\n\t          var itemsLength = this.items.length;\n\t          var items = list.map(function (item, index) {\n\t            var temp = undefined;\n\t\n\t            if (index < itemsLength) {\n\t              temp = _this3.items[index];\n\t            } else {\n\t              temp = _this3.template.clone().append(true);\n\t            }\n\t\n\t            temp.setState(item, { index: index, length: length });\n\t\n\t            return temp;\n\t          });\n\t\n\t          for (var i = length; i < itemsLength; i++) {\n\t            this.items[i].remove();\n\t          }\n\t\n\t          this.items = items;\n\t      }\n\t    }\n\t  }]);\n\t\n\t  return Controller;\n\t})();\n\t\n\tfunction Foreach(engine, node, evaluate) {\n\t  return new Controller(engine, node, evaluate);\n\t}\n\t\n\tForeach._options = {\n\t  breakCompile: true\n\t};\n\n/***/ },\n/* 18 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\t\n\tvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _Template2 = __webpack_require__(15);\n\t\n\tvar _Template3 = _interopRequireDefault(_Template2);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar map = new WeakMap();\n\t\n\tfunction extendEngine(engine) {\n\t  if (map.has(engine)) {\n\t    return map.get(engine);\n\t  } else {\n\t    var extended = Object.defineProperties(Object.create(engine), {\n\t      number: { get: function get() {\n\t          return this.index + 1;\n\t        } },\n\t      odd: { get: function get() {\n\t          return this.number % 2 !== 0;\n\t        } },\n\t      even: { get: function get() {\n\t          return this.number % 2 === 0;\n\t        } },\n\t      first: { get: function get() {\n\t          return this.index === 0;\n\t        } },\n\t      last: { get: function get() {\n\t          return this.length === this.number;\n\t        } }\n\t    });\n\t\n\t    map.set(engine, extended);\n\t\n\t    return extended;\n\t  }\n\t}\n\t\n\tvar IndexedTemplate = (function (_Template) {\n\t  _inherits(IndexedTemplate, _Template);\n\t\n\t  function IndexedTemplate(nodes, engine, host) {\n\t    _classCallCheck(this, IndexedTemplate);\n\t\n\t    return _possibleConstructorReturn(this, Object.getPrototypeOf(IndexedTemplate).call(this, nodes, extendEngine(engine), host));\n\t  }\n\t\n\t  _createClass(IndexedTemplate, [{\n\t    key: 'setState',\n\t    value: function setState(state, _ref) {\n\t      var index = _ref.index;\n\t      var length = _ref.length;\n\t\n\t      _get(Object.getPrototypeOf(IndexedTemplate.prototype), 'setState', this).call(this, state);\n\t      Object.assign(this.engine, { index: index, length: length });\n\t\n\t      return this;\n\t    }\n\t  }]);\n\t\n\t  return IndexedTemplate;\n\t})(_Template3.default);\n\t\n\texports.default = IndexedTemplate;\n\n/***/ },\n/* 19 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.default = Property;\n\t\n\tvar _Expression = __webpack_require__(9);\n\t\n\tvar _Expression2 = _interopRequireDefault(_Expression);\n\t\n\tvar _List = __webpack_require__(13);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction Property(engine, node, evaluate) {\n\t  (0, _List.list)(evaluate, function (name, value) {\n\t    var accessor = resolveProperty(node, name);\n\t    var expr = new _Expression2.default(engine, value);\n\t\n\t    expr.set(accessor.get(), true);\n\t    expr.observe(accessor.set, true);\n\t  });\n\t}\n\t\n\tfunction resolveProperty(node, name) {\n\t  if (name in node) {\n\t    return {\n\t      get: function get() {\n\t        return node[name];\n\t      },\n\t      set: function set(value) {\n\t        return node[name] = value;\n\t      }\n\t    };\n\t  } else {\n\t    return {\n\t      get: function get() {\n\t        var val = node.getAttribute(name);\n\t        return val ? val : undefined;\n\t      },\n\t      set: function set(value) {\n\t        if (value === false || value === undefined || value === null) {\n\t          node.removeAttribute(name);\n\t        } else {\n\t          node.setAttribute(name, value === true ? name : value);\n\t        }\n\t      }\n\t    };\n\t  }\n\t}\n\n/***/ },\n/* 20 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.default = Text;\n\t\n\tvar _Property = __webpack_require__(19);\n\t\n\tvar _Property2 = _interopRequireDefault(_Property);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction Text(engine, node, evaluate) {\n\t  (0, _Property2.default)(engine, node, 'textContent: ' + evaluate);\n\t}\n\n/***/ }\n/******/ ])\n});\n;\n\n\n/** WEBPACK FOOTER **\n ** linked-html.js\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap ae9f14592c6fe9adb4e8\n **/","import { State } from 'papillon/papillon';\n\nimport Link from './Markers/Link';\nimport ClassList from './Markers/ClassList';\nimport Context from './Markers/Context';\nimport EventListener from './Markers/EventListener';\nimport Foreach from './Markers/Foreach';\nimport Property from './Markers/Property';\nimport Text from './Markers/Text';\n\nconst Markers = {\n  link: Link,\n  class: ClassList,\n  context: Context,\n  on: EventListener,\n  foreach: Foreach,\n  prop: Property,\n  text: Text\n};\n\nconst Filters = {\n  int: { set: v => parseInt(v, 10), get: String },\n  bool: { set: Boolean, get: String }\n};\n\nconst watchers = new WeakMap();\nconst configs = new WeakMap();\nconst states = new WeakMap();\n\nexport default class Engine {\n  static watch(engine, cb) {\n    let e = watchers.get(engine);\n    if (!e) {\n      e = new Set();\n      watchers.set(engine, e);\n    }\n    e.add(cb);\n  }\n\n  static config(engine) {\n    let c = configs.get(engine.root);\n    if (!c) {\n      c = {};\n      configs.set(engine, c);\n    }\n    return c;\n  }\n\n  static queue(engine) {\n    if (!this._request) {\n      State.now();\n\n      this._engines = new Set().add(engine);\n      this._request = window.requestAnimationFrame(()=> {\n        this._engines.forEach(e => {\n          const set = watchers.get(e);\n          if (set) {\n            set.forEach(cb => cb());\n          }\n        });\n        this._request = this._engines = undefined;\n      });\n    } else {\n      this._engines.add(engine);\n    }\n  }\n\n  static spawn(engine, nodeList, state) {\n    const config = Engine.config(engine);\n    const childEngine = Object.create(engine);\n\n    Object.defineProperty(childEngine, 'parent', { value: engine });\n    childEngine.state = state;\n\n    nodeList.forEach(\n      node => compile(node, childEngine, config.prefix, config.markers)\n    );\n\n    return childEngine;\n  }\n\n  constructor(node, {state, markers, filters, prefix, live} = {}) {\n    if (state && Object(state) !== state) {\n      throw TypeError(`Invalid 'state' option, object required.`);\n    }\n\n    const config = Object.defineProperties(Engine.config(this), {\n      markers: { value: Object.assign({}, Markers, markers) },\n      filters: { value: Object.assign({}, Filters, filters) },\n      prefix: { value: (prefix || '-') + '-' },\n      live: { value: live === undefined ? true : live }\n    });\n\n    Object.defineProperty(this, 'root', { value: this });\n    this.state = state || {};\n\n    switch(node.nodeType) {\n      case Node.ELEMENT_NODE:\n        compile(node, this, config.prefix, config.markers);\n        break;\n      case Node.DOCUMENT_FRAGMENT_NODE:\n        Array.from(node.children).forEach(\n          node => compile(node, this, config.prefix, config.markers)\n        );\n        break;\n      default:\n        throw new TypeError('Element or DocumentFragment required.');\n    }\n  }\n\n  get state() {\n    const s = states.get(this);\n    if ((typeof s === 'object') && s !== null) {\n      Engine.queue(this);\n    }\n    return s;\n  }\n\n  set state(value) {\n    states.set(this, value);\n    Engine.queue(this);\n  }\n}\n\nfunction compile(node, engine, prefix, markers) {\n  const prefixLength = prefix.length;\n  const compileChilds = Array.from(node.attributes)\n    .filter(a => a.name.substr(0, prefixLength) === prefix)\n    .reduce((acc, attr) => {\n      const id = attr.name.substr(prefixLength)\n        .replace(/-([a-z])/g, g => g[1].toUpperCase());\n\n      const marker = markers[id];\n\n      try {\n        if (!marker) {\n          throw new ReferenceError(`marker '${id}' not found.`);\n        }\n        marker(engine, node, attr.value);\n      } catch(e) {\n        const nodeText = node.outerHTML.match(/^<[^<]+>/i);\n        e.message = `: ${e.message}\\n'${id}' -> ${nodeText}`;\n        throw e;\n      }\n\n      if (marker._options && marker._options.breakCompile) {\n        return false;\n      }\n\n      return acc;\n    }, true);\n\n  if (compileChilds && node.children.length) {\n    Array.from(node.children).forEach(\n      node => compile(node, engine, prefix, markers)\n    );\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/Engine.js\n **/","import KeyMap from './KeyMap';\n\nconst map = new WeakMap();\nlet timestamp = 0;\nlet request = false;\n\nclass State {\n\n  static now() {\n    if (!request) {\n      timestamp = timestamp + 1;\n      request = window.requestAnimationFrame(\n        ()=> request = undefined\n      );\n    }\n    return timestamp;\n  }\n\n  static isObject(target) {\n    return typeof(target) === 'object' && target !== null;\n  }\n\n  static is(v1, v2) {\n    if (v1 === 0 && v2 === 0) {\n      return 1 / v1 === 1 / v2;\n    }\n    if (v1 !== v1) {\n      return v2 !== v2;\n    }\n    return v1 === v2;\n  }\n\n  constructor(target) {\n    if (!State.isObject(target)) {\n      throw new TypeError('Invalid arguments');\n    }\n    const state = map.get(target);\n    if (state) { return state; }\n    map.set(target, this);\n\n    const keyMap = new KeyMap();\n    this.cache = Object.keys(target).reduce((cache, key)=> {\n      let value = cache[key] = target[key];\n      if (State.isObject(value)) {\n        new State(value);\n      }\n      keyMap.set(value, key);\n      return cache;\n    }, {});\n\n    this.keyMap = keyMap;\n    this.target = target;\n    this.lastCheck = State.now();\n    this.lastChange = 0;\n  }\n\n  isChanged() {\n    let timestamp = State.now();\n\n    if (timestamp > this.lastCheck) {\n      let changed = false;\n\n      this.lastCheck = timestamp;\n      this.changelog = {};\n\n      Object.keys(this.cache).forEach((key)=> {\n        if (!this.target.hasOwnProperty(key)) {\n          let value = this.cache[key];\n          this.changelog[key] = { type: 'delete', oldValue: value };\n          changed = true;\n        }\n      });\n\n      const keyMap = new KeyMap();\n      const cacheNewKeys = {};\n      this.cache = Object.keys(this.target).reduce((cache, key)=> {\n        const value = this.target[key];\n\n        if (!this.cache.hasOwnProperty(key)) {\n          this.changelog[key] = { type:'set' };\n          changed = true;\n        } else if (!State.is(value, this.cache[key])) {\n          this.changelog[key] = this.changelog[key] || { type: 'set'};\n          this.changelog[key].oldValue = this.cache[key];\n          changed = true;\n        }\n\n        if (State.isObject(value)) {\n          let nestedState = new State(value);\n          if (nestedState.isChanged()) {\n            changed = true;\n            if (!this.changelog[key]) {\n              this.changelog[key] = { type: 'modify' };\n              this.changelog[key].changelog = nestedState.changelog;\n            }\n          }\n        }\n\n        if (this.changelog[key]) {\n          const oldKey = this.keyMap.shift(value, key);\n          if (oldKey && oldKey !== key && this.target[oldKey] !== value) {\n            this.changelog[key].oldKey = oldKey;\n            if (this.changelog[oldKey]) {\n              this.changelog[oldKey].newKey = key;\n            } else {\n              cacheNewKeys[oldKey] = key;\n            }\n          }\n\n          if (cacheNewKeys[key]) {\n            this.changelog[key].newKey = cacheNewKeys[key];\n          }\n        }\n\n        cache[key] = value;\n        keyMap.set(value, key);\n        return cache;\n      }, {});\n\n      this.keyMap = keyMap;\n\n      if (changed) {\n        this.lastChange = this.lastCheck;\n      } else {\n        this.changelog = undefined;\n      }\n    }\n\n    return this.lastChange === timestamp;\n  }\n}\n\nexport default State;\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/papillon/src/State.js\n **/","class KeyMap {\n    constructor() {\n      this.map = new Map();\n    }\n\n    set(key, value) {\n      let list = this.map.get(key);\n      if (!list) {\n        list = new Set();\n        this.map.set(key, list);\n      }\n\n      if (value) {\n        list.add(value);\n      }\n\n      return list;\n    }\n\n    shift(key, value) {\n      let set = this.map.get(key);\n      if (set && set.size) {\n        if (set.has(value)) {\n          set.delete(value);\n          return value;\n        } else {\n          for(let result of set) {\n            set.delete(result);\n            return result;\n          }\n        }\n      }\n      return false;\n    }\n}\n\nexport default KeyMap;\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/papillon/src/KeyMap.js\n **/","import State from './State';\nimport PropertyObserver from './PropertyObserver';\n\nclass Observer {\n  static requestAnimationFrame(cb) {\n    if (!this._request) {\n      this._callbacks = new Set().add(cb);\n      this._request = window.requestAnimationFrame(()=> {\n        this._callbacks.forEach(cb => cb());\n        this._request = this._callbacks = undefined;\n      });\n    } else {\n      this._callbacks.add(cb);\n    }\n\n    return cb;\n  }\n\n  static cancelAnimationFrame(cb) {\n    if (this._callbacks) {\n      this._callbacks.delete(cb);\n    }\n  }\n\n  constructor(host, keys, callback) {\n    if (!host || !keys || !callback) {\n      throw new TypeError('Invalid arguments');\n    }\n\n    this.callback = callback;\n    this.revert = [];\n\n    this.state = new State(\n      [].concat(keys).reduce( (list, key) => {\n        let observer = new PropertyObserver(host, key);\n        list[key] = host[key];\n\n        this.revert.push(observer.observe((value)=> {\n          if (!State.is(list[key], value)) {\n            list[key] = value;\n            this.check();\n          } else if (State.isObject(value)) {\n            this.check();\n          }\n        }));\n\n        return list;\n      }, {})\n    );\n  }\n\n  check() {\n    if (!this.checkFn) {\n      this.checkFn = Observer.requestAnimationFrame(()=> {\n        if (this.state.isChanged()) {\n          this.callback(this.state.changelog);\n        }\n\n        this.checkFn = undefined;\n      });\n    }\n  }\n\n  destroy() {\n    if (this.checkFn) {\n      Observer.cancelAnimationFrame(this.checkFn);\n    }\n\n    this.revert.forEach(cb => cb());\n  }\n}\n\nexport default Observer;\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/papillon/src/Observer.js\n **/","import PropertyProxy from './PropertyProxy';\n\nlet register = new WeakMap();\n\nclass PropertyObserver {\n  static singleton(host, key, target) {\n    let instance = register.get(host);\n    if (instance) {\n      if (instance[key]) {\n        return instance[key];\n      } else {\n        instance[key] = target;\n      }\n    } else {\n      register.set(host, { [key]: target });\n    }\n\n    return target;\n  }\n\n  constructor(host, key) {\n    let singleton = PropertyObserver.singleton(host, key, this);\n    if (singleton !== this) {\n      return singleton;\n    }\n\n    this.proxy = new PropertyProxy(host, key,\n      (value)=> this.getters.forEach(cb => cb(value)),\n      (newValue)=> this.setters.forEach(cb => cb(newValue))\n    );\n\n    this.getters = new Set();\n    this.setters = new Set();\n  }\n\n  observe(get, set) {\n    if (!this.getters.size) {\n      this.proxy.on();\n    }\n\n    this.getters.add(get);\n    this.setters.add(set || get);\n\n    return ()=> {\n      this.unobserve(get, set);\n    };\n  }\n\n  unobserve(get, set) {\n    this.getters.delete(get);\n    this.setters.delete(set || get);\n\n    if (!this.getters.size && !this.setters.size) {\n      this.proxy.off();\n    }\n  }\n}\n\nexport default PropertyObserver;\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/papillon/src/PropertyObserver.js\n **/","class PropertyProxy {\n  constructor(host, key, get, set) {\n    this.host = host;\n    this.key = key;\n    this.getter = get;\n    this.setter = set || get;\n  }\n\n  getOwnDescriptor() {\n    let desc = Object.getOwnPropertyDescriptor(this.host, this.key);\n\n    if (desc) {\n      if (!desc.configurable) {\n        throw new TypeError(\n          `Cannot create proxy for not configurable property '${this.key}'`);\n      }\n      if (!desc.get && !desc.set && !desc.writable) {\n        throw new TypeError(\n          `Cannot create proxy for readonly property '${this.key}'`);\n      }\n    }\n\n    return desc;\n  }\n\n  getProtoDescriptor() {\n    let desc, host = Object.getPrototypeOf(this.host);\n\n    while(host) {\n      desc = Object.getOwnPropertyDescriptor(host, this.key);\n      if (desc) {\n        break;\n      } else {\n        host = Object.getPrototypeOf(host);\n      }\n    }\n\n    if (desc) {\n      if (!desc.get && !desc.set) {\n        desc.get = ()=> {\n          delete this.host[this.key];\n          let value = this.host[this.key];\n          this.on();\n          return value;\n        };\n        desc.set = (newVal)=> {\n          delete this.host[this.key];\n          this.host[this.key] = newVal;\n          this.on();\n        };\n      }\n    }\n\n    return desc;\n  }\n\n  on() {\n    let desc = this.getOwnDescriptor();\n\n    if (desc) {\n      this.ownProperty = true;\n    } else {\n      this.ownProperty = false;\n      desc = this.getProtoDescriptor();\n    }\n\n    if (!desc) {\n      this.ownProperty = true;\n      this.notDefined = true;\n      desc = {\n        enumerable: true,\n        writable: true,\n        configurable: true\n      };\n    }\n\n    this.desc = desc;\n    this.value = this.host[this.key];\n\n    Object.defineProperty(this.host, this.key, {\n      configurable: true,\n      enumerable: this.desc.enumerable,\n      get: this.get.bind(this),\n      set: this.set.bind(this)\n    });\n  }\n\n  off() {\n    if (this.ownProperty) {\n      if (this.notDefined) {\n        delete this.host[this.key];\n      } else {\n        if (!this.desc.get && !this.desc.set) {\n          this.desc.value = this.value;\n        }\n        Object.defineProperty(this.host, this.key, this.desc);\n      }\n    } else {\n      delete this.host[this.key];\n    }\n  }\n\n  get() {\n    if (this.desc.get) {\n      this.value = this.desc.get.call(this.host);\n    }\n    this.getter(this.value);\n    return this.value;\n  }\n\n  set(newValue) {\n    this.notDefined = false;\n\n    if (this.desc.set) {\n      this.desc.set.call(this.host, newValue);\n    }\n\n    if (this.desc.writable || this.desc.get || this.desc.set) {\n      this.value = newValue;\n    }\n\n    this.setter(this.value);\n  }\n}\n\nexport default PropertyProxy;\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/papillon/src/PropertyProxy.js\n **/","import Expression from '../Expression/Expression';\n\nclass Wrapper {\n  constructor(node) {\n    this.node = node;\n  }\n\n  get() {\n    return this.node.value;\n  }\n\n  set(value) {\n    this.value = value;\n\n    if (this.node.value !== value) {\n      this.node.value = value;\n    }\n  }\n\n  observe(cb) {\n    this.node.addEventListener('input', cb);\n  }\n}\n\nclass CheckWrapper extends Wrapper {\n  get() {\n    return this.node.checked ? this.node.value : undefined;\n  }\n\n  set(value) {\n    if (this.node.value === value) {\n      this.node.checked = true;\n    } else {\n      this.node.checked = false;\n    }\n  }\n\n  observe(cb) {\n    this.node.addEventListener('change', cb);\n  }\n}\n\nclass SelectWrapper extends Wrapper {\n  constructor(node) {\n    super(node);\n\n    if ('MutationObserver' in window) {\n      new MutationObserver(()=> {\n        this.set(this.value);\n      }).observe(node, {\n        attributes: true,\n        childList: true,\n        characterData: true,\n        subtree: true\n      });\n    }\n  }\n\n  set(value) {\n    this.value = value;\n\n    Array.from(this.node.options).some(o => {\n      if (o.value === value) {\n        o.selected = true;\n        return true;\n      }\n    });\n  }\n\n  observe(cb) {\n    this.node.addEventListener('change', cb);\n  }\n}\n\nclass MultiSelectWrapper extends SelectWrapper {\n  get() {\n    const values = this.value || [];\n    const newValues = Array.from(this.node.options)\n      .filter(o => o.selected)\n      .map(o => o.value);\n\n    Object.assign(values, newValues);\n    values.length = newValues.length;\n\n    return values;\n  }\n\n  set(values) {\n    this.value = values;\n\n    if (!Array.isArray(values)) {\n      throw new Error('Invalid values. Array instance required.');\n    }\n\n    Array.from(this.node.options).forEach(o => {\n      o.selected = values.some(v => v === o.value);\n    });\n  }\n}\n\nexport default function Link(engine, node, evaluate) {\n  let wrapper;\n\n  switch(node.type) {\n    case \"checkbox\":\n    case \"radio\":\n      wrapper = new CheckWrapper(node);\n      break;\n\n    case \"select-one\":\n      wrapper = new SelectWrapper(node);\n      break;\n\n    case \"select-multiple\":\n      wrapper = new MultiSelectWrapper(node);\n      break;\n\n    default:\n      wrapper = new Wrapper(node);\n  }\n\n  const expr = new Expression(engine, evaluate);\n\n  expr.set(wrapper.get(), true);\n  expr.observe(wrapper.set.bind(wrapper), true, false);\n  wrapper.observe(()=> expr.set(wrapper.get()));\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/Markers/Link.js\n **/","import { State } from 'papillon/papillon';\nimport Engine from '../Engine';\nimport Path from './Path';\nimport Flags from './Flags';\n\nexport default class Expression {\n  static parse(evaluate) {\n    const [temp, filter] = evaluate.split('|');\n    const flags = new Set();\n\n    for(var index = 0; index < temp.length; index++) {\n      if (Flags[temp[index]]) {\n        flags.add(temp[index]);\n      } else {\n        break;\n      }\n    }\n\n    const expr = temp.substr(index);\n    return [flags, expr, filter];\n  }\n\n  constructor(engine, evaluate) {\n    if(!evaluate || typeof evaluate !== 'string') {\n      throw new TypeError(`'${evaluate}': Invalid input type.`);\n    }\n\n    const [flags, expr, filter] = Expression.parse(evaluate.trim());\n    this.engine = engine;\n    this.filter = { get: v => v, set: v => v };\n\n    if (this.engine.state) {\n      this.context = ()=> this.engine.state;\n    } else {\n      this.context = ()=> {\n        if (this.engine.state === undefined) {\n          this.engine.state = {};\n        }\n        return this.engine.state;\n      };\n    }\n\n    if (filter) {\n      const filters = Engine.config(engine).filters;\n      if (!filters[filter]) {\n        throw new ReferenceError(`Filter '${filter}' not found.`);\n      }\n      Object.assign(this.filter, filters[filter]);\n    }\n\n    flags.forEach(f => Flags[f](this, engine));\n    this.path = new Path(expr, this.context);\n  }\n\n  get() {\n    return this.filter.get(this.path.get());\n  }\n\n  set(value, onlyDefaults) {\n    return this.path.set(this.filter.set(value), onlyDefaults);\n  }\n\n  call(...args) {\n    return this.path.call(...args);\n  }\n\n  observe(cb, init = false, deep = this.deep) {\n    let target;\n    let cache = this.get();\n\n    if (deep) {\n      target = new State(Object.defineProperty({}, 'value', {\n        get: this.get.bind(this),\n        configurable: true,\n        enumerable: true\n      }));\n    }\n\n    Engine.watch(this.engine, ()=> {\n      const newVal = this.get();\n\n      if (target && target.isChanged()) {\n        cb(newVal, target.changelog.value);\n      } else if (!State.is(newVal, cache)) {\n        cb(newVal);\n      }\n\n      cache = newVal;\n    });\n\n    if (init) {\n      cb(cache);\n    }\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/Expression/Expression.js\n **/","export default class Path {\n  constructor(evaluate, context) {\n    if (!evaluate) {\n      throw new TypeError('Path cannot be empty.');\n    }\n\n    this.evaluate = evaluate;\n    this.context = context;\n    this.path = this.parse(evaluate);\n  }\n\n  parse(path) {\n    let result = [];\n\n    const property = path.split('').reduce(\n      (acc, char)=> {\n        switch(char) {\n          case \".\":\n            result.push({property: acc, proto: Object});\n            return \"\";\n          case \"[\":\n            result.push({property: acc, proto: Array});\n            return \"\";\n          case \"]\":\n            return acc;\n        }\n\n        return acc + char;\n      }, \"\");\n\n    result.push({property});\n\n    return result;\n  }\n\n  getContext() {\n    const context = this.context();\n    if (Object(context) !== context) {\n      throw new TypeError('Object required as path context.');\n    }\n    return context;\n  }\n\n  get() {\n    let result = this.getContext();\n\n    if (result) {\n      this.path.every(({property, proto})=> {\n        result = result[property];\n\n        if(result && proto && !(result instanceof Object)) {\n          throw new TypeError(\n            `'${property}' in '${this.evaluate}': Object instance required.`);\n        }\n\n        return result;\n      });\n    }\n\n    return result;\n  }\n\n  set(newVal, check = false) {\n    const {context, property} = this.path.reduce((acc, {property, proto})=> {\n      if (proto) {\n        if (!acc.context[property]) {\n          acc.context[property] = proto();\n        } else if(!(acc.context[property] instanceof Object)) {\n          throw new TypeError(\n            `'${property}' in '${this.evaluate}': Object instance required.`);\n        }\n\n        acc.context = acc.context[property];\n      } else {\n        acc.property = property;\n      }\n\n      return acc;\n    }, { context: this.getContext() });\n\n    if (!check || context[property] === undefined) {\n      context[property] = newVal;\n    }\n\n    return context[property];\n  }\n\n  call(...args) {\n    const { context, property } = this.path.reduce((acc, {property, proto})=> {\n      if (proto) {\n        acc.context = acc.context[property];\n        if(!(acc.context instanceof Object)) {\n          throw new TypeError(\n            `'${property}' in '${this.evaluate}': Object instance required.`);\n        }\n      } else {\n        acc.property = property;\n      }\n\n      return acc;\n    }, { context: this.getContext() });\n\n    if (typeof context[property] !== 'function') {\n      throw new TypeError(`'${this.evaluate}': Function required.`);\n    }\n\n    return context[property](...args);\n  }\n\n  delete() {\n    let context = this.getContext();\n    let result = { context, property: this.path[0].property };\n\n    this.path.some(({property}) => {\n      if (!context.hasOwnProperty(property)) {\n        return true;\n      }\n\n      if (Object.keys(context).length > 1) {\n        result = { context, property };\n      }\n\n      context = context[property];\n    });\n\n    delete result.context[result.property];\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/Expression/Path.js\n **/","const Flags = {\n  '!': function(expr) {\n    const filter = expr.filter;\n    expr.filter = {\n      get: v => filter.get(!v), set: v => filter.set(!v)\n    };\n  },\n  '@': function(expr, engine) {\n    expr.context = ()=> engine;\n  },\n  '&': function(expr) {\n    expr.set = ()=> {};\n  },\n  '*': function(expr) {\n    expr.deep = true;\n  }\n};\n\nexport default Flags;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/Expression/Flags.js\n **/","import Expression from '../Expression/Expression';\nimport {list} from './List';\n\nexport default function ClassList(engine, node, evaluate) {\n  list(evaluate, (name, value)=> {\n    const expr = new Expression(engine, value);\n\n    expr.set(node.classList.contains(name), true);\n    expr.observe(val => {\n      if (val) {\n        node.classList.add(name);\n      } else {\n        node.classList.remove(name);\n      }\n    }, true, false);\n  });\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/Markers/ClassList.js\n **/","export function list(evaluate, cb) {\n  evaluate.split(';').forEach(v => {\n    const [name, value] = v.split(':');\n\n    if (!name || !value) {\n      throw new SyntaxError(`'${v}': Invalid list element.`);\n    }\n\n    cb(name.trim(), value.trim());\n  });\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/Markers/List.js\n **/","import Template from './Template/Template';\nimport Expression from '../Expression/Expression';\n\nexport default function Context(engine, node, evaluate) {\n  if (!node.children[0]) {\n    throw new Error('No children elements.');\n  }\n\n  const template = new Template(\n    Array.from(node.childNodes)\n      .filter(n => n.nodeType === Node.ELEMENT_NODE),\n    engine\n  );\n\n  const expr = new Expression(engine, evaluate);\n\n  expr.set({}, true);\n  expr.observe(state => {\n    if (!state) {\n      template.remove();\n    } else {\n      if (typeof state !== 'object') {\n        throw new TypeError('Invalid context target.');\n      }\n      template.setState(state).append();\n    }\n  }, true, true);\n}\n\nContext._options = {\n  breakCompile: true\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/Markers/Context.js\n **/","import Engine from '../../Engine';\n\nexport default class Template {\n  constructor(nodes, engine, host) {\n    this.nodes = [].concat(nodes);\n    this.host = host || this.nodes[0].parentElement;\n    this.parentEngine = engine;\n\n    if (!this.host) {\n      throw new Error('Invalid host for template.');\n    }\n\n    if (!this.nodes[0].parentElement) {\n      this.hidden = true;\n    }\n  }\n\n  getState() {\n    if (!this.engine) {\n      throw new Error('Template does not fully initalized.');\n    }\n\n    return this.engine.state;\n  }\n\n  setState(state) {\n    if (!this.engine) {\n      this.engine = Engine.spawn(this.parentEngine, this.nodes, state);\n    } else {\n      this.engine.state = state;\n    }\n\n    return this;\n  }\n\n  append(forceAppend = false, insertBefore = null) {\n    if (this.hidden || forceAppend) {\n      this.nodes.forEach(node => {\n        this.host.insertBefore(node, insertBefore);\n      });\n      this.hidden = false;\n    }\n\n    return this;\n  }\n\n  remove() {\n    if (!this.hidden) {\n      const fragment = document.createDocumentFragment();\n      this.nodes.forEach(node => fragment.appendChild(node));\n      this.hidden = true;\n    }\n\n    return this;\n  }\n\n  clone() {\n    return new this.constructor(\n      this.nodes.map(node => node.cloneNode(true)),\n      this.parentEngine,\n      this.host\n    );\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/Markers/Template/Template.js\n **/","import Expression from '../Expression/Expression';\nimport {list} from './List';\n\nexport default function EventListener(engine, node, evaluate) {\n  list(evaluate, (name, value)=> {\n    const expr = new Expression(engine, value);\n    node.addEventListener(name, (e)=> expr.call(e));\n  });\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/Markers/EventListener.js\n **/","import IndexedTemplate from './Template/IndexedTemplate';\nimport Expression from '../Expression/Expression';\n\nclass Controller {\n  constructor(engine, node, evaluate) {\n    if (!node.children[0]) {\n      throw new Error('No children elements.');\n    }\n\n    this.engine = engine;\n    this.node = node;\n\n    const expr = new Expression(engine, evaluate);\n    let list = expr.get();\n    let createFromView = false;\n\n    if(list === undefined) {\n      list = expr.set([], true);\n      createFromView = true;\n    }\n\n    if (!Array.isArray(list)) {\n      throw new TypeError('Invalid foreach target.');\n    }\n\n    if (createFromView) {\n      this.items = this.createFromView(list);\n      this.template = this.items[this.items.length -1].clone();\n    } else {\n      this.items = this.createFromList(list);\n\n      if (this.items.length) {\n        this.template = this.items[this.items.length - 1].clone();\n      } else {\n        this.template = new IndexedTemplate(node.children[0], this.engine);\n      }\n\n      this.clear(list);\n    }\n\n    expr.observe(this.render.bind(this), false, true);\n  }\n\n  createFromView(list) {\n    const length = this.node.children.length;\n\n    return Array.from(this.node.children).map((child, index) => {\n      const temp = new IndexedTemplate(child, this.engine);\n\n      list[index] = temp\n        .setState(list[index], { index, length })\n        .getState();\n\n      return temp;\n    });\n  }\n\n  createFromList(list) {\n    const length = list.length;\n    let temp;\n\n    return list.map((item, index) => {\n      if (this.node.children[index]) {\n        temp = new IndexedTemplate(this.node.children[index], this.engine)\n          .setState(list[index], { index, length });\n      } else {\n        temp = temp\n          .clone()\n          .setState(list[index], { index, length })\n          .append(true);\n      }\n\n      list[index] = temp.getState();\n\n      return temp;\n    });\n  }\n\n  clear(list) {\n    const index = list.length;\n    const max = this.node.children.length;\n    for (let i = index; i < max; i++) {\n      this.node.removeChild(this.node.children[index]);\n    }\n  }\n\n  render(list, { type, changelog } = {}) {\n    if (!Array.isArray(list)) {\n      throw new TypeError('Invalid foreach target.');\n    }\n\n    const length = list.length;\n\n    switch(type) {\n      case 'modify':\n        Object.assign(this.items, Object.keys(changelog)\n          .reduce((items, key) => {\n            const { type, oldKey, newKey } = changelog[key];\n\n            if (type === 'delete') {\n              if (this.items[key]) {\n                this.items[key].remove();\n              }\n            } else {\n              const index = parseInt(key, 10);\n              let temp = this.items[oldKey || key];\n              let append = false;\n\n              if (oldKey) {\n                if (this.items[key]) {\n                  this.items[key].remove();\n                }\n                this.items[oldKey] = null;\n              }\n\n              if (!temp || (newKey && !oldKey)) {\n                temp = this.template.clone();\n                append = true;\n              }\n\n              temp.setState(list[key], { index, length });\n\n              if (append || oldKey) {\n                temp.append(true, this.node.children[index]);\n              }\n\n              items[key] = temp;\n            }\n\n            return items;\n          }, {})\n        );\n\n        this.items.length = list.length;\n\n        break;\n\n      case 'set':\n        const itemsLength = this.items.length;\n        const items = list.map((item, index) => {\n          let temp;\n\n          if (index < itemsLength) {\n            temp = this.items[index];\n          } else {\n            temp = this.template.clone().append(true);\n          }\n\n          temp.setState(item, { index, length });\n\n          return temp;\n        });\n\n        for(let i = length; i < itemsLength; i++) {\n          this.items[i].remove();\n        }\n\n        this.items = items;\n    }\n  }\n}\n\nexport default function Foreach(engine, node, evaluate) {\n  return new Controller(engine, node, evaluate);\n}\n\nForeach._options = {\n  breakCompile: true\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/Markers/Foreach.js\n **/","import Template from './Template';\n\nconst map = new WeakMap();\n\nfunction extendEngine(engine) {\n  if (map.has(engine)) {\n    return map.get(engine);\n  } else {\n    const extended = Object.defineProperties(Object.create(engine), {\n      number: { get: function() { return this.index + 1; }},\n      odd: { get: function() { return this.number % 2 !== 0; }},\n      even: { get: function() { return this.number % 2 === 0; }},\n      first: { get: function() { return this.index === 0; }},\n      last: { get: function() { return this.length === this.number; }}\n    });\n\n    map.set(engine, extended);\n\n    return extended;\n  }\n}\n\nexport default class IndexedTemplate extends Template {\n  constructor(nodes, engine, host) {\n    super(nodes, extendEngine(engine), host);\n  }\n\n  setState(state, {index, length}) {\n    super.setState(state);\n    Object.assign(this.engine, {index, length});\n\n    return this;\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/Markers/Template/IndexedTemplate.js\n **/","import Expression from '../Expression/Expression';\nimport {list} from './List';\n\nexport default function Property(engine, node, evaluate) {\n  list(evaluate, (name, value)=> {\n    const accessor = resolveProperty(node, name);\n    const expr = new Expression(engine, value);\n\n    expr.set(accessor.get(), true);\n    expr.observe(accessor.set, true);\n  });\n}\n\nfunction resolveProperty(node, name) {\n  if (name in node) {\n    return {\n      get: ()=> node[name],\n      set: (value)=> node[name] = value\n    };\n  } else {\n    return {\n      get: ()=> {\n        const val = node.getAttribute(name);\n        return val ? val : undefined;\n      },\n      set: (value)=> {\n        if (value === false || value === undefined || value === null) {\n          node.removeAttribute(name);\n        } else {\n          node.setAttribute(name, value === true ? name : value);\n        }\n      }\n    };\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/Markers/Property.js\n **/","import Property from './Property';\n\nexport default function Text(engine, node, evaluate) {\n  Property(engine, node, `textContent: ${evaluate}`);\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/Markers/Text.js\n **/"],"sourceRoot":""}